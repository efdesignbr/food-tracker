(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{2848:function(e,t,o){Promise.resolve().then(o.bind(o,5207))},5207:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return c}});var n=o(7437),r=o(2265),i=(o(8174),o(6463)),a=o(7138),l=o(5591);function s(){let[e,t]=(0,r.useState)(""),[o,s]=(0,r.useState)(""),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(!1),f=(0,i.useRouter)();async function g(t){t.preventDefault(),u(null),h(!0);try{console.log("Tentando login com:",{email:e,isMobile:!0});{let t=await l.h.post("/api/auth/mobile-login",{email:e,password:o}),n=await t.json();t.ok?n.token?(localStorage.setItem("auth_token",n.token),console.log("Token salvo, redirecionando..."),f.push("/"),f.refresh()):u("Erro: Token n\xe3o recebido"):u(n.error||"Erro no login")}}catch(e){console.error("Exce\xe7\xe3o ao fazer login:",e),u("Erro ao fazer login: "+e.message)}finally{h(!1)}}return(0,i.useSearchParams)().get("callbackUrl"),(0,n.jsxs)("div",{style:{width:"100%",maxWidth:400,padding:32,backgroundColor:"#fff",borderRadius:12,boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[(0,n.jsx)("h1",{style:{fontSize:28,fontWeight:700,marginBottom:8,textAlign:"center"},children:"Food Tracker"}),(0,n.jsx)("p",{style:{fontSize:14,color:"#666",textAlign:"center",marginBottom:32},children:"Fa\xe7a login para continuar"}),(0,n.jsxs)("form",{onSubmit:g,style:{display:"grid",gap:16},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{display:"block",fontSize:14,fontWeight:500,marginBottom:8},children:"Email"}),(0,n.jsx)("input",{type:"email",placeholder:"seu@email.com",value:e,onChange:e=>t(e.target.value),required:!0,style:{width:"100%",padding:"12px 16px",fontSize:14,border:"1px solid #e0e0e0",borderRadius:8,outline:"none",transition:"border-color 0.2s"},onFocus:e=>e.target.style.borderColor="#2196F3",onBlur:e=>e.target.style.borderColor="#e0e0e0"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{display:"block",fontSize:14,fontWeight:500,marginBottom:8},children:"Senha"}),(0,n.jsx)("input",{type:"password",placeholder:"••••••••",value:o,onChange:e=>s(e.target.value),required:!0,style:{width:"100%",padding:"12px 16px",fontSize:14,border:"1px solid #e0e0e0",borderRadius:8,outline:"none",transition:"border-color 0.2s"},onFocus:e=>e.target.style.borderColor="#2196F3",onBlur:e=>e.target.style.borderColor="#e0e0e0"})]}),c&&(0,n.jsx)("div",{style:{padding:12,backgroundColor:"#ffebee",color:"#c62828",borderRadius:8,fontSize:14},children:c}),(0,n.jsx)("button",{type:"submit",disabled:d,style:{width:"100%",padding:"12px 24px",fontSize:16,fontWeight:600,color:"#fff",backgroundColor:d?"#999":"#2196F3",border:"none",borderRadius:8,cursor:d?"not-allowed":"pointer",transition:"background-color 0.2s"},onMouseEnter:e=>{d||(e.currentTarget.style.backgroundColor="#1976D2")},onMouseLeave:e=>{d||(e.currentTarget.style.backgroundColor="#2196F3")},children:d?"Entrando…":"Entrar"})]}),(0,n.jsxs)("p",{style:{textAlign:"center",marginTop:16,color:"#666",fontSize:14},children:["Ainda nao tem conta?"," ",(0,n.jsx)(a.default,{href:"/signup",style:{color:"#2196F3",fontWeight:600,textDecoration:"none"},children:"Criar conta"})]})]})}function c(){return(0,n.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f5f5"},children:(0,n.jsx)(r.Suspense,{fallback:(0,n.jsx)("div",{children:"Carregando..."}),children:(0,n.jsx)(s,{})})})}},5591:function(e,t,o){"use strict";o.d(t,{h:function(){return a},x:function(){return i}});var n=o(5800);let r=o(357).env.NEXT_PUBLIC_API_URL||"https://app.foodtracker.com.br";async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:o,...i}=t,a={...i.headers};if(o)a.Authorization="Bearer ".concat(o);else{let e=localStorage.getItem("auth_token");console.log("[API Client] localStorage auth_token:",e?"exists":"null"),e&&(a.Authorization="Bearer ".concat(e))}i.body&&"string"==typeof i.body&&!a["Content-Type"]&&(a["Content-Type"]="application/json");let l=e.startsWith("http")?e:"".concat(r).concat(e);console.log("[API Client]",{isMobile:!0,baseUrl:r,endpoint:e,finalUrl:l,hasAuthToken:!!a.Authorization});try{let t=await fetch(l,{...i,headers:a,credentials:"include"});if(console.log("[API Client] Response ".concat(e,":"),{status:t.status}),401===t.status){console.warn("401 Unauthorized - triggering client logout");try{(0,n.h)()}catch(e){}}return t}catch(e){throw console.error("[API Client Error]",e),e}}let a={get:(e,t)=>i(e,{method:"GET",token:t}),post:(e,t,o)=>i(e,{method:"POST",body:JSON.stringify(t),token:o}),put:(e,t,o)=>i(e,{method:"PUT",body:JSON.stringify(t),token:o}),patch:(e,t,o)=>i(e,{method:"PATCH",body:JSON.stringify(t),token:o}),delete:(e,t)=>i(e,{method:"DELETE",token:t})}},5800:function(e,t,o){"use strict";function n(){try{try{localStorage.removeItem("auth_token")}catch(e){}try{localStorage.setItem("auth_logout_at",String(Date.now()))}catch(e){}try{window.dispatchEvent(new Event("app:logout"))}catch(e){}}catch(e){}}o.d(t,{h:function(){return n}})},6463:function(e,t,o){"use strict";var n=o(1169);o.o(n,"usePathname")&&o.d(t,{usePathname:function(){return n.usePathname}}),o.o(n,"useRouter")&&o.d(t,{useRouter:function(){return n.useRouter}}),o.o(n,"useSearchParams")&&o.d(t,{useSearchParams:function(){return n.useSearchParams}})},357:function(e,t,o){"use strict";var n,r;e.exports=(null==(n=o.g.process)?void 0:n.env)&&"object"==typeof(null==(r=o.g.process)?void 0:r.env)?o.g.process:o(8081)},8081:function(e){!function(){var t={229:function(e){var t,o,n,r=e.exports={};function i(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(o){try{return t.call(null,e,0)}catch(o){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var s=[],c=!1,u=-1;function d(){c&&n&&(c=!1,n.length?s=n.concat(s):u=-1,s.length&&h())}function h(){if(!c){var e=l(d);c=!0;for(var t=s.length;t;){for(n=s,s=[];++u<t;)n&&n[u].run();u=-1,t=s.length}n=null,c=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];s.push(new f(e,t)),1!==s.length||c||l(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},o={};function n(e){var r=o[e];if(void 0!==r)return r.exports;var i=o[e]={exports:{}},a=!0;try{t[e](i,i.exports,n),a=!1}finally{a&&delete o[e]}return i.exports}n.ab="//";var r=n(229);e.exports=r}()}},function(e){e.O(0,[174,138,971,23,744],function(){return e(e.s=2848)}),_N_E=e.O()}]);