(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[461],{4982:function(e,t,o){Promise.resolve().then(o.bind(o,582))},582:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return l}});var n=o(7437),r=o(2265),i=o(6463),a=o(5591);function l(){let e=(0,i.useRouter)(),[t,o]=(0,r.useState)(1),[l,s]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)({goal_type:"",height_cm:void 0,age:void 0,gender:"",activity_level:""});function g(e,t){h(o=>({...o,[e]:t}))}function p(){o(e=>e+1)}function f(){o(e=>e-1)}async function b(){d(null),s(!0);try{let t=await a.h.post("/api/user/goals",{goal_type:u.goal_type,height_cm:u.height_cm,age:u.age,gender:u.gender,activity_level:u.activity_level});if(!t.ok){let e=await t.json();throw Error(e.error||"Erro ao salvar")}e.push("/"),e.refresh()}catch(e){d(e.message),s(!1)}}return(0,n.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",backgroundColor:"#f5f5f5"},children:[(0,n.jsxs)("div",{style:{padding:"24px 24px 0"},children:[(0,n.jsx)("div",{style:{display:"flex",gap:8,marginBottom:8},children:[1,2,3].map(e=>(0,n.jsx)("div",{style:{flex:1,height:4,borderRadius:2,backgroundColor:e<=t?"#2196F3":"#e0e0e0"}},e))}),(0,n.jsxs)("p",{style:{fontSize:14,color:"#666",textAlign:"center"},children:["Passo ",t," de ",3]})]}),(0,n.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:24},children:(0,n.jsxs)("div",{style:{width:"100%",maxWidth:400,backgroundColor:"#fff",borderRadius:16,padding:32,boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[1===t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{style:{fontSize:24,fontWeight:700,marginBottom:8,textAlign:"center"},children:"Qual seu objetivo?"}),(0,n.jsx)("p",{style:{fontSize:14,color:"#666",marginBottom:24,textAlign:"center"},children:"Isso nos ajuda a personalizar sua experiencia"}),(0,n.jsx)("div",{style:{display:"grid",gap:12},children:[{value:"lose_weight",label:"Perder peso",icon:"⬇️"},{value:"maintain_weight",label:"Manter peso",icon:"⚖️"},{value:"gain_weight",label:"Ganhar massa",icon:"\uD83D\uDCAA"}].map(e=>(0,n.jsxs)("button",{type:"button",onClick:()=>{g("goal_type",e.value),p()},style:{padding:16,fontSize:16,fontWeight:600,border:"2px solid #e5e7eb",borderRadius:12,backgroundColor:"white",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"center",gap:12},children:[(0,n.jsx)("span",{style:{fontSize:24},children:e.icon}),e.label]},e.value))})]}),2===t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{style:{fontSize:24,fontWeight:700,marginBottom:8,textAlign:"center"},children:"Seus dados"}),(0,n.jsx)("p",{style:{fontSize:14,color:"#666",marginBottom:24,textAlign:"center"},children:"Informacoes basicas para calcular suas metas"}),(0,n.jsxs)("div",{style:{display:"grid",gap:16},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{display:"block",fontSize:14,fontWeight:600,marginBottom:8},children:"Altura (cm)"}),(0,n.jsx)("input",{type:"number",placeholder:"Ex: 175",value:u.height_cm||"",onChange:e=>g("height_cm",parseInt(e.target.value)||void 0),style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,boxSizing:"border-box"}})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{display:"block",fontSize:14,fontWeight:600,marginBottom:8},children:"Idade"}),(0,n.jsx)("input",{type:"number",placeholder:"Ex: 30",value:u.age||"",onChange:e=>g("age",parseInt(e.target.value)||void 0),style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,boxSizing:"border-box"}})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{display:"block",fontSize:14,fontWeight:600,marginBottom:8},children:"Genero"}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:8},children:[{value:"male",label:"Masculino"},{value:"female",label:"Feminino"},{value:"other",label:"Outro"}].map(e=>(0,n.jsx)("button",{type:"button",onClick:()=>g("gender",e.value),style:{padding:12,fontSize:14,fontWeight:600,border:u.gender===e.value?"2px solid #2196F3":"2px solid #e5e7eb",borderRadius:8,backgroundColor:u.gender===e.value?"#e3f2fd":"white",cursor:"pointer"},children:e.label},e.value))})]})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:12,marginTop:24},children:[(0,n.jsx)("button",{type:"button",onClick:f,style:{padding:12,fontSize:16,fontWeight:600,border:"2px solid #e5e7eb",borderRadius:8,backgroundColor:"white",cursor:"pointer"},children:"Voltar"}),(0,n.jsx)("button",{type:"button",onClick:p,disabled:!u.height_cm||!u.age||!u.gender,style:{flex:1,padding:12,fontSize:16,fontWeight:600,border:"none",borderRadius:8,backgroundColor:u.height_cm&&u.age&&u.gender?"#2196F3":"#ccc",color:"white",cursor:u.height_cm&&u.age&&u.gender?"pointer":"not-allowed"},children:"Continuar"})]})]}),3===t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{style:{fontSize:24,fontWeight:700,marginBottom:8,textAlign:"center"},children:"Nivel de atividade"}),(0,n.jsx)("p",{style:{fontSize:14,color:"#666",marginBottom:24,textAlign:"center"},children:"Quanto voce se exercita por semana?"}),(0,n.jsx)("div",{style:{display:"grid",gap:12},children:[{value:"sedentary",label:"Sedentario",desc:"Pouco ou nenhum exercicio"},{value:"light",label:"Leve",desc:"1-3 dias por semana"},{value:"moderate",label:"Moderado",desc:"3-5 dias por semana"},{value:"active",label:"Ativo",desc:"6-7 dias por semana"},{value:"very_active",label:"Muito ativo",desc:"2x por dia ou trabalho fisico"}].map(e=>(0,n.jsxs)("button",{type:"button",onClick:()=>g("activity_level",e.value),style:{padding:16,fontSize:16,fontWeight:600,border:u.activity_level===e.value?"2px solid #2196F3":"2px solid #e5e7eb",borderRadius:12,backgroundColor:u.activity_level===e.value?"#e3f2fd":"white",cursor:"pointer",textAlign:"left"},children:[(0,n.jsx)("div",{children:e.label}),(0,n.jsx)("div",{style:{fontSize:12,fontWeight:400,color:"#666",marginTop:4},children:e.desc})]},e.value))}),c&&(0,n.jsx)("div",{style:{marginTop:16,padding:12,backgroundColor:"#fee2e2",color:"#991b1b",borderRadius:8,fontSize:14},children:c}),(0,n.jsxs)("div",{style:{display:"flex",gap:12,marginTop:24},children:[(0,n.jsx)("button",{type:"button",onClick:f,style:{padding:12,fontSize:16,fontWeight:600,border:"2px solid #e5e7eb",borderRadius:8,backgroundColor:"white",cursor:"pointer"},children:"Voltar"}),(0,n.jsx)("button",{type:"button",onClick:b,disabled:!u.activity_level||l,style:{flex:1,padding:12,fontSize:16,fontWeight:600,border:"none",borderRadius:8,backgroundColor:!u.activity_level||l?"#ccc":"#10b981",color:"white",cursor:!u.activity_level||l?"not-allowed":"pointer"},children:l?"Salvando...":"Comecar a usar"})]})]})]})})]})}},5591:function(e,t,o){"use strict";o.d(t,{h:function(){return a},x:function(){return i}});var n=o(5800);let r=o(357).env.NEXT_PUBLIC_API_URL||"https://app.foodtracker.com.br";async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:o,...i}=t,a={...i.headers};if(o)a.Authorization="Bearer ".concat(o);else{let e=localStorage.getItem("auth_token");console.log("[API Client] localStorage auth_token:",e?"exists":"null"),e&&(a.Authorization="Bearer ".concat(e))}i.body&&"string"==typeof i.body&&!a["Content-Type"]&&(a["Content-Type"]="application/json");let l=e.startsWith("http")?e:"".concat(r).concat(e);console.log("[API Client]",{isMobile:!0,baseUrl:r,endpoint:e,finalUrl:l,hasAuthToken:!!a.Authorization});try{let t=await fetch(l,{...i,headers:a,credentials:"include"});if(console.log("[API Client] Response ".concat(e,":"),{status:t.status}),401===t.status){console.warn("401 Unauthorized - triggering client logout");try{(0,n.h)()}catch(e){}}return t}catch(e){throw console.error("[API Client Error]",e),e}}let a={get:(e,t)=>i(e,{method:"GET",token:t}),post:(e,t,o)=>i(e,{method:"POST",body:JSON.stringify(t),token:o}),put:(e,t,o)=>i(e,{method:"PUT",body:JSON.stringify(t),token:o}),patch:(e,t,o)=>i(e,{method:"PATCH",body:JSON.stringify(t),token:o}),delete:(e,t)=>i(e,{method:"DELETE",token:t})}},5800:function(e,t,o){"use strict";function n(){try{try{localStorage.removeItem("auth_token")}catch(e){}try{localStorage.setItem("auth_logout_at",String(Date.now()))}catch(e){}try{window.dispatchEvent(new Event("app:logout"))}catch(e){}}catch(e){}}o.d(t,{h:function(){return n}})},6463:function(e,t,o){"use strict";var n=o(1169);o.o(n,"usePathname")&&o.d(t,{usePathname:function(){return n.usePathname}}),o.o(n,"useRouter")&&o.d(t,{useRouter:function(){return n.useRouter}}),o.o(n,"useSearchParams")&&o.d(t,{useSearchParams:function(){return n.useSearchParams}})},357:function(e,t,o){"use strict";var n,r;e.exports=(null==(n=o.g.process)?void 0:n.env)&&"object"==typeof(null==(r=o.g.process)?void 0:r.env)?o.g.process:o(8081)},8081:function(e){!function(){var t={229:function(e){var t,o,n,r=e.exports={};function i(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(o){try{return t.call(null,e,0)}catch(o){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var s=[],c=!1,d=-1;function u(){c&&n&&(c=!1,n.length?s=n.concat(s):d=-1,s.length&&h())}function h(){if(!c){var e=l(u);c=!0;for(var t=s.length;t;){for(n=s,s=[];++d<t;)n&&n[d].run();d=-1,t=s.length}n=null,c=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];s.push(new g(e,t)),1!==s.length||c||l(h)},g.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},o={};function n(e){var r=o[e];if(void 0!==r)return r.exports;var i=o[e]={exports:{}},a=!0;try{t[e](i,i.exports,n),a=!1}finally{a&&delete o[e]}return i.exports}n.ab="//";var r=n(229);e.exports=r}()}},function(e){e.O(0,[971,23,744],function(){return e(e.s=4982)}),_N_E=e.O()}]);