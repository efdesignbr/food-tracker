(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[383],{3564:function(e,t,o){Promise.resolve().then(o.bind(o,90112))},90112:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return l}});var n=o(57437),i=o(2265),r=o(16463),a=o(45591);function l(){let e=(0,r.useRouter)(),[t,o]=(0,i.useState)(!0),[l,s]=(0,i.useState)(!1),[d,c]=(0,i.useState)(null),[u,h]=(0,i.useState)(!1),[g,p]=(0,i.useState)({goal_type:"",height_cm:void 0,age:void 0,gender:"",activity_level:"",target_weight_kg:void 0,weekly_goal_kg:void 0});async function v(){try{let e=await a.h.get("/api/user/goals"),t=await e.json();e.ok&&t.goals&&p(t.goals)}catch(e){console.error("Erro ao buscar objetivos:",e)}finally{o(!1)}}function m(e,t){p(o=>({...o,[e]:t}))}async function f(t){t.preventDefault(),c(null),h(!1),s(!0);try{if(!g.goal_type)throw Error("Selecione um objetivo");if(!g.height_cm||g.height_cm<100||g.height_cm>250)throw Error("Altura deve estar entre 100 e 250 cm");if(!g.age||g.age<10||g.age>120)throw Error("Idade deve estar entre 10 e 120 anos");if(!g.gender)throw Error("Selecione o g\xeanero");if(!g.activity_level)throw Error("Selecione o n\xedvel de atividade");let t={goal_type:g.goal_type,height_cm:g.height_cm,age:g.age,gender:g.gender,activity_level:g.activity_level};g.target_weight_kg&&!isNaN(g.target_weight_kg)&&(t.target_weight_kg=g.target_weight_kg),g.weekly_goal_kg&&!isNaN(g.weekly_goal_kg)&&(t.weekly_goal_kg=g.weekly_goal_kg);let o=await a.h.post("/api/user/goals",t),n=await o.json();if(!o.ok)throw Error(n.error||"Erro ao salvar objetivos");h(!0),setTimeout(()=>{e.push("/coach")},1500)}catch(e){c(e.message)}finally{s(!1)}}return((0,i.useEffect)(()=>{v()},[]),t)?(0,n.jsx)("div",{style:{maxWidth:800,margin:"0 auto",padding:24},children:(0,n.jsx)("div",{style:{textAlign:"center",padding:40},children:"Carregando..."})}):(0,n.jsxs)("div",{style:{maxWidth:800,margin:"0 auto",padding:24},children:[(0,n.jsx)("h1",{style:{fontSize:32,fontWeight:700,marginBottom:8},children:"Meus Objetivos"}),(0,n.jsx)("p",{style:{fontSize:16,color:"#6b7280",marginBottom:24},children:"Configure seus objetivos para receber an\xe1lises personalizadas do Coach IA"}),(0,n.jsxs)("form",{onSubmit:f,children:[(0,n.jsxs)("div",{style:{background:"white",border:"2px solid #e5e7eb",borderRadius:16,padding:24,marginBottom:24},children:[(0,n.jsx)("h2",{style:{fontSize:20,fontWeight:700,marginBottom:16},children:"Objetivo Principal"}),(0,n.jsx)("label",{style:{display:"block",marginBottom:12,fontWeight:600},children:"O que voc\xea deseja? *"}),(0,n.jsxs)("select",{value:g.goal_type||"",onChange:e=>m("goal_type",e.target.value),required:!0,style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,marginBottom:16},children:[(0,n.jsx)("option",{value:"",children:"Selecione..."}),(0,n.jsx)("option",{value:"lose_weight",children:" Perder Peso (Emagrecimento)"}),(0,n.jsx)("option",{value:"gain_weight",children:" Ganhar Peso (Ganho de Massa)"}),(0,n.jsx)("option",{value:"maintain_weight",children:" Manter Peso (Manuten\xe7\xe3o)"})]}),g.goal_type&&"maintain_weight"!==g.goal_type&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Peso Alvo (kg)"}),(0,n.jsx)("input",{type:"number",step:"0.1",value:g.target_weight_kg||"",onChange:e=>{let t=parseFloat(e.target.value);m("target_weight_kg",isNaN(t)?void 0:t)},placeholder:"Ex: 75.0",style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,marginBottom:16}}),(0,n.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Meta Semanal (kg/semana)"}),(0,n.jsxs)("select",{value:g.weekly_goal_kg||"",onChange:e=>{let t=parseFloat(e.target.value);m("weekly_goal_kg",isNaN(t)?void 0:t)},style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8},children:[(0,n.jsx)("option",{value:"",children:"Selecione..."}),"lose_weight"===g.goal_type?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("option",{value:"-0.25",children:"-0.25 kg/semana (lento e sustent\xe1vel)"}),(0,n.jsx)("option",{value:"-0.5",children:"-0.5 kg/semana (recomendado)"}),(0,n.jsx)("option",{value:"-0.75",children:"-0.75 kg/semana (agressivo)"}),(0,n.jsx)("option",{value:"-1.0",children:"-1.0 kg/semana (muito agressivo)"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("option",{value:"0.25",children:"+0.25 kg/semana (lean bulk)"}),(0,n.jsx)("option",{value:"0.5",children:"+0.5 kg/semana (recomendado)"}),(0,n.jsx)("option",{value:"0.75",children:"+0.75 kg/semana (bulk)"}),(0,n.jsx)("option",{value:"1.0",children:"+1.0 kg/semana (dirty bulk)"})]})]})]})]}),(0,n.jsxs)("div",{style:{background:"white",border:"2px solid #e5e7eb",borderRadius:16,padding:24,marginBottom:24},children:[(0,n.jsx)("h2",{style:{fontSize:20,fontWeight:700,marginBottom:16},children:"Dados Pessoais"}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:16},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Altura (cm) *"}),(0,n.jsx)("input",{type:"number",value:g.height_cm||"",onChange:e=>{let t=parseInt(e.target.value);m("height_cm",isNaN(t)?void 0:t)},placeholder:"Ex: 175",required:!0,style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8}})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Idade (anos) *"}),(0,n.jsx)("input",{type:"number",value:g.age||"",onChange:e=>{let t=parseInt(e.target.value);m("age",isNaN(t)?void 0:t)},placeholder:"Ex: 30",required:!0,style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8}})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"G\xeanero *"}),(0,n.jsxs)("select",{value:g.gender||"",onChange:e=>m("gender",e.target.value),required:!0,style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8},children:[(0,n.jsx)("option",{value:"",children:"Selecione..."}),(0,n.jsx)("option",{value:"male",children:"Masculino"}),(0,n.jsx)("option",{value:"female",children:"Feminino"}),(0,n.jsx)("option",{value:"other",children:"Outro"})]})]})]}),(0,n.jsxs)("div",{style:{marginTop:16},children:[(0,n.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"N\xedvel de Atividade *"}),(0,n.jsxs)("select",{value:g.activity_level||"",onChange:e=>m("activity_level",e.target.value),required:!0,style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8},children:[(0,n.jsx)("option",{value:"",children:"Selecione..."}),(0,n.jsx)("option",{value:"sedentary",children:"Sedent\xe1rio (pouco ou nenhum exerc\xedcio)"}),(0,n.jsx)("option",{value:"light",children:"Leve (exerc\xedcio 1-3 dias/semana)"}),(0,n.jsx)("option",{value:"moderate",children:"Moderado (exerc\xedcio 3-5 dias/semana)"}),(0,n.jsx)("option",{value:"active",children:"Ativo (exerc\xedcio 6-7 dias/semana)"}),(0,n.jsx)("option",{value:"very_active",children:"Muito Ativo (exerc\xedcio 2x/dia ou trabalho f\xedsico)"})]})]})]}),d&&(0,n.jsx)("div",{style:{padding:16,background:"#fee2e2",border:"2px solid #ef4444",borderRadius:12,color:"#991b1b",marginBottom:16},children:d}),u&&(0,n.jsx)("div",{style:{padding:16,background:"#d1fae5",border:"2px solid #10b981",borderRadius:12,color:"#065f46",marginBottom:16},children:"Objetivos salvos com sucesso! Redirecionando..."}),(0,n.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,n.jsx)("button",{type:"button",onClick:()=>e.back(),style:{padding:"16px 24px",background:"#f3f4f6",color:"#374151",border:"none",borderRadius:12,fontSize:16,fontWeight:600,cursor:"pointer"},children:"Cancelar"}),(0,n.jsx)("button",{type:"submit",disabled:l,style:{flex:1,padding:"16px 24px",background:l?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:12,fontSize:16,fontWeight:600,cursor:l?"not-allowed":"pointer"},children:l?" Salvando...":" Salvar Objetivos"})]})]})]})}},45591:function(e,t,o){"use strict";o.d(t,{h:function(){return a},x:function(){return r}});var n=o(45800);let i=o(20357).env.NEXT_PUBLIC_API_URL||"https://app.foodtracker.com.br";async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:o,...r}=t,a={...r.headers};if(o)a.Authorization="Bearer ".concat(o);else{let e=localStorage.getItem("auth_token");console.log("[API Client] localStorage auth_token:",e?"exists":"null"),e&&(a.Authorization="Bearer ".concat(e))}r.body&&"string"==typeof r.body&&!a["Content-Type"]&&(a["Content-Type"]="application/json");let l=e.startsWith("http")?e:"".concat(i).concat(e);console.log("[API Client]",{isMobile:!0,baseUrl:i,endpoint:e,finalUrl:l,hasAuthToken:!!a.Authorization});try{let t=await fetch(l,{...r,headers:a,credentials:"include"});if(console.log("[API Client] Response ".concat(e,":"),{status:t.status}),401===t.status){console.warn("401 Unauthorized - triggering client logout");try{(0,n.h)()}catch(e){}}return t}catch(e){throw console.error("[API Client Error]",e),e}}let a={get:(e,t)=>r(e,{method:"GET",token:t}),post:(e,t,o)=>r(e,{method:"POST",body:JSON.stringify(t),token:o}),put:(e,t,o)=>r(e,{method:"PUT",body:JSON.stringify(t),token:o}),patch:(e,t,o)=>r(e,{method:"PATCH",body:JSON.stringify(t),token:o}),delete:(e,t)=>r(e,{method:"DELETE",token:t})}},45800:function(e,t,o){"use strict";function n(){try{try{localStorage.removeItem("auth_token")}catch(e){}try{localStorage.setItem("auth_logout_at",String(Date.now()))}catch(e){}try{window.dispatchEvent(new Event("app:logout"))}catch(e){}}catch(e){}}o.d(t,{h:function(){return n}})},16463:function(e,t,o){"use strict";var n=o(71169);o.o(n,"usePathname")&&o.d(t,{usePathname:function(){return n.usePathname}}),o.o(n,"useRouter")&&o.d(t,{useRouter:function(){return n.useRouter}}),o.o(n,"useSearchParams")&&o.d(t,{useSearchParams:function(){return n.useSearchParams}})},20357:function(e,t,o){"use strict";var n,i;e.exports=(null==(n=o.g.process)?void 0:n.env)&&"object"==typeof(null==(i=o.g.process)?void 0:i.env)?o.g.process:o(88081)},88081:function(e){!function(){var t={229:function(e){var t,o,n,i=e.exports={};function r(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(o){try{return t.call(null,e,0)}catch(o){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var s=[],d=!1,c=-1;function u(){d&&n&&(d=!1,n.length?s=n.concat(s):c=-1,s.length&&h())}function h(){if(!d){var e=l(u);d=!0;for(var t=s.length;t;){for(n=s,s=[];++c<t;)n&&n[c].run();c=-1,t=s.length}n=null,d=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];s.push(new g(e,t)),1!==s.length||d||l(h)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},o={};function n(e){var i=o[e];if(void 0!==i)return i.exports;var r=o[e]={exports:{}},a=!0;try{t[e](r,r.exports,n),a=!1}finally{a&&delete o[e]}return r.exports}n.ab="//";var i=n(229);e.exports=i}()}},function(e){e.O(0,[971,23,744],function(){return e(e.s=3564)}),_N_E=e.O()}]);