(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[205],{3790:function(e,t,i){Promise.resolve().then(i.bind(i,9270))},9270:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return d}});var o=i(7437),n=i(2265),r=i(6463),a=i(5591);function d(){let e=(0,r.useRouter)(),[t,i]=(0,n.useState)([]),[d,l]=(0,n.useState)(null),[s,c]=(0,n.useState)([]),[u,p]=(0,n.useState)(!0),[h,g]=(0,n.useState)(null),[x,f]=(0,n.useState)(!1),[b,y]=(0,n.useState)(!1),[m,j]=(0,n.useState)(""),[v,S]=(0,n.useState)(""),[k,w]=(0,n.useState)("1"),[z,C]=(0,n.useState)(""),[R,W]=(0,n.useState)([]),[B,_]=(0,n.useState)(!1),[E,I]=(0,n.useState)(!1),[L,F]=(0,n.useState)(!1),[N,T]=(0,n.useState)(null),[A,D]=(0,n.useState)(""),[P,M]=(0,n.useState)([]),[V,q]=(0,n.useState)(!1),[U,O]=(0,n.useState)(""),[$,H]=(0,n.useState)(!1),[Q,J]=(0,n.useState)(""),[G,X]=(0,n.useState)(!1),[Y,K]=(0,n.useState)(!1),[Z,ee]=(0,n.useState)(!1),[et,ei]=(0,n.useState)(""),[eo,en]=(0,n.useState)(1),[er,ea]=(0,n.useState)(""),[ed,el]=(0,n.useState)(!1),[es,ec]=(0,n.useState)(!1),[eu,ep]=(0,n.useState)(null),[eh,eg]=(0,n.useState)(""),[ex,ef]=(0,n.useState)(""),[eb,ey]=(0,n.useState)(!1),[em,ej]=(0,n.useState)(""),[ev,eS]=(0,n.useState)(!1),[ek,ew]=(0,n.useState)(null),[ez,eC]=(0,n.useState)(""),[eR,eW]=(0,n.useState)(""),[eB,e_]=(0,n.useState)(""),[eE,eI]=(0,n.useState)(""),[eL,eF]=(0,n.useState)("");async function eN(){try{let e=await a.h.get("/api/stores"),t=await e.json();e.ok&&M(t.stores||[])}catch(e){console.error("Erro ao buscar lojas:",e)}}async function eT(){try{p(!0);let e=await a.h.get("/api/shopping-lists"),t=await e.json();e.ok&&i(t.lists||[])}catch(e){console.error("Erro ao buscar listas:",e)}finally{p(!1)}}async function eA(e){try{let t=await a.h.get("/api/shopping-lists/".concat(e)),i=await t.json();t.ok&&(l(i.list),c(i.items||[]))}catch(e){console.error("Erro ao buscar detalhes:",e)}}async function eD(e){if(e.preventDefault(),m.trim())try{let e=await a.h.post("/api/shopping-lists",{name:m}),t=await e.json();e.ok?(f(!1),j(""),await eT(),t.list&&eA(t.list.id)):g(t.error||"Erro ao criar lista")}catch(e){g(e.message)}}async function eP(e){if(e.preventDefault(),d&&v.trim())try{(await a.h.post("/api/shopping-lists/items",{list_id:d.id,name:v,quantity:parseFloat(k)||1,unit:z||void 0})).ok&&(y(!1),S(""),w("1"),C(""),await eA(d.id))}catch(e){console.error("Erro ao adicionar item:",e)}}async function eM(e){try{let t=!e.is_purchased,i={is_purchased:t};t||(i.price=null,i.unitPrice=null),await a.h.patch("/api/shopping-lists/items?id=".concat(e.id),i),d&&await eA(d.id)}catch(e){console.error("Erro ao atualizar item:",e)}}async function eV(e,t){try{await a.h.patch("/api/shopping-lists/items?id=".concat(e),{price:t}),d&&await eA(d.id)}catch(e){console.error("Erro ao atualizar pre\xe7o:",e)}}async function eq(e,t){try{await a.h.patch("/api/shopping-lists/items?id=".concat(e),t),d&&await eA(d.id)}catch(e){console.error("Erro ao atualizar item:",e)}}async function eU(e,t,i){let o={},n=t=>(function(e,t){let i=(t||"un").toLowerCase();return"g"===i||"ml"===i?e/1e3:e})(t,e.unit);if("quantity"===t){o.quantity=i;let t=n(i);e.unit_price?o.price=Number((t*e.unit_price).toFixed(2)):e.price&&t>0&&(o.unit_price=Number((e.price/t).toFixed(2)))}else if("unit_price"===t){o.unit_price=i;let t=n(e.quantity);t>0&&(o.price=Number((t*i).toFixed(2)))}else if("price"===t){o.price=i;let t=n(e.quantity);t>0&&(o.unit_price=Number((i/t).toFixed(2)))}c(t=>t.map(t=>t.id===e.id?{...t,...o}:t));try{let t={...o};void 0!==o.unit_price&&(t.unitPrice=o.unit_price,delete t.unit_price),await a.h.patch("/api/shopping-lists/items?id=".concat(e.id),t)}catch(e){console.error("Erro ao atualizar item:",e),await eA(d.id)}}async function eO(e){if(confirm("Remover este item?"))try{await a.h.delete("/api/shopping-lists/items?id=".concat(e)),d&&await eA(d.id)}catch(e){console.error("Erro ao remover item:",e)}}function e$(e){ew(e),eC(e.name),eW(String(e.quantity)),e_(e.unit||""),eI(e.unit_price?String(e.unit_price):""),eF(e.price?String(e.price):""),eS(!0)}async function eH(){if(ek&&ez.trim())try{let e={name:ez.trim(),quantity:parseFloat(eR)||1,unit:eB||null};eE&&(e.unitPrice=parseFloat(eE)),eL&&(e.price=parseFloat(eL)),await a.h.patch("/api/shopping-lists/items?id=".concat(ek.id),e),eS(!1),ew(null),d&&await eA(d.id)}catch(e){console.error("Erro ao salvar item:",e)}}async function eQ(e){if(confirm("Excluir esta lista?"))try{await a.h.delete("/api/shopping-lists/".concat(e)),l(null),c([]),X(!1),K(!1),await eT()}catch(e){console.error("Erro ao excluir lista:",e)}}async function eJ(){if(!d)return;let e=e5.length>0;if(1===eo&&e){let e=new Date().toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"});ea("Pendentes ".concat(d.name," - ").concat(e)),en(2);return}try{let t=U||null;if($&&Q.trim()){let e=await a.h.post("/api/stores",{name:Q.trim()}),i=await e.json();e.ok&&i.store&&(t=i.store.id,await eN())}let i=await a.h.post("/api/shopping-lists/complete",{list_id:d.id,store_id:t,new_list_name:e?er:void 0}),o=await i.json();if(!i.ok)throw Error(o.error||"Erro ao finalizar lista");q(!1),l(null),c([]),await eT(),o.new_list&&eA(o.new_list.id)}catch(e){console.error("Erro ao finalizar lista:",e)}}function eG(e){X(!0),K(!1),ei(e.store_id||""),eA(e.id)}async function eX(){if(d)try{await a.h.patch("/api/shopping-lists/".concat(d.id),{store_id:et||null}),K(!1),await eT(),await eA(d.id)}catch(e){console.error("Erro ao salvar edicoes:",e)}}async function eY(){try{I(!0);let e=await a.h.get("/api/shopping-lists/suggestions"),t=await e.json();e.ok&&(W(t.suggestions||[]),_(!0))}catch(e){console.error("Erro ao buscar sugest\xf5es:",e)}finally{I(!1)}}async function eK(e){if(d)try{await a.h.post("/api/shopping-lists/items",{list_id:d.id,name:e.food_name.charAt(0).toUpperCase()+e.food_name.slice(1),quantity:Math.round(e.avg_quantity)||1,unit:e.common_unit||void 0}),W(t=>t.filter(t=>t.food_name!==e.food_name)),await eA(d.id)}catch(e){console.error("Erro ao adicionar sugest\xe3o:",e)}}function eZ(e){T(e),D("C\xf3pia de ".concat(e.name)),F(!0)}async function e0(e){if(e.preventDefault(),N&&A.trim())try{let e=await a.h.post("/api/shopping-lists/duplicate",{source_list_id:N.id,name:A}),t=await e.json();e.ok?(F(!1),T(null),D(""),await eT(),t.list&&eA(t.list.id)):g(t.error||"Erro ao duplicar lista")}catch(e){g(e.message)}}function e1(e){return new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}async function e2(e){var t,i;e.preventDefault();let o=e.target.querySelector('input[type="file"]'),n=null==o?void 0:null===(t=o.files)||void 0===t?void 0:t[0];if(!n){ep("Selecione uma imagem da nota fiscal");return}ec(!0),ep(null);try{let e=ex||null;if(eb&&em.trim()){let t=await a.h.post("/api/stores",{name:em.trim()}),i=await t.json();t.ok&&i.store&&(e=i.store.id,await eN())}let t=new FormData;t.append("image",n),t.append("name",eh||"Compras ".concat(new Date().toLocaleDateString("pt-BR"))),e&&t.append("store_id",e);let o=await fetch("/api/shopping-lists/scan-receipt",{method:"POST",body:t}),r=await o.json();if(!o.ok)throw Error(r.error||"Erro ao analisar nota");el(!1),await eT(),(null===(i=r.list)||void 0===i?void 0:i.id)&&eG({id:r.list.id,name:r.list.name})}catch(e){ep(e.message||"Erro ao processar nota fiscal")}finally{ec(!1)}}(0,n.useEffect)(()=>{eT(),eN()},[]);let e6=t.filter(e=>"active"===e.status),e4=t.filter(e=>"completed"===e.status),e8=Z?e4:e4.slice(0,5),e5=s.filter(e=>!e.is_purchased),e3=s.filter(e=>e.is_purchased),e7=e3.reduce((e,t)=>e+(Number(t.price)||0),0);function e9(e){return e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}return d&&G?(0,o.jsxs)("div",{style:{maxWidth:800,margin:"0 auto",padding:24},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:24},children:[(0,o.jsx)("button",{onClick:function(){l(null),c([]),X(!1),K(!1)},style:{padding:"8px 16px",background:"#f3f4f6",border:"none",borderRadius:8,cursor:"pointer",fontSize:14,fontWeight:600},children:"Voltar"}),(0,o.jsx)("h1",{style:{fontSize:24,fontWeight:700,flex:1},children:d.name}),(0,o.jsx)("button",{onClick:()=>eQ(d.id),style:{padding:"8px 10px",background:"#fee2e2",border:"1px solid #fca5a5",borderRadius:8,cursor:"pointer",color:"#dc2626",display:"flex",alignItems:"center",justifyContent:"center"},title:"Excluir lista",children:(0,o.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,o.jsx)("path",{d:"M3 6h18M8 6V4a2 2 0 012-2h4a2 2 0 012 2v2m3 0v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6h14M10 11v6M14 11v6"})})})]}),(0,o.jsxs)("div",{style:{padding:16,background:"#f0fdf4",borderRadius:12,marginBottom:24},children:[(0,o.jsxs)("div",{style:{fontSize:14,color:"#166534",marginBottom:8},children:["Finalizada em ",e1(d.completed_at||d.updated_at)]}),Y?(0,o.jsxs)("div",{style:{marginTop:12},children:[(0,o.jsx)("label",{style:{display:"block",fontSize:14,fontWeight:600,marginBottom:8},children:"Loja"}),(0,o.jsxs)("select",{value:et,onChange:e=>ei(e.target.value),style:{width:"100%",padding:10,fontSize:14,border:"2px solid #e5e7eb",borderRadius:8,background:"white",boxSizing:"border-box"},children:[(0,o.jsx)("option",{value:"",children:"Sem loja"}),P.map(e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id))]})]}):d.store_name&&(0,o.jsxs)("div",{style:{fontSize:14,color:"#166534"},children:["Loja: ",(0,o.jsx)("strong",{children:d.store_name})]})]}),(0,o.jsx)("div",{style:{display:"flex",gap:12,marginBottom:24},children:Y?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:eX,style:{padding:"12px 24px",background:"#10b981",color:"white",border:"none",borderRadius:8,cursor:"pointer",fontSize:14,fontWeight:600},children:"Salvar"}),(0,o.jsx)("button",{onClick:()=>K(!1),style:{padding:"12px 24px",background:"#f3f4f6",border:"none",borderRadius:8,cursor:"pointer",fontSize:14,fontWeight:600},children:"Cancelar"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:function(){K(!0)},style:{padding:"12px 24px",background:"#f59e0b",color:"white",border:"none",borderRadius:8,cursor:"pointer",fontSize:14,fontWeight:600},children:"Editar"}),(0,o.jsx)("button",{onClick:()=>eZ(d),style:{padding:"12px 24px",background:"#2196F3",color:"white",border:"none",borderRadius:8,cursor:"pointer",fontSize:14,fontWeight:600},children:"Duplicar"})]})}),(0,o.jsxs)("div",{style:{marginBottom:24},children:[(0,o.jsxs)("h2",{style:{fontSize:16,fontWeight:600,color:"#6b7280",marginBottom:12},children:["ITENS (",s.length,")"]}),(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:s.map(e=>(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,padding:12,background:"#f0fdf4",borderRadius:12},children:[(0,o.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,o.jsx)("div",{style:{fontWeight:600,fontSize:15,color:"#374151"},children:e.name}),(0,o.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:8,marginTop:6},children:[(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[(0,o.jsx)("label",{style:{fontSize:10,color:"#9ca3af"},children:"Qtd"}),(0,o.jsx)("div",{style:{width:60,padding:"6px",fontSize:13,background:"white",border:"1px solid #d1d5db",borderRadius:6,textAlign:"center"},children:e.quantity})]}),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[(0,o.jsx)("label",{style:{fontSize:10,color:"#9ca3af"},children:"Unid"}),(0,o.jsx)("div",{style:{width:50,padding:"6px",fontSize:13,background:"white",border:"1px solid #d1d5db",borderRadius:6,textAlign:"center"},children:e.unit||"un"})]}),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[(0,o.jsx)("label",{style:{fontSize:10,color:"#9ca3af"},children:"R$ Unit."}),Y?(0,o.jsx)("input",{type:"number",step:"0.01",min:"0",placeholder:"0,00",defaultValue:e.unit_price?Number(e.unit_price).toFixed(2):"",onBlur:t=>{let i=t.target.value?parseFloat(t.target.value):null;eq(e.id,{unitPrice:i})},style:{width:70,padding:"6px",fontSize:13,border:"1px solid #d1d5db",borderRadius:6,textAlign:"right"}}):(0,o.jsx)("div",{style:{width:70,padding:"6px",fontSize:13,background:"white",border:"1px solid #d1d5db",borderRadius:6,textAlign:"right"},children:e.unit_price?Number(e.unit_price).toFixed(2):"-"})]}),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[(0,o.jsx)("label",{style:{fontSize:10,color:"#166534",fontWeight:600},children:"R$ Total"}),Y?(0,o.jsx)("input",{type:"number",step:"0.01",min:"0",placeholder:"0,00",defaultValue:e.price?Number(e.price).toFixed(2):"",onBlur:t=>{let i=t.target.value?parseFloat(t.target.value):null;i!==e.price&&eV(e.id,i)},style:{width:80,padding:"6px",fontSize:13,border:"1px solid #10b981",borderRadius:6,textAlign:"right",fontWeight:600,color:"#166534"}}):(0,o.jsx)("div",{style:{width:80,padding:"6px",fontSize:13,background:"white",border:"1px solid #10b981",borderRadius:6,textAlign:"right",fontWeight:600,color:"#166534"},children:e.price?Number(e.price).toFixed(2):"-"})]})]})]}),(0,o.jsx)("button",{onClick:()=>e$(e),style:{padding:"6px 10px",background:"#dbeafe",border:"1px solid #93c5fd",borderRadius:6,cursor:"pointer",color:"#1e40af",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},title:"Editar item",children:(0,o.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("path",{d:"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"}),(0,o.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"})]})})]},e.id))})]}),e7>0&&(0,o.jsxs)("div",{style:{padding:16,background:"#dcfce7",borderRadius:12,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsx)("span",{style:{fontWeight:600,color:"#166534",fontSize:18},children:"Total"}),(0,o.jsx)("span",{style:{fontWeight:700,fontSize:24,color:"#166534"},children:e9(e7)})]}),L&&N&&(0,o.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:24,zIndex:1e3},children:(0,o.jsxs)("div",{style:{background:"white",borderRadius:16,padding:24,width:"100%",maxWidth:400},children:[(0,o.jsx)("h2",{style:{fontSize:20,fontWeight:700,marginBottom:16},children:"Duplicar Lista"}),(0,o.jsxs)("p",{style:{fontSize:14,color:"#6b7280",marginBottom:16},children:["Duplicando: ",(0,o.jsx)("strong",{children:N.name})]}),(0,o.jsxs)("form",{onSubmit:e0,children:[(0,o.jsxs)("div",{style:{marginBottom:16},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Nome da nova lista *"}),(0,o.jsx)("input",{type:"text",value:A,onChange:e=>D(e.target.value),placeholder:"Ex: Compras da semana",required:!0,style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,boxSizing:"border-box"}})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,o.jsx)("button",{type:"button",onClick:()=>{F(!1),T(null)},style:{flex:1,padding:12,background:"#f3f4f6",border:"none",borderRadius:8,cursor:"pointer",fontSize:16,fontWeight:600},children:"Cancelar"}),(0,o.jsx)("button",{type:"submit",style:{flex:1,padding:12,background:"#2196F3",color:"white",border:"none",borderRadius:8,cursor:"pointer",fontSize:16,fontWeight:600},children:"Duplicar"})]})]})]})}),ev&&ek&&(0,o.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:24,zIndex:1e3},children:(0,o.jsxs)("div",{style:{background:"white",borderRadius:16,padding:24,width:"100%",maxWidth:400},children:[(0,o.jsx)("h2",{style:{fontSize:20,fontWeight:700,marginBottom:16},children:"Editar Item"}),(0,o.jsxs)("div",{style:{marginBottom:16},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Nome do item *"}),(0,o.jsx)("input",{type:"text",value:ez,onChange:e=>eC(e.target.value),placeholder:"Ex: Arroz integral",style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,boxSizing:"border-box"}})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:12,marginBottom:16},children:[(0,o.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Quantidade"}),(0,o.jsx)("input",{type:"number",step:"0.001",value:eR,onChange:e=>eW(e.target.value),style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,boxSizing:"border-box"}})]}),(0,o.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Unidade"}),(0,o.jsx)("input",{type:"text",value:eB,onChange:e=>e_(e.target.value),placeholder:"kg, g, un, L...",style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,boxSizing:"border-box"}})]})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:12,marginBottom:16},children:[(0,o.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"R$ Unit\xe1rio"}),(0,o.jsx)("input",{type:"number",step:"0.01",value:eE,onChange:e=>eI(e.target.value),placeholder:"0,00",style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,boxSizing:"border-box"}})]}),(0,o.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"R$ Total"}),(0,o.jsx)("input",{type:"number",step:"0.01",value:eL,onChange:e=>eF(e.target.value),placeholder:"0,00",style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,boxSizing:"border-box"}})]})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,o.jsx)("button",{type:"button",onClick:()=>{eS(!1),ew(null)},style:{flex:1,padding:12,background:"#f3f4f6",border:"none",borderRadius:8,cursor:"pointer",fontSize:16,fontWeight:600},children:"Cancelar"}),(0,o.jsx)("button",{type:"button",onClick:eH,style:{flex:1,padding:12,background:"#10b981",color:"white",border:"none",borderRadius:8,cursor:"pointer",fontSize:16,fontWeight:600},children:"Salvar"})]})]})})]}):d?(0,o.jsxs)("div",{style:{maxWidth:800,margin:"0 auto",padding:24},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:24},children:[(0,o.jsx)("button",{onClick:()=>{l(null),c([])},style:{padding:"8px 16px",background:"#f3f4f6",border:"none",borderRadius:8,cursor:"pointer",fontSize:14,fontWeight:600},children:"Voltar"}),(0,o.jsx)("h1",{style:{fontSize:24,fontWeight:700,flex:1},children:d.name}),(0,o.jsx)("button",{onClick:()=>eQ(d.id),style:{padding:"8px 10px",background:"#fee2e2",border:"1px solid #fca5a5",borderRadius:8,cursor:"pointer",color:"#dc2626",display:"flex",alignItems:"center",justifyContent:"center"},title:"Excluir lista",children:(0,o.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,o.jsx)("path",{d:"M3 6h18M8 6V4a2 2 0 012-2h4a2 2 0 012 2v2m3 0v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6h14M10 11v6M14 11v6"})})})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:12,marginBottom:24},children:[(0,o.jsx)("button",{onClick:()=>y(!0),style:{padding:"12px 24px",background:"#2196F3",color:"white",border:"none",borderRadius:8,cursor:"pointer",fontSize:14,fontWeight:600},children:"+ Adicionar Item"}),(0,o.jsx)("button",{onClick:eY,disabled:E,style:{padding:"12px 24px",background:"#f59e0b",color:"white",border:"none",borderRadius:8,cursor:E?"not-allowed":"pointer",fontSize:14,fontWeight:600,opacity:E?.7:1},children:E?"Carregando...":"Sugestoes"})]}),(0,o.jsxs)("div",{style:{marginBottom:24},children:[(0,o.jsxs)("h2",{style:{fontSize:16,fontWeight:600,color:"#6b7280",marginBottom:12},children:["PENDENTES (",e5.length,")"]}),0===e5.length?(0,o.jsx)("div",{style:{padding:24,textAlign:"center",color:"#9ca3af",border:"2px dashed #e5e7eb",borderRadius:12},children:"Nenhum item pendente"}):(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:e5.map(e=>(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,padding:16,background:"white",boxShadow:"0 1px 2px rgba(0,0,0,0.05)",borderRadius:12},children:[(0,o.jsx)("input",{type:"checkbox",checked:!1,onChange:()=>eM(e),style:{width:24,height:24,cursor:"pointer"}}),(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsx)("div",{style:{fontWeight:600},children:e.name}),(0,o.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:[e.quantity," ",e.unit||"un"]})]}),(0,o.jsx)("button",{onClick:()=>e$(e),style:{padding:"6px 10px",background:"#dbeafe",border:"1px solid #93c5fd",borderRadius:6,cursor:"pointer",color:"#1e40af",display:"flex",alignItems:"center",justifyContent:"center"},title:"Editar item",children:(0,o.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("path",{d:"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"}),(0,o.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),(0,o.jsx)("button",{onClick:()=>eO(e.id),style:{padding:"6px 10px",background:"#fee2e2",border:"1px solid #fca5a5",borderRadius:6,cursor:"pointer",color:"#dc2626",display:"flex",alignItems:"center",justifyContent:"center"},title:"Remover item",children:(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,o.jsx)("path",{d:"M3 6h18M8 6V4a2 2 0 012-2h4a2 2 0 012 2v2m3 0v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6h14M10 11v6M14 11v6"})})})]},e.id))})]}),B&&R.length>0&&(0,o.jsxs)("div",{style:{marginBottom:24},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[(0,o.jsxs)("h2",{style:{fontSize:16,fontWeight:600,color:"#f59e0b"},children:["SUGESTOES (",R.length,")"]}),(0,o.jsx)("button",{onClick:()=>_(!1),style:{padding:"4px 8px",background:"transparent",border:"none",cursor:"pointer",fontSize:12,color:"#6b7280"},children:"Fechar"})]}),(0,o.jsx)("div",{style:{fontSize:12,color:"#6b7280",marginBottom:12},children:"Baseado no seu consumo dos ultimos 30 dias"}),(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:R.map(e=>(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,padding:16,background:"#fffbeb",border:"2px solid #fcd34d",borderRadius:12},children:[(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsx)("div",{style:{fontWeight:600,textTransform:"capitalize"},children:e.food_name}),(0,o.jsxs)("div",{style:{fontSize:12,color:"#6b7280"},children:["Consumido ",e.consumption_count,"x em ",e.days_consumed," dias"]})]}),(0,o.jsx)("button",{onClick:()=>eK(e),style:{padding:"8px 16px",background:"#10b981",color:"white",border:"none",borderRadius:6,cursor:"pointer",fontSize:12,fontWeight:600},children:"Adicionar"}),(0,o.jsx)("button",{onClick:()=>{W(t=>t.filter(t=>t.food_name!==e.food_name))},style:{padding:"8px 12px",background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:6,cursor:"pointer",fontSize:14,color:"#6b7280"},children:"X"})]},e.food_name))})]}),e3.length>0&&(0,o.jsxs)("div",{style:{marginBottom:24},children:[(0,o.jsxs)("h2",{style:{fontSize:16,fontWeight:600,color:"#6b7280",marginBottom:12},children:["COMPRADOS (",e3.length,")"]}),(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:e3.map(e=>(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,padding:12,background:"#f0fdf4",borderRadius:12},children:[(0,o.jsx)("input",{type:"checkbox",checked:!0,onChange:()=>eM(e),style:{width:22,height:22,cursor:"pointer",flexShrink:0}}),(0,o.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,o.jsx)("div",{style:{fontWeight:600,fontSize:15,textDecoration:"line-through",color:"#6b7280"},children:e.name}),(0,o.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:8,marginTop:6},children:[(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[(0,o.jsx)("label",{style:{fontSize:10,color:"#9ca3af"},children:"Qtd"}),(0,o.jsx)("input",{type:"number",step:"0.001",min:"0.001",className:"no-spinner",defaultValue:e.quantity,onFocus:e=>e.target.select(),onBlur:t=>{let i=parseFloat(t.target.value);i&&i!==Number(e.quantity)&&eU(e,"quantity",i)},style:{width:60,padding:"6px",fontSize:13,border:"1px solid #d1d5db",borderRadius:6,textAlign:"center"}})]}),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[(0,o.jsx)("label",{style:{fontSize:10,color:"#9ca3af"},children:"Unid"}),(0,o.jsx)("input",{type:"text",defaultValue:e.unit||"un",onBlur:t=>{let i=t.target.value.trim();i&&i!==e.unit&&eq(e.id,{unit:i})},style:{width:50,padding:"6px",fontSize:13,border:"1px solid #d1d5db",borderRadius:6,textAlign:"center"}})]}),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[(0,o.jsx)("label",{style:{fontSize:10,color:"#9ca3af"},children:"R$ Unit."}),(0,o.jsx)("input",{type:"number",step:"0.01",min:"0",placeholder:"0,00",className:"no-spinner",defaultValue:e.unit_price?Number(e.unit_price).toFixed(2):"",onFocus:e=>e.target.select(),onBlur:t=>{let i=t.target.value?parseFloat(t.target.value):0;i!==Number(e.unit_price)&&eU(e,"unit_price",i)},style:{width:70,padding:"6px",fontSize:13,border:"1px solid #d1d5db",borderRadius:6,textAlign:"right",background:"#f9fafb"}},"unit-".concat(e.id,"-").concat(e.unit_price))]}),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[(0,o.jsx)("label",{style:{fontSize:10,color:"#166534",fontWeight:600},children:"R$ Total"}),(0,o.jsx)("input",{type:"number",step:"0.01",min:"0",placeholder:"0,00",className:"no-spinner",defaultValue:e.price?Number(e.price).toFixed(2):"",onFocus:e=>e.target.select(),onBlur:t=>{let i=t.target.value?parseFloat(t.target.value):0;i!==Number(e.price)&&eU(e,"price",i)},style:{width:80,padding:"6px",fontSize:13,border:"1px solid #10b981",borderRadius:6,textAlign:"right",fontWeight:600,color:"#166534"}},"total-".concat(e.id,"-").concat(e.price))]})]})]}),(0,o.jsx)("div",{style:{display:"none"}})]},e.id))}),e7>0&&(0,o.jsxs)("div",{style:{marginTop:12,padding:12,background:"#dcfce7",borderRadius:8,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsx)("span",{style:{fontWeight:600,color:"#166534"},children:"Total"}),(0,o.jsx)("span",{style:{fontWeight:700,fontSize:18,color:"#166534"},children:e9(e7)})]})]}),e3.length>0&&(0,o.jsxs)("button",{onClick:function(){O(""),H(!1),J(""),en(1),ea(""),q(!0)},style:{width:"100%",padding:16,background:"#10b981",color:"white",border:"none",borderRadius:12,fontSize:16,fontWeight:600,cursor:"pointer"},children:["Finalizar Lista",e5.length>0&&(0,o.jsxs)("span",{style:{fontSize:13,fontWeight:400,marginLeft:8},children:["(",e5.length," pendente",e5.length>1?"s":"",")"]})]}),V&&(0,o.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:24,zIndex:1e3},children:(0,o.jsx)("div",{style:{background:"white",borderRadius:16,padding:24,width:"100%",maxWidth:400},children:1===eo?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h2",{style:{fontSize:20,fontWeight:700,marginBottom:16},children:"Finalizar Lista"}),e5.length>0&&(0,o.jsxs)("div",{style:{padding:12,background:"#fef3c7",borderRadius:8,marginBottom:16,fontSize:14,color:"#92400e"},children:[e5.length," item(ns) ainda nao comprado(s). Serao transferidos para uma nova lista."]}),(0,o.jsx)("p",{style:{fontSize:14,color:"#6b7280",marginBottom:16},children:"Onde voce fez as compras?"}),$?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",{type:"text",value:Q,onChange:e=>J(e.target.value),placeholder:"Nome da loja (ex: Carrefour Centro)",style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,marginBottom:12,boxSizing:"border-box"}}),(0,o.jsx)("button",{type:"button",onClick:()=>{H(!1),J("")},style:{width:"100%",padding:10,background:"#f3f4f6",border:"none",borderRadius:8,cursor:"pointer",fontSize:14,color:"#6b7280",marginBottom:16},children:"Voltar para lista de lojas"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("select",{value:U,onChange:e=>O(e.target.value),style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,marginBottom:12,boxSizing:"border-box",background:"white"},children:[(0,o.jsx)("option",{value:"",children:"Selecione uma loja (opcional)"}),P.map(e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,o.jsx)("button",{type:"button",onClick:()=>H(!0),style:{width:"100%",padding:10,background:"#f3f4f6",border:"1px dashed #d1d5db",borderRadius:8,cursor:"pointer",fontSize:14,color:"#6b7280",marginBottom:16},children:"+ Adicionar nova loja"})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,o.jsx)("button",{type:"button",onClick:()=>q(!1),style:{flex:1,padding:12,background:"#f3f4f6",border:"none",borderRadius:8,cursor:"pointer",fontSize:16,fontWeight:600},children:"Cancelar"}),(0,o.jsx)("button",{type:"button",onClick:eJ,style:{flex:1,padding:12,background:"#10b981",color:"white",border:"none",borderRadius:8,cursor:"pointer",fontSize:16,fontWeight:600},children:e5.length>0?"Proximo":"Finalizar"})]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h2",{style:{fontSize:20,fontWeight:700,marginBottom:16},children:"Itens Pendentes"}),(0,o.jsx)("p",{style:{fontSize:14,color:"#6b7280",marginBottom:8},children:"Os seguintes itens nao foram comprados:"}),(0,o.jsx)("div",{style:{maxHeight:150,overflowY:"auto",padding:12,background:"#f9fafb",borderRadius:8,marginBottom:16},children:e5.map(e=>(0,o.jsxs)("div",{style:{fontSize:14,color:"#374151",marginBottom:4},children:["â€¢ ",e.name," (",e.quantity," ",e.unit||"un",")"]},e.id))}),(0,o.jsx)("p",{style:{fontSize:14,color:"#6b7280",marginBottom:8},children:"Qual nome dar para a nova lista com esses itens?"}),(0,o.jsx)("input",{type:"text",value:er,onChange:e=>ea(e.target.value),placeholder:"Nome da nova lista",style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,marginBottom:16,boxSizing:"border-box"}}),(0,o.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,o.jsx)("button",{type:"button",onClick:()=>en(1),style:{flex:1,padding:12,background:"#f3f4f6",border:"none",borderRadius:8,cursor:"pointer",fontSize:16,fontWeight:600},children:"Voltar"}),(0,o.jsx)("button",{type:"button",onClick:eJ,disabled:!er.trim(),style:{flex:1,padding:12,background:er.trim()?"#10b981":"#9ca3af",color:"white",border:"none",borderRadius:8,cursor:er.trim()?"pointer":"not-allowed",fontSize:16,fontWeight:600},children:"Finalizar"})]})]})})}),b&&(0,o.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:24,zIndex:1e3},children:(0,o.jsxs)("div",{style:{background:"white",borderRadius:16,padding:24,width:"100%",maxWidth:400},children:[(0,o.jsx)("h2",{style:{fontSize:20,fontWeight:700,marginBottom:16},children:"Adicionar Item"}),(0,o.jsxs)("form",{onSubmit:eP,children:[(0,o.jsxs)("div",{style:{marginBottom:16},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Nome do item *"}),(0,o.jsx)("input",{type:"text",value:v,onChange:e=>S(e.target.value),placeholder:"Ex: Arroz integral",required:!0,style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,boxSizing:"border-box"}})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:12,marginBottom:16},children:[(0,o.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Quantidade"}),(0,o.jsx)("input",{type:"number",step:"0.1",value:k,onChange:e=>w(e.target.value),style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,boxSizing:"border-box"}})]}),(0,o.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Unidade"}),(0,o.jsx)("input",{type:"text",value:z,onChange:e=>C(e.target.value),placeholder:"kg, un, L...",style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,boxSizing:"border-box"}})]})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,o.jsx)("button",{type:"button",onClick:()=>y(!1),style:{flex:1,padding:12,background:"#f3f4f6",border:"none",borderRadius:8,cursor:"pointer",fontSize:16,fontWeight:600},children:"Cancelar"}),(0,o.jsx)("button",{type:"submit",style:{flex:1,padding:12,background:"#2196F3",color:"white",border:"none",borderRadius:8,cursor:"pointer",fontSize:16,fontWeight:600},children:"Adicionar"})]})]})]})}),ev&&ek&&(0,o.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:24,zIndex:1e3},children:(0,o.jsxs)("div",{style:{background:"white",borderRadius:16,padding:24,width:"100%",maxWidth:400},children:[(0,o.jsx)("h2",{style:{fontSize:20,fontWeight:700,marginBottom:16},children:"Editar Item"}),(0,o.jsxs)("div",{style:{marginBottom:16},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Nome do item *"}),(0,o.jsx)("input",{type:"text",value:ez,onChange:e=>eC(e.target.value),placeholder:"Ex: Arroz integral",style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,boxSizing:"border-box"}})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:12,marginBottom:16},children:[(0,o.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Quantidade"}),(0,o.jsx)("input",{type:"number",step:"0.001",value:eR,onChange:e=>eW(e.target.value),style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,boxSizing:"border-box"}})]}),(0,o.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Unidade"}),(0,o.jsx)("input",{type:"text",value:eB,onChange:e=>e_(e.target.value),placeholder:"kg, g, un, L...",style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,boxSizing:"border-box"}})]})]}),ek.is_purchased&&(0,o.jsxs)("div",{style:{display:"flex",gap:12,marginBottom:16},children:[(0,o.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"R$ Unit\xe1rio"}),(0,o.jsx)("input",{type:"number",step:"0.01",value:eE,onChange:e=>eI(e.target.value),placeholder:"0,00",style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,boxSizing:"border-box"}})]}),(0,o.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"R$ Total"}),(0,o.jsx)("input",{type:"number",step:"0.01",value:eL,onChange:e=>eF(e.target.value),placeholder:"0,00",style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,boxSizing:"border-box"}})]})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,o.jsx)("button",{type:"button",onClick:()=>{eS(!1),ew(null)},style:{flex:1,padding:12,background:"#f3f4f6",border:"none",borderRadius:8,cursor:"pointer",fontSize:16,fontWeight:600},children:"Cancelar"}),(0,o.jsx)("button",{type:"button",onClick:eH,style:{flex:1,padding:12,background:"#10b981",color:"white",border:"none",borderRadius:8,cursor:"pointer",fontSize:16,fontWeight:600},children:"Salvar"})]})]})})]}):(0,o.jsxs)("div",{style:{maxWidth:800,margin:"0 auto",padding:24},children:[(0,o.jsxs)("div",{style:{marginBottom:24},children:[(0,o.jsx)("h1",{style:{fontSize:24,fontWeight:700,marginBottom:16},children:"Lista de Compras"}),(0,o.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,o.jsxs)("button",{onClick:()=>e.push("/lista-compras/dashboard"),style:{flex:1,height:44,background:"white",color:"#374151",border:"2px solid #e5e7eb",borderRadius:8,cursor:"pointer",fontSize:14,fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:[(0,o.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,o.jsx)("path",{d:"M18 20V10M12 20V4M6 20v-6"})}),"Painel"]}),(0,o.jsxs)("button",{onClick:function(){let e=new Date().toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"});eg("Compras ".concat(e)),ef(""),ey(!1),ej(""),ep(null),el(!0)},style:{flex:1,height:44,background:"#10b981",color:"white",border:"none",borderRadius:8,cursor:"pointer",fontSize:14,fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:[(0,o.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2"}),(0,o.jsx)("line",{x1:"7",y1:"8",x2:"17",y2:"8"}),(0,o.jsx)("line",{x1:"7",y1:"12",x2:"13",y2:"12"}),(0,o.jsx)("line",{x1:"7",y1:"16",x2:"10",y2:"16"})]}),"Nota"]}),(0,o.jsxs)("button",{onClick:()=>f(!0),style:{flex:1,height:44,background:"#2196F3",color:"white",border:"none",borderRadius:8,cursor:"pointer",fontSize:14,fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:[(0,o.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,o.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Nova"]})]})]}),u?(0,o.jsx)("div",{style:{padding:32,textAlign:"center",color:"#9ca3af"},children:"Carregando..."}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{marginBottom:32},children:[(0,o.jsx)("h2",{style:{fontSize:16,fontWeight:600,color:"#6b7280",marginBottom:12},children:"LISTAS ATIVAS"}),0===e6.length?(0,o.jsx)("div",{style:{padding:32,textAlign:"center",color:"#9ca3af",border:"2px dashed #e5e7eb",borderRadius:12},children:"Nenhuma lista ativa"}):(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:e6.map(e=>(0,o.jsxs)("div",{style:{padding:16,background:"white",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",borderRadius:12,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsxs)("div",{onClick:()=>eA(e.id),style:{flex:1,cursor:"pointer"},children:[(0,o.jsx)("div",{style:{fontWeight:600,fontSize:16},children:e.name}),(0,o.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["Criada em ",e1(e.created_at)]})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,o.jsx)("button",{onClick:t=>{t.stopPropagation(),eZ(e)},style:{padding:"8px 12px",background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:8,cursor:"pointer",fontSize:14,fontWeight:500,color:"#374151"},title:"Duplicar lista",children:"Duplicar"}),(0,o.jsx)("div",{onClick:()=>eA(e.id),style:{padding:"8px 16px",background:"#dbeafe",color:"#1e40af",borderRadius:8,fontSize:14,fontWeight:600,cursor:"pointer"},children:"Abrir"})]})]},e.id))})]}),e4.length>0&&(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[(0,o.jsxs)("h2",{style:{fontSize:16,fontWeight:600,color:"#6b7280"},children:["LISTAS CONCLUIDAS ",!Z&&e4.length>5&&"(ultimas 5 de ".concat(e4.length,")")]}),e4.length>5&&(0,o.jsx)("button",{onClick:()=>ee(!Z),style:{padding:"6px 12px",background:"#f3f4f6",border:"none",borderRadius:6,cursor:"pointer",fontSize:13,fontWeight:500,color:"#6b7280"},children:Z?"Mostrar menos":"Ver todas"})]}),(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:e8.map(e=>(0,o.jsxs)("div",{style:{padding:12,background:"#f0fdf4",borderRadius:12,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsxs)("div",{onClick:()=>eG(e),style:{flex:1,cursor:"pointer"},children:[(0,o.jsxs)("div",{style:{fontWeight:600,color:"#166534",fontSize:15,marginBottom:2},children:[e.name,(0,o.jsxs)("span",{style:{fontWeight:400,color:"#6b7280",fontSize:13},children:[" - ",e1(e.completed_at||e.updated_at),e.store_name&&" - ".concat(e.store_name)]})]}),e.total_price&&Number(e.total_price)>0&&(0,o.jsx)("div",{style:{fontSize:15,fontWeight:700,color:"#166534"},children:e9(Number(e.total_price))})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,o.jsx)("button",{onClick:()=>eG(e),style:{padding:"6px 12px",background:"#dbeafe",border:"1px solid #93c5fd",borderRadius:6,cursor:"pointer",fontSize:13,fontWeight:500,color:"#1e40af"},children:"Ver"}),(0,o.jsx)("button",{onClick:()=>eZ(e),style:{padding:"6px 12px",background:"#dcfce7",border:"1px solid #86efac",borderRadius:6,cursor:"pointer",fontSize:13,fontWeight:500,color:"#166534"},children:"Duplicar"})]})]},e.id))})]})]}),x&&(0,o.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:24,zIndex:1e3},children:(0,o.jsxs)("div",{style:{background:"white",borderRadius:16,padding:24,width:"100%",maxWidth:400},children:[(0,o.jsx)("h2",{style:{fontSize:20,fontWeight:700,marginBottom:16},children:"Nova Lista de Compras"}),(0,o.jsxs)("form",{onSubmit:eD,children:[(0,o.jsxs)("div",{style:{marginBottom:16},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Nome da lista *"}),(0,o.jsx)("input",{type:"text",value:m,onChange:e=>j(e.target.value),placeholder:"Ex: Compras da semana",required:!0,style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,boxSizing:"border-box"}})]}),h&&(0,o.jsx)("div",{style:{padding:12,background:"#fee2e2",border:"2px solid #ef4444",borderRadius:8,color:"#991b1b",marginBottom:16},children:h}),(0,o.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,o.jsx)("button",{type:"button",onClick:()=>{f(!1),g(null)},style:{flex:1,padding:12,background:"#f3f4f6",border:"none",borderRadius:8,cursor:"pointer",fontSize:16,fontWeight:600},children:"Cancelar"}),(0,o.jsx)("button",{type:"submit",style:{flex:1,padding:12,background:"#2196F3",color:"white",border:"none",borderRadius:8,cursor:"pointer",fontSize:16,fontWeight:600},children:"Criar Lista"})]})]})]})}),L&&N&&(0,o.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:24,zIndex:1e3},children:(0,o.jsxs)("div",{style:{background:"white",borderRadius:16,padding:24,width:"100%",maxWidth:400},children:[(0,o.jsx)("h2",{style:{fontSize:20,fontWeight:700,marginBottom:16},children:"Duplicar Lista"}),(0,o.jsxs)("p",{style:{fontSize:14,color:"#6b7280",marginBottom:16},children:["Duplicando: ",(0,o.jsx)("strong",{children:N.name})]}),(0,o.jsxs)("form",{onSubmit:e0,children:[(0,o.jsxs)("div",{style:{marginBottom:16},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Nome da nova lista *"}),(0,o.jsx)("input",{type:"text",value:A,onChange:e=>D(e.target.value),placeholder:"Ex: Compras da semana",required:!0,style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,boxSizing:"border-box"}})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,o.jsx)("button",{type:"button",onClick:()=>{F(!1),T(null)},style:{flex:1,padding:12,background:"#f3f4f6",border:"none",borderRadius:8,cursor:"pointer",fontSize:16,fontWeight:600},children:"Cancelar"}),(0,o.jsx)("button",{type:"submit",style:{flex:1,padding:12,background:"#2196F3",color:"white",border:"none",borderRadius:8,cursor:"pointer",fontSize:16,fontWeight:600},children:"Duplicar"})]})]})]})}),ed&&(0,o.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:24,zIndex:1e3},children:(0,o.jsxs)("div",{style:{background:"white",borderRadius:16,padding:24,width:"100%",maxWidth:400},children:[(0,o.jsx)("h2",{style:{fontSize:20,fontWeight:700,marginBottom:8},children:"Escanear Nota Fiscal"}),(0,o.jsx)("p",{style:{fontSize:14,color:"#6b7280",marginBottom:16},children:"Tire uma foto da nota para importar os itens automaticamente."}),(0,o.jsxs)("form",{onSubmit:e2,children:[(0,o.jsxs)("div",{style:{marginBottom:16},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Nome da lista"}),(0,o.jsx)("input",{type:"text",value:eh,onChange:e=>eg(e.target.value),placeholder:"Ex: Compras 29/12",style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,boxSizing:"border-box"}})]}),(0,o.jsxs)("div",{style:{marginBottom:16},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Loja (opcional)"}),eb?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",{type:"text",value:em,onChange:e=>ej(e.target.value),placeholder:"Nome da loja",style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,marginBottom:8,boxSizing:"border-box"}}),(0,o.jsx)("button",{type:"button",onClick:()=>{ey(!1),ej("")},style:{width:"100%",padding:10,background:"#f3f4f6",border:"none",borderRadius:8,cursor:"pointer",fontSize:14,color:"#6b7280"},children:"Voltar para lista"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("select",{value:ex,onChange:e=>ef(e.target.value),style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,marginBottom:8,boxSizing:"border-box",background:"white"},children:[(0,o.jsx)("option",{value:"",children:"Selecione uma loja"}),P.map(e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,o.jsx)("button",{type:"button",onClick:()=>ey(!0),style:{width:"100%",padding:10,background:"#f3f4f6",border:"1px dashed #d1d5db",borderRadius:8,cursor:"pointer",fontSize:14,color:"#6b7280"},children:"+ Nova loja"})]})]}),(0,o.jsxs)("div",{style:{marginBottom:16},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Foto da nota *"}),(0,o.jsx)("input",{type:"file",accept:"image/*",capture:"environment",required:!0,style:{width:"100%",padding:12,fontSize:14,border:"2px solid #e5e7eb",borderRadius:8,boxSizing:"border-box",background:"#f9fafb"}}),(0,o.jsx)("p",{style:{fontSize:12,color:"#9ca3af",marginTop:4},children:"Tire uma foto clara da nota fiscal completa"})]}),eu&&(0,o.jsx)("div",{style:{padding:12,background:"#fee2e2",border:"2px solid #ef4444",borderRadius:8,color:"#991b1b",marginBottom:16,fontSize:14},children:eu}),(0,o.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,o.jsx)("button",{type:"button",onClick:()=>el(!1),disabled:es,style:{flex:1,padding:12,background:"#f3f4f6",border:"none",borderRadius:8,cursor:es?"not-allowed":"pointer",fontSize:16,fontWeight:600,opacity:es?.7:1},children:"Cancelar"}),(0,o.jsx)("button",{type:"submit",disabled:es,style:{flex:1,padding:12,background:es?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:8,cursor:es?"not-allowed":"pointer",fontSize:16,fontWeight:600},children:es?"Analisando...":"Escanear"})]})]})]})})]})}},5591:function(e,t,i){"use strict";i.d(t,{h:function(){return r},x:function(){return n}});let o=i(357).env.NEXT_PUBLIC_API_URL||"https://app.foodtracker.com.br";async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:i,...n}=t,r={...n.headers};if(i)r.Authorization="Bearer ".concat(i);else{let e=localStorage.getItem("auth_token");console.log("[API Client] localStorage auth_token:",e?"exists":"null"),e&&(r.Authorization="Bearer ".concat(e))}n.body&&"string"==typeof n.body&&!r["Content-Type"]&&(r["Content-Type"]="application/json");let a=e.startsWith("http")?e:"".concat(o).concat(e);console.log("[API Client]",{isMobile:!0,baseUrl:o,endpoint:e,finalUrl:a,hasAuthToken:!!r.Authorization});try{let t=await fetch(a,{...n,headers:r,credentials:"include"});return console.log("[API Client] Response ".concat(e,":"),{status:t.status}),401!==t.status||window.location.pathname.includes("/login")||(console.warn("401 Unauthorized - Redirecting to login"),localStorage.removeItem("auth_token"),window.location.href="/login"),t}catch(e){throw console.error("[API Client Error]",e),e}}let r={get:(e,t)=>n(e,{method:"GET",token:t}),post:(e,t,i)=>n(e,{method:"POST",body:JSON.stringify(t),token:i}),put:(e,t,i)=>n(e,{method:"PUT",body:JSON.stringify(t),token:i}),patch:(e,t,i)=>n(e,{method:"PATCH",body:JSON.stringify(t),token:i}),delete:(e,t)=>n(e,{method:"DELETE",token:t})}},6463:function(e,t,i){"use strict";var o=i(1169);i.o(o,"usePathname")&&i.d(t,{usePathname:function(){return o.usePathname}}),i.o(o,"useRouter")&&i.d(t,{useRouter:function(){return o.useRouter}}),i.o(o,"useSearchParams")&&i.d(t,{useSearchParams:function(){return o.useSearchParams}})},357:function(e,t,i){"use strict";var o,n;e.exports=(null==(o=i.g.process)?void 0:o.env)&&"object"==typeof(null==(n=i.g.process)?void 0:n.env)?i.g.process:i(8081)},8081:function(e){!function(){var t={229:function(e){var t,i,o,n=e.exports={};function r(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function d(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(i){try{return t.call(null,e,0)}catch(i){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var l=[],s=!1,c=-1;function u(){s&&o&&(s=!1,o.length?l=o.concat(l):c=-1,l.length&&p())}function p(){if(!s){var e=d(u);s=!0;for(var t=l.length;t;){for(o=l,l=[];++c<t;)o&&o[c].run();c=-1,t=l.length}o=null,s=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];l.push(new h(e,t)),1!==l.length||s||d(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},i={};function o(e){var n=i[e];if(void 0!==n)return n.exports;var r=i[e]={exports:{}},a=!0;try{t[e](r,r.exports,o),a=!1}finally{a&&delete i[e]}return r.exports}o.ab="//";var n=o(229);e.exports=n}()}},function(e){e.O(0,[971,23,744],function(){return e(e.s=3790)}),_N_E=e.O()}]);