(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[160,398],{18784:function(e,i,a){Promise.resolve().then(a.bind(a,78947))},78947:function(e,i,a){"use strict";a.r(i),a.d(i,{default:function(){return c}});var t=a(57437),n=a(2265),o=a(86394),r=a(46285);let s={free:{photo_analyses_per_month:999999,ocr_analyses_per_month:999999,text_analyses_per_month:999999,coach_analyses_per_month:999999,report_analyses_per_month:999999,history_days:30,coach_ai:!0,advanced_reports:!0,data_export:!1,show_ads:!0},premium:{photo_analyses_per_month:150,ocr_analyses_per_month:150,text_analyses_per_month:150,coach_analyses_per_month:5,report_analyses_per_month:5,history_days:null,coach_ai:!0,advanced_reports:!0,data_export:!0,show_ads:!1},unlimited:{photo_analyses_per_month:999999,ocr_analyses_per_month:999999,text_analyses_per_month:999999,coach_analyses_per_month:999999,report_analyses_per_month:999999,history_days:null,coach_ai:!0,advanced_reports:!0,data_export:!0,show_ads:!1}};var d=a(45591),l=a(45224);function c(){let{plan:e,isLoading:i}=(0,o.R)(),[a,c]=(0,n.useState)(!1),[h,u]=(0,n.useState)(!1),[f,g]=(0,n.useState)(!0),[p,m]=(0,n.useState)(!1),[y,b]=(0,n.useState)(!0),[x,_]=(0,n.useState)(null),[w,j]=(0,n.useState)([]),[v,S]=(0,n.useState)(null);async function R(){try{let e=await d.h.get("/api/user/goals"),i=await e.json();e.ok&&i.goals&&i.goals.goal_type&&m(!0)}catch(e){console.error("Erro ao buscar objetivos:",e)}finally{b(!1)}}async function B(){try{g(!0);let e=await d.h.get("/api/coach/history"),i=await e.json();e.ok&&(j(i.analyses||[]),i.analyses.length>0&&_({analysisText:i.analyses[0].analysis_text,recommendations:i.analyses[0].recommendations,insights:i.analyses[0].insights,warnings:i.analyses[0].warnings,analysis_date:i.analyses[0].analysis_date}))}catch(e){console.error("Erro ao buscar hist\xf3rico:",e)}finally{g(!1)}}async function A(){if(!s[e].coach_ai){c(!0);return}u(!0),S(null);try{let e=await (0,l.q)(e=>fetch("/api/coach/analyze",{method:"POST",headers:{"Content-Type":"application/json",...e||{}},body:JSON.stringify({})}),{feature:"coach_analysis"}),i=await e.json();if(!e.ok){if(403===e.status&&"upgrade_required"===i.error){c(!0);return}throw Error(i.message||i.error||"Erro ao analisar")}e.ok&&i.analysis&&(_(i.analysis),await B())}catch(e){S(e.message)}finally{u(!1)}}(0,n.useEffect)(()=>{B(),R()},[]),f||w.length;let z=s[e].coach_ai;return(0,t.jsxs)("div",{style:{maxWidth:900,margin:"0 auto",padding:24},children:[(0,t.jsx)(r.x5,{isOpen:a,onClose:()=>c(!1),feature:"coach_analysis",currentPlan:e}),(0,t.jsx)("h1",{style:{fontSize:32,fontWeight:700,marginBottom:24},children:"Coach IA"}),i&&(0,t.jsx)("div",{style:{background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:16,padding:32,textAlign:"center",marginBottom:24},children:(0,t.jsx)("div",{style:{fontSize:16,color:"#6b7280"},children:"Carregando informa\xe7\xf5es..."})}),!i&&!y&&!p&&z&&(0,t.jsx)("div",{style:{background:"#fffbeb",border:"2px solid #fbbf24",borderRadius:16,padding:24,marginBottom:24},children:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:16},children:[(0,t.jsx)("div",{style:{fontSize:32}}),(0,t.jsxs)("div",{style:{flex:1},children:[(0,t.jsx)("h3",{style:{fontSize:18,fontWeight:700,marginBottom:8,color:"#92400e"},children:"Configure seus objetivos primeiro"}),(0,t.jsx)("p",{style:{fontSize:15,color:"#92400e",marginBottom:16},children:"Para receber an\xe1lises personalizadas e relevantes, voc\xea precisa definir seus objetivos (perder/ganhar/manter peso), altura, idade e n\xedvel de atividade."}),(0,t.jsx)("a",{href:"/objetivos",style:{display:"inline-block",padding:"12px 24px",background:"#fbbf24",color:"#92400e",borderRadius:8,fontWeight:600,textDecoration:"none"},children:"Configurar Objetivos Agora"})]})]})}),!i&&(0,t.jsxs)("div",{style:{background:z?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"linear-gradient(135deg, #94a3b8 0%, #64748b 100%)",color:"white",borderRadius:16,padding:32,marginBottom:32,textAlign:"center",position:"relative"},children:[!z&&(0,t.jsx)("div",{style:{position:"absolute",top:16,right:16,background:"#fbbf24",color:"#92400e",padding:"6px 12px",borderRadius:8,fontSize:12,fontWeight:700},children:"PREMIUM"}),(0,t.jsx)("div",{style:{fontSize:48,marginBottom:16},children:""}),(0,t.jsx)("h2",{style:{fontSize:24,fontWeight:700,marginBottom:12},children:z?"An\xe1lise Personalizada":"Recurso Premium"}),(0,t.jsx)("p",{style:{fontSize:16,marginBottom:24,opacity:.9},children:z?"Receba insights baseados no seu peso, medidas e alimenta\xe7\xe3o":"Desbloqueie o Coach IA e receba an\xe1lises personalizadas ilimitadas"}),(0,t.jsx)("button",{onClick:z?A:()=>c(!0),disabled:h||z&&f,style:{padding:"16px 32px",background:"white",color:z?"#667eea":"#64748b",border:"none",borderRadius:12,fontSize:16,fontWeight:700,cursor:h||f?"not-allowed":"pointer",opacity:h||f?.7:1},children:h?" Analisando...":z?" Analisar Agora":" Desbloquear Premium"})]}),!i&&!f&&!x&&0===w.length&&!v&&z&&(0,t.jsxs)("div",{style:{background:"#fffbeb",border:"2px solid #fbbf24",borderRadius:16,padding:32,textAlign:"center",marginBottom:24},children:[(0,t.jsx)("div",{style:{fontSize:48,marginBottom:16}}),(0,t.jsx)("h3",{style:{fontSize:20,fontWeight:700,marginBottom:12,color:"#92400e"},children:"Dados insuficientes para an\xe1lise"}),(0,t.jsx)("p",{style:{fontSize:16,color:"#92400e",marginBottom:24},children:"Para receber insights personalizados, voc\xea precisa ter registrado:"}),(0,t.jsxs)("ul",{style:{listStyle:"none",padding:0,margin:"0 auto",maxWidth:400,textAlign:"left"},children:[(0,t.jsx)("li",{style:{padding:"8px 0",fontSize:15,color:"#92400e"},children:"Peso atual"}),(0,t.jsx)("li",{style:{padding:"8px 0",fontSize:15,color:"#92400e"},children:"Medidas corporais (cintura, quadril, etc.)"}),(0,t.jsx)("li",{style:{padding:"8px 0",fontSize:15,color:"#92400e"},children:"Refei\xe7\xf5es recentes"})]}),(0,t.jsxs)("div",{style:{marginTop:24,display:"flex",gap:12,justifyContent:"center",flexWrap:"wrap"},children:[(0,t.jsx)("a",{href:"/peso",style:{padding:"12px 24px",background:"#fbbf24",color:"#92400e",borderRadius:8,fontWeight:600,textDecoration:"none",display:"inline-block"},children:"Registrar Peso/Medidas"}),(0,t.jsx)("a",{href:"/capture",style:{padding:"12px 24px",background:"#fbbf24",color:"#92400e",borderRadius:8,fontWeight:600,textDecoration:"none",display:"inline-block"},children:"Registrar Refei\xe7\xe3o"})]})]}),h&&(0,t.jsxs)("div",{style:{background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:16,padding:32,marginBottom:24},children:[(0,t.jsxs)("div",{style:{marginBottom:24},children:[(0,t.jsx)("div",{style:{height:20,background:"#e5e7eb",borderRadius:4,marginBottom:12,animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"}}),(0,t.jsx)("div",{style:{height:20,background:"#e5e7eb",borderRadius:4,width:"80%",animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"}})]}),(0,t.jsx)("div",{style:{fontSize:14,color:"#6b7280",textAlign:"center"},children:"Analisando seus dados e gerando insights..."})]}),v&&(0,t.jsx)("div",{style:{padding:16,background:"#fee2e2",border:"2px solid #ef4444",borderRadius:12,color:"#991b1b",marginBottom:24},children:v}),x&&(0,t.jsxs)("div",{children:[x.analysis_date&&(0,t.jsxs)("div",{style:{fontSize:14,color:"#6b7280",marginBottom:16},children:["An\xe1lise de ",new Date(x.analysis_date).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})]}),x.warnings&&x.warnings.length>0&&(0,t.jsxs)("div",{style:{background:"#fef2f2",border:"2px solid #ef4444",borderRadius:16,padding:24,marginBottom:24},children:[(0,t.jsx)("h3",{style:{fontSize:20,fontWeight:700,marginBottom:16,color:"#ef4444"},children:"Alertas Importantes"}),(0,t.jsx)("ul",{style:{paddingLeft:20,margin:0},children:x.warnings.map((e,i)=>(0,t.jsx)("li",{style:{fontSize:16,marginBottom:12,color:"#991b1b"},children:e},i))})]}),(0,t.jsxs)("div",{style:{background:"white",border:"2px solid #e5e7eb",borderRadius:16,padding:24,marginBottom:24},children:[(0,t.jsx)("h3",{style:{fontSize:20,fontWeight:700,marginBottom:16},children:"An\xe1lise Geral"}),(0,t.jsx)("div",{style:{fontSize:16,lineHeight:1.8,color:"#374151",whiteSpace:"pre-wrap"},children:x.analysisText})]}),x.insights&&x.insights.length>0&&(0,t.jsxs)("div",{style:{background:"white",border:"2px solid #3b82f6",borderRadius:16,padding:24,marginBottom:24},children:[(0,t.jsx)("h3",{style:{fontSize:20,fontWeight:700,marginBottom:16,color:"#3b82f6"},children:"Insights Identificados"}),(0,t.jsx)("ul",{style:{paddingLeft:20,margin:0},children:x.insights.map((e,i)=>(0,t.jsx)("li",{style:{fontSize:16,marginBottom:12,color:"#374151"},children:e},i))})]}),x.recommendations&&x.recommendations.length>0&&(0,t.jsxs)("div",{style:{background:"white",border:"2px solid #10b981",borderRadius:16,padding:24,marginBottom:24},children:[(0,t.jsx)("h3",{style:{fontSize:20,fontWeight:700,marginBottom:16,color:"#10b981"},children:"Recomenda\xe7\xf5es Pr\xe1ticas"}),(0,t.jsx)("ul",{style:{paddingLeft:20,margin:0},children:x.recommendations.map((e,i)=>(0,t.jsx)("li",{style:{fontSize:16,marginBottom:12,color:"#374151"},children:e},i))})]})]}),w.length>1&&(0,t.jsxs)("div",{style:{background:"white",border:"2px solid #e5e7eb",borderRadius:16,padding:24,marginTop:32},children:[(0,t.jsx)("h3",{style:{fontSize:20,fontWeight:700,marginBottom:16},children:"Hist\xf3rico de An\xe1lises"}),(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:w.slice(1).map((e,i)=>(0,t.jsx)("button",{onClick:()=>_({analysisText:e.analysis_text,recommendations:e.recommendations,insights:e.insights,warnings:e.warnings,analysis_date:e.analysis_date}),style:{padding:16,background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:12,cursor:"pointer",textAlign:"left",fontSize:14},children:new Date(e.analysis_date).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})},i))})]}),(0,t.jsx)("div",{style:{marginTop:32,padding:16,background:"#f9fafb",borderRadius:12,border:"1px solid #e5e7eb"},children:(0,t.jsx)("p",{style:{margin:0,fontSize:12,color:"#6b7280",textAlign:"center",lineHeight:1.6},children:"As informacoes sao geradas por inteligencia artificial e tem carater informativo. Nao substituem orientacao de nutricionistas ou medicos. Consulte um profissional de saude para orientacoes personalizadas."})})]})}},68398:function(e,i,a){"use strict";a.d(i,{Ob:function(){return h},showRewardedAd:function(){return u},tJ:function(){return c}});var t=a(87185);function n(e,i){var a;return(null===(a=process.env)||void 0===a?void 0:a[e])||i}n("NEXT_PUBLIC_ADMOB_APP_ID_IOS","ca-app-pub-1018925088575422~2172895788");let o=n("NEXT_PUBLIC_ADMOB_BANNER_ID_IOS","ca-app-pub-1018925088575422/1014553329"),r=n("NEXT_PUBLIC_ADMOB_REWARDED_ID_IOS","ca-app-pub-1018925088575422/2438303871"),s=null,d=!1;async function l(){if(!s)try{s=(await a.e(124).then(a.bind(a,97124))).AdMob}catch(e){console.warn("[AdMob] Community plugin not available:",e),s=null}}async function c(){if(t.dV.isNativePlatform()&&!d){if(await l(),!s){d=!0;return}try{await s.initialize({requestTrackingAuthorization:!0})}catch(e){console.warn("[AdMob] init error (non-fatal):",e)}finally{d=!0}}}async function h(){if(t.dV.isNativePlatform()&&(await c(),s))try{"function"==typeof s.showBannerAd?await s.showBannerAd({adId:o,position:"TOP_CENTER"}):"function"==typeof s.showBanner&&await s.showBanner({adId:o,position:"TOP_CENTER"})}catch(e){console.warn("[AdMob] showTopBanner failed:",e)}}async function u(e){if(!t.dV.isNativePlatform())return console.log("[AdMob] Not native, simulating rewarded ad for dev"),!0;if(await c(),!s)return!0;try{if("function"==typeof s.showRewardedAd)return await s.showRewardedAd({adId:r}),!0;if("function"==typeof s.showRewardVideoAd)return await s.showRewardVideoAd({adId:r}),!0;return console.warn("[AdMob] No rewarded method available"),!1}catch(e){return console.warn("[AdMob] showRewardedAd failed:",e),!1}}},45224:function(e,i,a){"use strict";a.d(i,{q:function(){return n}});var t=a(68398);async function n(e,i){let a=await e();if(403!==a.status)return a;try{let n=await a.clone().json().catch(()=>({}));if((null==n?void 0:n.error)==="watch_ad_required"){if(!await (0,t.showRewardedAd)(null==i?void 0:i.feature))return a;return await e({"x-ad-completed":"1"})}}catch(e){}return a}},16463:function(e,i,a){"use strict";var t=a(71169);a.o(t,"usePathname")&&a.d(i,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(i,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(i,{useSearchParams:function(){return t.useSearchParams}})}},function(e){e.O(0,[325,78,971,23,744],function(){return e(e.s=18784)}),_N_E=e.O()}]);