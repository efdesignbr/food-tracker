(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[383],{3564:function(e,t,o){Promise.resolve().then(o.bind(o,112))},112:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return l}});var i=o(7437),n=o(2265),r=o(6463),a=o(5591);function l(){let e=(0,r.useRouter)(),[t,o]=(0,n.useState)(!0),[l,s]=(0,n.useState)(!1),[d,c]=(0,n.useState)(null),[u,h]=(0,n.useState)(!1),[g,p]=(0,n.useState)({goal_type:"",height_cm:void 0,age:void 0,gender:"",activity_level:"",target_weight_kg:void 0,weekly_goal_kg:void 0});async function m(){try{let e=await a.h.get("/api/user/goals"),t=await e.json();e.ok&&t.goals&&p(t.goals)}catch(e){console.error("Erro ao buscar objetivos:",e)}finally{o(!1)}}function v(e,t){p(o=>({...o,[e]:t}))}async function f(t){t.preventDefault(),c(null),h(!1),s(!0);try{if(!g.goal_type)throw Error("Selecione um objetivo");if(!g.height_cm||g.height_cm<100||g.height_cm>250)throw Error("Altura deve estar entre 100 e 250 cm");if(!g.age||g.age<10||g.age>120)throw Error("Idade deve estar entre 10 e 120 anos");if(!g.gender)throw Error("Selecione o g\xeanero");if(!g.activity_level)throw Error("Selecione o n\xedvel de atividade");let t={goal_type:g.goal_type,height_cm:g.height_cm,age:g.age,gender:g.gender,activity_level:g.activity_level};g.target_weight_kg&&!isNaN(g.target_weight_kg)&&(t.target_weight_kg=g.target_weight_kg),g.weekly_goal_kg&&!isNaN(g.weekly_goal_kg)&&(t.weekly_goal_kg=g.weekly_goal_kg);let o=await a.h.post("/api/user/goals",t),i=await o.json();if(!o.ok)throw Error(i.error||"Erro ao salvar objetivos");h(!0),setTimeout(()=>{e.push("/coach")},1500)}catch(e){c(e.message)}finally{s(!1)}}return((0,n.useEffect)(()=>{m()},[]),t)?(0,i.jsx)("div",{style:{maxWidth:800,margin:"0 auto",padding:24},children:(0,i.jsx)("div",{style:{textAlign:"center",padding:40},children:"Carregando..."})}):(0,i.jsxs)("div",{style:{maxWidth:800,margin:"0 auto",padding:24},children:[(0,i.jsx)("h1",{style:{fontSize:32,fontWeight:700,marginBottom:8},children:"Meus Objetivos"}),(0,i.jsx)("p",{style:{fontSize:16,color:"#6b7280",marginBottom:24},children:"Configure seus objetivos para receber an\xe1lises personalizadas do Coach IA"}),(0,i.jsxs)("form",{onSubmit:f,children:[(0,i.jsxs)("div",{style:{background:"white",border:"2px solid #e5e7eb",borderRadius:16,padding:24,marginBottom:24},children:[(0,i.jsx)("h2",{style:{fontSize:20,fontWeight:700,marginBottom:16},children:"Objetivo Principal"}),(0,i.jsx)("label",{style:{display:"block",marginBottom:12,fontWeight:600},children:"O que voc\xea deseja? *"}),(0,i.jsxs)("select",{value:g.goal_type||"",onChange:e=>v("goal_type",e.target.value),required:!0,style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,marginBottom:16},children:[(0,i.jsx)("option",{value:"",children:"Selecione..."}),(0,i.jsx)("option",{value:"lose_weight",children:" Perder Peso (Emagrecimento)"}),(0,i.jsx)("option",{value:"gain_weight",children:" Ganhar Peso (Ganho de Massa)"}),(0,i.jsx)("option",{value:"maintain_weight",children:" Manter Peso (Manuten\xe7\xe3o)"})]}),g.goal_type&&"maintain_weight"!==g.goal_type&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Peso Alvo (kg)"}),(0,i.jsx)("input",{type:"number",step:"0.1",value:g.target_weight_kg||"",onChange:e=>{let t=parseFloat(e.target.value);v("target_weight_kg",isNaN(t)?void 0:t)},placeholder:"Ex: 75.0",style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8,marginBottom:16}}),(0,i.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Meta Semanal (kg/semana)"}),(0,i.jsxs)("select",{value:g.weekly_goal_kg||"",onChange:e=>{let t=parseFloat(e.target.value);v("weekly_goal_kg",isNaN(t)?void 0:t)},style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8},children:[(0,i.jsx)("option",{value:"",children:"Selecione..."}),"lose_weight"===g.goal_type?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("option",{value:"-0.25",children:"-0.25 kg/semana (lento e sustent\xe1vel)"}),(0,i.jsx)("option",{value:"-0.5",children:"-0.5 kg/semana (recomendado)"}),(0,i.jsx)("option",{value:"-0.75",children:"-0.75 kg/semana (agressivo)"}),(0,i.jsx)("option",{value:"-1.0",children:"-1.0 kg/semana (muito agressivo)"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("option",{value:"0.25",children:"+0.25 kg/semana (lean bulk)"}),(0,i.jsx)("option",{value:"0.5",children:"+0.5 kg/semana (recomendado)"}),(0,i.jsx)("option",{value:"0.75",children:"+0.75 kg/semana (bulk)"}),(0,i.jsx)("option",{value:"1.0",children:"+1.0 kg/semana (dirty bulk)"})]})]})]})]}),(0,i.jsxs)("div",{style:{background:"white",border:"2px solid #e5e7eb",borderRadius:16,padding:24,marginBottom:24},children:[(0,i.jsx)("h2",{style:{fontSize:20,fontWeight:700,marginBottom:16},children:"Dados Pessoais"}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:16},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Altura (cm) *"}),(0,i.jsx)("input",{type:"number",value:g.height_cm||"",onChange:e=>{let t=parseInt(e.target.value);v("height_cm",isNaN(t)?void 0:t)},placeholder:"Ex: 175",required:!0,style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Idade (anos) *"}),(0,i.jsx)("input",{type:"number",value:g.age||"",onChange:e=>{let t=parseInt(e.target.value);v("age",isNaN(t)?void 0:t)},placeholder:"Ex: 30",required:!0,style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"G\xeanero *"}),(0,i.jsxs)("select",{value:g.gender||"",onChange:e=>v("gender",e.target.value),required:!0,style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8},children:[(0,i.jsx)("option",{value:"",children:"Selecione..."}),(0,i.jsx)("option",{value:"male",children:"Masculino"}),(0,i.jsx)("option",{value:"female",children:"Feminino"}),(0,i.jsx)("option",{value:"other",children:"Outro"})]})]})]}),(0,i.jsxs)("div",{style:{marginTop:16},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"N\xedvel de Atividade *"}),(0,i.jsxs)("select",{value:g.activity_level||"",onChange:e=>v("activity_level",e.target.value),required:!0,style:{width:"100%",padding:12,fontSize:16,border:"2px solid #e5e7eb",borderRadius:8},children:[(0,i.jsx)("option",{value:"",children:"Selecione..."}),(0,i.jsx)("option",{value:"sedentary",children:"Sedent\xe1rio (pouco ou nenhum exerc\xedcio)"}),(0,i.jsx)("option",{value:"light",children:"Leve (exerc\xedcio 1-3 dias/semana)"}),(0,i.jsx)("option",{value:"moderate",children:"Moderado (exerc\xedcio 3-5 dias/semana)"}),(0,i.jsx)("option",{value:"active",children:"Ativo (exerc\xedcio 6-7 dias/semana)"}),(0,i.jsx)("option",{value:"very_active",children:"Muito Ativo (exerc\xedcio 2x/dia ou trabalho f\xedsico)"})]})]})]}),d&&(0,i.jsx)("div",{style:{padding:16,background:"#fee2e2",border:"2px solid #ef4444",borderRadius:12,color:"#991b1b",marginBottom:16},children:d}),u&&(0,i.jsx)("div",{style:{padding:16,background:"#d1fae5",border:"2px solid #10b981",borderRadius:12,color:"#065f46",marginBottom:16},children:"Objetivos salvos com sucesso! Redirecionando..."}),(0,i.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,i.jsx)("button",{type:"button",onClick:()=>e.back(),style:{padding:"16px 24px",background:"#f3f4f6",color:"#374151",border:"none",borderRadius:12,fontSize:16,fontWeight:600,cursor:"pointer"},children:"Cancelar"}),(0,i.jsx)("button",{type:"submit",disabled:l,style:{flex:1,padding:"16px 24px",background:l?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:12,fontSize:16,fontWeight:600,cursor:l?"not-allowed":"pointer"},children:l?" Salvando...":" Salvar Objetivos"})]})]})]})}},5591:function(e,t,o){"use strict";o.d(t,{h:function(){return r},x:function(){return n}});let i=o(357).env.NEXT_PUBLIC_API_URL||"https://app.foodtracker.com.br";async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:o,...n}=t,r={...n.headers};if(o)r.Authorization="Bearer ".concat(o);else{let e=localStorage.getItem("auth_token");console.log("[API Client] localStorage auth_token:",e?"exists":"null"),e&&(r.Authorization="Bearer ".concat(e))}n.body&&"string"==typeof n.body&&!r["Content-Type"]&&(r["Content-Type"]="application/json");let a=e.startsWith("http")?e:"".concat(i).concat(e);console.log("[API Client]",{isMobile:!0,baseUrl:i,endpoint:e,finalUrl:a,hasAuthToken:!!r.Authorization});try{let t=await fetch(a,{...n,headers:r,credentials:"include"});return console.log("[API Client] Response ".concat(e,":"),{status:t.status}),401!==t.status||window.location.pathname.includes("/login")||(console.warn("401 Unauthorized - Redirecting to login"),localStorage.removeItem("auth_token"),window.location.href="/login"),t}catch(e){throw console.error("[API Client Error]",e),e}}let r={get:(e,t)=>n(e,{method:"GET",token:t}),post:(e,t,o)=>n(e,{method:"POST",body:JSON.stringify(t),token:o}),put:(e,t,o)=>n(e,{method:"PUT",body:JSON.stringify(t),token:o}),patch:(e,t,o)=>n(e,{method:"PATCH",body:JSON.stringify(t),token:o}),delete:(e,t)=>n(e,{method:"DELETE",token:t})}},6463:function(e,t,o){"use strict";var i=o(1169);o.o(i,"usePathname")&&o.d(t,{usePathname:function(){return i.usePathname}}),o.o(i,"useRouter")&&o.d(t,{useRouter:function(){return i.useRouter}}),o.o(i,"useSearchParams")&&o.d(t,{useSearchParams:function(){return i.useSearchParams}})},357:function(e,t,o){"use strict";var i,n;e.exports=(null==(i=o.g.process)?void 0:i.env)&&"object"==typeof(null==(n=o.g.process)?void 0:n.env)?o.g.process:o(8081)},8081:function(e){!function(){var t={229:function(e){var t,o,i,n=e.exports={};function r(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(o){try{return t.call(null,e,0)}catch(o){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var s=[],d=!1,c=-1;function u(){d&&i&&(d=!1,i.length?s=i.concat(s):c=-1,s.length&&h())}function h(){if(!d){var e=l(u);d=!0;for(var t=s.length;t;){for(i=s,s=[];++c<t;)i&&i[c].run();c=-1,t=s.length}i=null,d=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];s.push(new g(e,t)),1!==s.length||d||l(h)},g.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},o={};function i(e){var n=o[e];if(void 0!==n)return n.exports;var r=o[e]={exports:{}},a=!0;try{t[e](r,r.exports,i),a=!1}finally{a&&delete o[e]}return r.exports}i.ab="//";var n=i(229);e.exports=n}()}},function(e){e.O(0,[971,23,744],function(){return e(e.s=3564)}),_N_E=e.O()}]);