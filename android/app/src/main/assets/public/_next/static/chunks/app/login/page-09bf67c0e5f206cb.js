(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{2848:function(e,o,t){Promise.resolve().then(t.bind(t,5207))},5207:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return c}});var n=t(7437),r=t(2265),i=(t(8174),t(6463)),l=t(7138),a=t(5591);function s(){let[e,o]=(0,r.useState)(""),[t,s]=(0,r.useState)(""),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(!1),g=(0,i.useRouter)();async function f(o){o.preventDefault(),d(null),h(!0);try{console.log("Tentando login com:",{email:e,isMobile:!0});{let o=await a.h.post("/api/auth/mobile-login",{email:e,password:t}),n=await o.json();o.ok?n.token?(localStorage.setItem("auth_token",n.token),console.log("Token salvo, redirecionando..."),g.push("/"),g.refresh()):d("Erro: Token n\xe3o recebido"):d(n.error||"Erro no login")}}catch(e){console.error("Exce\xe7\xe3o ao fazer login:",e),d("Erro ao fazer login: "+e.message)}finally{h(!1)}}return(0,i.useSearchParams)().get("callbackUrl"),(0,n.jsxs)("div",{style:{width:"100%",maxWidth:400,padding:32,backgroundColor:"#fff",borderRadius:12,boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[(0,n.jsx)("h1",{style:{fontSize:28,fontWeight:700,marginBottom:8,textAlign:"center"},children:"Food Tracker"}),(0,n.jsx)("p",{style:{fontSize:14,color:"#666",textAlign:"center",marginBottom:32},children:"Fa\xe7a login para continuar"}),(0,n.jsxs)("form",{onSubmit:f,style:{display:"grid",gap:16},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{display:"block",fontSize:14,fontWeight:500,marginBottom:8},children:"Email"}),(0,n.jsx)("input",{type:"email",placeholder:"seu@email.com",value:e,onChange:e=>o(e.target.value),required:!0,style:{width:"100%",padding:"12px 16px",fontSize:14,border:"1px solid #e0e0e0",borderRadius:8,outline:"none",transition:"border-color 0.2s"},onFocus:e=>e.target.style.borderColor="#2196F3",onBlur:e=>e.target.style.borderColor="#e0e0e0"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{display:"block",fontSize:14,fontWeight:500,marginBottom:8},children:"Senha"}),(0,n.jsx)("input",{type:"password",placeholder:"••••••••",value:t,onChange:e=>s(e.target.value),required:!0,style:{width:"100%",padding:"12px 16px",fontSize:14,border:"1px solid #e0e0e0",borderRadius:8,outline:"none",transition:"border-color 0.2s"},onFocus:e=>e.target.style.borderColor="#2196F3",onBlur:e=>e.target.style.borderColor="#e0e0e0"})]}),c&&(0,n.jsx)("div",{style:{padding:12,backgroundColor:"#ffebee",color:"#c62828",borderRadius:8,fontSize:14},children:c}),(0,n.jsx)("button",{type:"submit",disabled:u,style:{width:"100%",padding:"12px 24px",fontSize:16,fontWeight:600,color:"#fff",backgroundColor:u?"#999":"#2196F3",border:"none",borderRadius:8,cursor:u?"not-allowed":"pointer",transition:"background-color 0.2s"},onMouseEnter:e=>{u||(e.currentTarget.style.backgroundColor="#1976D2")},onMouseLeave:e=>{u||(e.currentTarget.style.backgroundColor="#2196F3")},children:u?"Entrando…":"Entrar"})]}),(0,n.jsxs)("p",{style:{textAlign:"center",marginTop:16,color:"#666",fontSize:14},children:["Ainda nao tem conta?"," ",(0,n.jsx)(l.default,{href:"/signup",style:{color:"#2196F3",fontWeight:600,textDecoration:"none"},children:"Criar conta"})]})]})}function c(){return(0,n.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f5f5"},children:(0,n.jsx)(r.Suspense,{fallback:(0,n.jsx)("div",{children:"Carregando..."}),children:(0,n.jsx)(s,{})})})}},5591:function(e,o,t){"use strict";t.d(o,{h:function(){return i},x:function(){return r}});let n=t(357).env.NEXT_PUBLIC_API_URL||"https://app.foodtracker.com.br";async function r(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:t,...r}=o,i={...r.headers};if(t)i.Authorization="Bearer ".concat(t);else{let e=localStorage.getItem("auth_token");console.log("[API Client] localStorage auth_token:",e?"exists":"null"),e&&(i.Authorization="Bearer ".concat(e))}r.body&&"string"==typeof r.body&&!i["Content-Type"]&&(i["Content-Type"]="application/json");let l=e.startsWith("http")?e:"".concat(n).concat(e);console.log("[API Client]",{isMobile:!0,baseUrl:n,endpoint:e,finalUrl:l,hasAuthToken:!!i.Authorization});try{let o=await fetch(l,{...r,headers:i,credentials:"include"});return console.log("[API Client] Response ".concat(e,":"),{status:o.status}),401!==o.status||window.location.pathname.includes("/login")||(console.warn("401 Unauthorized - Redirecting to login"),localStorage.removeItem("auth_token"),window.location.href="/login"),o}catch(e){throw console.error("[API Client Error]",e),e}}let i={get:(e,o)=>r(e,{method:"GET",token:o}),post:(e,o,t)=>r(e,{method:"POST",body:JSON.stringify(o),token:t}),put:(e,o,t)=>r(e,{method:"PUT",body:JSON.stringify(o),token:t}),patch:(e,o,t)=>r(e,{method:"PATCH",body:JSON.stringify(o),token:t}),delete:(e,o)=>r(e,{method:"DELETE",token:o})}}},function(e){e.O(0,[174,718,971,23,744],function(){return e(e.s=2848)}),_N_E=e.O()}]);