(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[160],{8784:function(e,t,i){Promise.resolve().then(i.bind(i,8947))},8947:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return d}});var n=i(7437),r=i(2265),o=i(6394),a=i(9229);let s={free:{photo_analyses_per_month:15,ocr_analyses_per_month:15,text_analyses_per_month:15,history_days:30,coach_ai:!1,advanced_reports:!1,data_export:!1},premium:{photo_analyses_per_month:15,ocr_analyses_per_month:15,text_analyses_per_month:15,history_days:null,coach_ai:!0,advanced_reports:!0,data_export:!0},unlimited:{photo_analyses_per_month:999999,ocr_analyses_per_month:999999,text_analyses_per_month:999999,history_days:null,coach_ai:!0,advanced_reports:!0,data_export:!0}};var l=i(5591);function d(){let{plan:e,isLoading:t}=(0,o.R)(),[i,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!0),[f,p]=(0,r.useState)(!1),[m,y]=(0,r.useState)(!0),[b,x]=(0,r.useState)(null),[v,j]=(0,r.useState)([]),[_,S]=(0,r.useState)(null);async function w(){try{let e=await l.h.get("/api/user/goals"),t=await e.json();e.ok&&t.goals&&t.goals.goal_type&&p(!0)}catch(e){console.error("Erro ao buscar objetivos:",e)}finally{y(!1)}}async function z(){try{g(!0);let e=await l.h.get("/api/coach/history"),t=await e.json();e.ok&&(j(t.analyses||[]),t.analyses.length>0&&x({analysisText:t.analyses[0].analysis_text,recommendations:t.analyses[0].recommendations,insights:t.analyses[0].insights,warnings:t.analyses[0].warnings,analysis_date:t.analyses[0].analysis_date}))}catch(e){console.error("Erro ao buscar hist\xf3rico:",e)}finally{g(!1)}}async function k(){if(!s[e].coach_ai){d(!0);return}u(!0),S(null);try{let e=await l.h.post("/api/coach/analyze",{}),t=await e.json();if(!e.ok){if(403===e.status&&"upgrade_required"===t.error){d(!0);return}throw Error(t.message||t.error||"Erro ao analisar")}e.ok&&t.analysis&&(x(t.analysis),await z())}catch(e){S(e.message)}finally{u(!1)}}(0,r.useEffect)(()=>{z(),w()},[]),h||v.length;let R=s[e].coach_ai;return(0,n.jsxs)("div",{style:{maxWidth:900,margin:"0 auto",padding:24},children:[(0,n.jsx)(a.x5,{isOpen:i,onClose:()=>d(!1),feature:"coach_analysis",currentPlan:e}),(0,n.jsx)("h1",{style:{fontSize:32,fontWeight:700,marginBottom:24},children:"Coach IA"}),t&&(0,n.jsx)("div",{style:{background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:16,padding:32,textAlign:"center",marginBottom:24},children:(0,n.jsx)("div",{style:{fontSize:16,color:"#6b7280"},children:"Carregando informa\xe7\xf5es..."})}),!t&&!m&&!f&&R&&(0,n.jsx)("div",{style:{background:"#fffbeb",border:"2px solid #fbbf24",borderRadius:16,padding:24,marginBottom:24},children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:16},children:[(0,n.jsx)("div",{style:{fontSize:32}}),(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsx)("h3",{style:{fontSize:18,fontWeight:700,marginBottom:8,color:"#92400e"},children:"Configure seus objetivos primeiro"}),(0,n.jsx)("p",{style:{fontSize:15,color:"#92400e",marginBottom:16},children:"Para receber an\xe1lises personalizadas e relevantes, voc\xea precisa definir seus objetivos (perder/ganhar/manter peso), altura, idade e n\xedvel de atividade."}),(0,n.jsx)("a",{href:"/objetivos",style:{display:"inline-block",padding:"12px 24px",background:"#fbbf24",color:"#92400e",borderRadius:8,fontWeight:600,textDecoration:"none"},children:"Configurar Objetivos Agora"})]})]})}),!t&&(0,n.jsxs)("div",{style:{background:R?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"linear-gradient(135deg, #94a3b8 0%, #64748b 100%)",color:"white",borderRadius:16,padding:32,marginBottom:32,textAlign:"center",position:"relative"},children:[!R&&(0,n.jsx)("div",{style:{position:"absolute",top:16,right:16,background:"#fbbf24",color:"#92400e",padding:"6px 12px",borderRadius:8,fontSize:12,fontWeight:700},children:"PREMIUM"}),(0,n.jsx)("div",{style:{fontSize:48,marginBottom:16},children:""}),(0,n.jsx)("h2",{style:{fontSize:24,fontWeight:700,marginBottom:12},children:R?"An\xe1lise Personalizada":"Recurso Premium"}),(0,n.jsx)("p",{style:{fontSize:16,marginBottom:24,opacity:.9},children:R?"Receba insights baseados no seu peso, medidas e alimenta\xe7\xe3o":"Desbloqueie o Coach IA e receba an\xe1lises personalizadas ilimitadas"}),(0,n.jsx)("button",{onClick:R?k:()=>d(!0),disabled:c||R&&h,style:{padding:"16px 32px",background:"white",color:R?"#667eea":"#64748b",border:"none",borderRadius:12,fontSize:16,fontWeight:700,cursor:c||h?"not-allowed":"pointer",opacity:c||h?.7:1},children:c?" Analisando...":R?" Analisar Agora":" Desbloquear Premium"})]}),!t&&!h&&!b&&0===v.length&&!_&&R&&(0,n.jsxs)("div",{style:{background:"#fffbeb",border:"2px solid #fbbf24",borderRadius:16,padding:32,textAlign:"center",marginBottom:24},children:[(0,n.jsx)("div",{style:{fontSize:48,marginBottom:16}}),(0,n.jsx)("h3",{style:{fontSize:20,fontWeight:700,marginBottom:12,color:"#92400e"},children:"Dados insuficientes para an\xe1lise"}),(0,n.jsx)("p",{style:{fontSize:16,color:"#92400e",marginBottom:24},children:"Para receber insights personalizados, voc\xea precisa ter registrado:"}),(0,n.jsxs)("ul",{style:{listStyle:"none",padding:0,margin:"0 auto",maxWidth:400,textAlign:"left"},children:[(0,n.jsx)("li",{style:{padding:"8px 0",fontSize:15,color:"#92400e"},children:"Peso atual"}),(0,n.jsx)("li",{style:{padding:"8px 0",fontSize:15,color:"#92400e"},children:"Medidas corporais (cintura, quadril, etc.)"}),(0,n.jsx)("li",{style:{padding:"8px 0",fontSize:15,color:"#92400e"},children:"Refei\xe7\xf5es recentes"})]}),(0,n.jsxs)("div",{style:{marginTop:24,display:"flex",gap:12,justifyContent:"center",flexWrap:"wrap"},children:[(0,n.jsx)("a",{href:"/peso",style:{padding:"12px 24px",background:"#fbbf24",color:"#92400e",borderRadius:8,fontWeight:600,textDecoration:"none",display:"inline-block"},children:"Registrar Peso/Medidas"}),(0,n.jsx)("a",{href:"/capture",style:{padding:"12px 24px",background:"#fbbf24",color:"#92400e",borderRadius:8,fontWeight:600,textDecoration:"none",display:"inline-block"},children:"Registrar Refei\xe7\xe3o"})]})]}),c&&(0,n.jsxs)("div",{style:{background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:16,padding:32,marginBottom:24},children:[(0,n.jsxs)("div",{style:{marginBottom:24},children:[(0,n.jsx)("div",{style:{height:20,background:"#e5e7eb",borderRadius:4,marginBottom:12,animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"}}),(0,n.jsx)("div",{style:{height:20,background:"#e5e7eb",borderRadius:4,width:"80%",animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"}})]}),(0,n.jsx)("div",{style:{fontSize:14,color:"#6b7280",textAlign:"center"},children:"Analisando seus dados e gerando insights..."})]}),_&&(0,n.jsx)("div",{style:{padding:16,background:"#fee2e2",border:"2px solid #ef4444",borderRadius:12,color:"#991b1b",marginBottom:24},children:_}),b&&(0,n.jsxs)("div",{children:[b.analysis_date&&(0,n.jsxs)("div",{style:{fontSize:14,color:"#6b7280",marginBottom:16},children:["An\xe1lise de ",new Date(b.analysis_date).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})]}),b.warnings&&b.warnings.length>0&&(0,n.jsxs)("div",{style:{background:"#fef2f2",border:"2px solid #ef4444",borderRadius:16,padding:24,marginBottom:24},children:[(0,n.jsx)("h3",{style:{fontSize:20,fontWeight:700,marginBottom:16,color:"#ef4444"},children:"Alertas Importantes"}),(0,n.jsx)("ul",{style:{paddingLeft:20,margin:0},children:b.warnings.map((e,t)=>(0,n.jsx)("li",{style:{fontSize:16,marginBottom:12,color:"#991b1b"},children:e},t))})]}),(0,n.jsxs)("div",{style:{background:"white",border:"2px solid #e5e7eb",borderRadius:16,padding:24,marginBottom:24},children:[(0,n.jsx)("h3",{style:{fontSize:20,fontWeight:700,marginBottom:16},children:"An\xe1lise Geral"}),(0,n.jsx)("div",{style:{fontSize:16,lineHeight:1.8,color:"#374151",whiteSpace:"pre-wrap"},children:b.analysisText})]}),b.insights&&b.insights.length>0&&(0,n.jsxs)("div",{style:{background:"white",border:"2px solid #3b82f6",borderRadius:16,padding:24,marginBottom:24},children:[(0,n.jsx)("h3",{style:{fontSize:20,fontWeight:700,marginBottom:16,color:"#3b82f6"},children:"Insights Identificados"}),(0,n.jsx)("ul",{style:{paddingLeft:20,margin:0},children:b.insights.map((e,t)=>(0,n.jsx)("li",{style:{fontSize:16,marginBottom:12,color:"#374151"},children:e},t))})]}),b.recommendations&&b.recommendations.length>0&&(0,n.jsxs)("div",{style:{background:"white",border:"2px solid #10b981",borderRadius:16,padding:24,marginBottom:24},children:[(0,n.jsx)("h3",{style:{fontSize:20,fontWeight:700,marginBottom:16,color:"#10b981"},children:"Recomenda\xe7\xf5es Pr\xe1ticas"}),(0,n.jsx)("ul",{style:{paddingLeft:20,margin:0},children:b.recommendations.map((e,t)=>(0,n.jsx)("li",{style:{fontSize:16,marginBottom:12,color:"#374151"},children:e},t))})]})]}),v.length>1&&(0,n.jsxs)("div",{style:{background:"white",border:"2px solid #e5e7eb",borderRadius:16,padding:24,marginTop:32},children:[(0,n.jsx)("h3",{style:{fontSize:20,fontWeight:700,marginBottom:16},children:"Hist\xf3rico de An\xe1lises"}),(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:v.slice(1).map((e,t)=>(0,n.jsx)("button",{onClick:()=>x({analysisText:e.analysis_text,recommendations:e.recommendations,insights:e.insights,warnings:e.warnings,analysis_date:e.analysis_date}),style:{padding:16,background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:12,cursor:"pointer",textAlign:"left",fontSize:14},children:new Date(e.analysis_date).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})},t))})]}),(0,n.jsx)("div",{style:{marginTop:32,padding:16,background:"#f9fafb",borderRadius:12,border:"1px solid #e5e7eb"},children:(0,n.jsx)("p",{style:{margin:0,fontSize:12,color:"#6b7280",textAlign:"center",lineHeight:1.6},children:"As informacoes sao geradas por inteligencia artificial e tem carater informativo. Nao substituem orientacao de nutricionistas ou medicos. Consulte um profissional de saude para orientacoes personalizadas."})})]})}},6463:function(e,t,i){"use strict";var n=i(1169);i.o(n,"usePathname")&&i.d(t,{usePathname:function(){return n.usePathname}}),i.o(n,"useRouter")&&i.d(t,{useRouter:function(){return n.useRouter}}),i.o(n,"useSearchParams")&&i.d(t,{useSearchParams:function(){return n.useSearchParams}})},357:function(e,t,i){"use strict";var n,r;e.exports=(null==(n=i.g.process)?void 0:n.env)&&"object"==typeof(null==(r=i.g.process)?void 0:r.env)?i.g.process:i(8081)},8081:function(e){!function(){var t={229:function(e){var t,i,n,r=e.exports={};function o(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(i){try{return t.call(null,e,0)}catch(i){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var l=[],d=!1,c=-1;function u(){d&&n&&(d=!1,n.length?l=n.concat(l):c=-1,l.length&&h())}function h(){if(!d){var e=s(u);d=!0;for(var t=l.length;t;){for(n=l,l=[];++c<t;)n&&n[c].run();c=-1,t=l.length}n=null,d=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function f(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];l.push(new g(e,t)),1!==l.length||d||s(h)},g.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},i={};function n(e){var r=i[e];if(void 0!==r)return r.exports;var o=i[e]={exports:{}},a=!0;try{t[e](o,o.exports,n),a=!1}finally{a&&delete i[e]}return o.exports}n.ab="//";var r=n(229);e.exports=r}()}},function(e){e.O(0,[323,971,23,744],function(){return e(e.s=8784)}),_N_E=e.O()}]);