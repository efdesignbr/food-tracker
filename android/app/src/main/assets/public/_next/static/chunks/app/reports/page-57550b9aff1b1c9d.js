(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882,398],{51104:function(e,t,o){Promise.resolve().then(o.bind(o,17726))},17726:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return u}});var i=o(57437),n=o(2265),a=o(35087),r=o(45591),s=o(45224),l=o(86394),d=o(68398);let c={breakfast:{label:"Caf\xe9 da Manh\xe3",icon:"",color:"#f59e0b"},lunch:{label:"Almo\xe7o",icon:"",color:"#10b981"},dinner:{label:"Jantar",icon:"",color:"#6366f1"},snack:{label:"Lanche",icon:"",color:"#ec4899"}},g={week:{label:"7 dias",icon:""},month:{label:"30 dias",icon:""},all:{label:"Tudo",icon:""},custom:{label:"Personalizado",icon:""}};function h(e){let[t,o,i]=e.split("-").map(Number);return new Date(t,(o||1)-1,i||1)}function u(){let{plan:e}=(0,l.R)(),[t,o]=(0,n.useState)(!1),[u,f]=(0,n.useState)([]),[m,y]=(0,n.useState)([]),[p,x]=(0,n.useState)(!0),[b,j]=(0,n.useState)(null),[v,S]=(0,n.useState)("week"),[w,z]=(0,n.useState)(""),[_,D]=(0,n.useState)(""),[B,A]=(0,n.useState)({calories:2e3,protein:150,carbs:250,fat:65,water:2e3}),[k,R]=(0,n.useState)(null),[W,C]=(0,n.useState)(!1),[M,F]=(0,n.useState)(null),[P,T]=(0,n.useState)(!1);(0,n.useEffect)(()=>{!async function(){try{x(!0);let[e,t,o]=await Promise.all([r.h.get("/api/meals"),r.h.get("/api/user/profile"),r.h.get("/api/water-intake?history=true")]);if(!e.ok)throw Error("Erro ao buscar refei\xe7\xf5es");let i=await e.json();if(f(i.meals||[]),o.ok){let e=await o.json();y(e.history||[])}if(t.ok){let e=await t.json();A(e.user.goals)}}catch(e){j(e.message)}finally{x(!1)}}()},[]);let E=(0,n.useMemo)(()=>(function(e,t,o,i){if("all"===t)return e;if("custom"===t&&o&&i)return e.filter(e=>{let t=new Date(e.consumed_at);return t>=o&&t<=i});let n=new Date;switch(t){case"week":n.setDate(n.getDate()-7);break;case"month":n.setDate(n.getDate()-30)}return e.filter(e=>new Date(e.consumed_at)>=n)})(u,v,w?h(w):void 0,_?h(_):void 0),[u,v,w,_]),V=(0,n.useMemo)(()=>{if("all"===v)return m;if("custom"===v&&w&&_)return m.filter(e=>e.date>=w&&e.date<=_);let e=new Date;return"week"===v?e.setDate(e.getDate()-7):"month"===v&&e.setDate(e.getDate()-30),m.filter(t=>t.date>=(0,a.YX)(e))},[m,v,w,_]),I=(0,n.useMemo)(()=>{let e;let t=E.length,o=E.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.calories||0),0),0),i=E.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.protein_g||0),0),0),n=E.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.carbs_g||0),0),0),a=E.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.fat_g||0),0),0),r=E.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.fiber_g||0),0),0),s=E.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.sodium_mg||0),0),0),l=E.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.sugar_g||0),0),0),d=E.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.cholesterol_mg||0),0),0),c=E.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.saturated_fat_g||0),0),0),g=E.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.calcium_mg||0),0),0),u=E.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.magnesium_mg||0),0),0),f=E.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.phosphorus_mg||0),0),0),m=E.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.iron_mg||0),0),0),y=E.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.potassium_mg||0),0),0),p=E.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.zinc_mg||0),0),0),x=E.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.copper_mg||0),0),0),b=E.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.manganese_mg||0),0),0),j=E.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.vitamin_c_mg||0),0),0),S=E.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.vitamin_a_mcg||0),0),0),z=E.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.vitamin_b1_mg||0),0),0),D=E.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.vitamin_b2_mg||0),0),0),B=E.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.vitamin_b3_mg||0),0),0),A=E.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.vitamin_b6_mg||0),0),0),k={};E.forEach(e=>{let t=e.foods.reduce((e,t)=>e+(t.calories||0),0);k[e.meal_type]||(k[e.meal_type]={total:0,count:0}),k[e.meal_type].total+=t,k[e.meal_type].count+=1});let R={};E.forEach(e=>{e.foods.forEach(e=>{let t=e.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\b(natural|desnatado|integral|light|zero|diet)\b/gi,"").replace(/\s+/g," ").trim();t.endsWith("s")&&!t.endsWith("ss")&&(t=t.slice(0,-1)),R[t]=(R[t]||0)+1})});let W=Object.entries(R).sort((e,t)=>{let[,o]=e,[,i]=t;return i-o}).slice(0,10),C=new Map;E.forEach(e=>{let t=new Date(e.consumed_at).toLocaleDateString("pt-BR"),o=e.foods.reduce((e,t)=>e+(t.calories||0),0);C.set(t,(C.get(t)||0)+o)});let M=[],F=new Date;"custom"===v&&w&&_?(e=h(w),F=h(_)):"week"===v?(e=new Date).setDate(e.getDate()-6):"month"===v?(e=new Date).setDate(e.getDate()-29):(e=new Date).setDate(e.getDate()-6);let P=Math.ceil((F.getTime()-e.getTime())/864e5);for(let e=Math.min(P+1,30)-1;e>=0;e--){let t=new Date(F);t.setDate(t.getDate()-e);let o=t.toLocaleDateString("pt-BR");M.push({date:o,dateObj:t,calories:C.get(o)||0})}let T=C.size>0?Array.from(C.values()).reduce((e,t)=>e+t,0)/C.size:0,I=V.reduce((e,t)=>e+t.total_ml,0),N=V.length>0?I/V.length:0,L=V.filter(e=>e.total_ml>0).length,O={home:0,out:0},G={};return E.forEach(e=>{"out"===e.location_type?(O.out+=1,e.restaurant_name&&(G[e.restaurant_name]=(G[e.restaurant_name]||0)+1)):O.home+=1}),{totalMeals:t,totalCalories:o,totalProtein:i,totalCarbs:n,totalFat:a,totalFiber:r,totalSodium:s,totalSugar:l,avgCaloriesPerMeal:t>0?o/t:0,avgCaloriesPerDay:T,caloriesByType:k,topFoods:W,last7Days:M,totalWater:I,avgWaterPerDay:N,daysWithWater:L,locationCounts:O,topRestaurants:Object.entries(G).sort((e,t)=>t[1]-e[1]).slice(0,5),totalCholesterol:d,totalSaturatedFat:c,totalCalcium:g,totalMagnesium:u,totalPhosphorus:f,totalIron:m,totalPotassium:y,totalZinc:p,totalCopper:x,totalManganese:b,totalVitaminC:j,totalVitaminA:S,totalVitaminB1:z,totalVitaminB2:D,totalVitaminB3:B,totalVitaminB6:A}},[E,V,v,w,_]),N=async()=>{if(0===E.length){F("Nenhuma refei\xe7\xe3o dispon\xedvel para an\xe1lise");return}try{let e,t;if(C(!0),F(null),"custom"===v&&w&&_)e=w,t=_;else{let o=new Date;switch(v){case"week":o.setDate(o.getDate()-7);break;case"month":o.setDate(o.getDate()-30);break;case"all":if(u.length>0){let e=u.reduce((e,t)=>new Date(t.consumed_at)<new Date(e.consumed_at)?t:e);o.setTime(new Date(e.consumed_at).getTime())}}e=(0,a.YX)(o),t=(0,a.xk)()}let o=await (0,s.q)(o=>(0,r.x)("/api/reports/analysis",{method:"POST",headers:{"Content-Type":"application/json",...o||{}},body:JSON.stringify({start_date:e,end_date:t,goals:B})}),{feature:"ai_reports"});if(!o.ok){let e=await o.json(),t=(0,s.p)(o,e);if(t)throw Error(t);if(499===o.status)return;throw Error(e.error||"Erro ao analisar per\xedodo")}let i=await o.json();R(i.analysis),T(!0)}catch(e){F(e.message||"Erro ao solicitar an\xe1lise")}finally{C(!1)}};return p?(0,i.jsx)("div",{style:{padding:24,maxWidth:1200,margin:"0 auto"},children:(0,i.jsxs)("div",{style:{textAlign:"center",padding:48},children:[(0,i.jsx)("div",{style:{fontSize:48,marginBottom:16}}),(0,i.jsx)("p",{style:{color:"#666",fontSize:16},children:"Carregando..."})]})}):b?(0,i.jsx)("div",{style:{padding:24,maxWidth:1200,margin:"0 auto"},children:(0,i.jsxs)("div",{style:{padding:24,background:"#fee2e2",border:"2px solid #ef4444",borderRadius:12,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:48,marginBottom:8}}),(0,i.jsx)("p",{style:{color:"#991b1b",margin:0},children:b})]})}):(0,i.jsxs)("div",{style:{padding:16,maxWidth:1200,margin:"0 auto",paddingBottom:80},children:[(0,i.jsx)("h1",{style:{fontSize:28,fontWeight:700,marginBottom:16},children:" Relat\xf3rios"}),(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:8,marginBottom:16},children:Object.keys(g).map(e=>(0,i.jsxs)("button",{onClick:()=>{S(e),"custom"!==e&&(T(!1),R(null))},style:{padding:"12px 8px",border:"none",background:v===e?"#2196F3":"white",color:v===e?"white":"#666",borderRadius:12,fontWeight:600,fontSize:14,cursor:"pointer",boxShadow:v===e?"0 4px 12px rgba(33, 150, 243, 0.3)":"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.2s",display:"flex",flexDirection:"column",alignItems:"center",gap:4},children:[(0,i.jsx)("span",{style:{fontSize:18},children:g[e].icon}),(0,i.jsx)("span",{children:g[e].label})]},e))}),"custom"===v&&(0,i.jsxs)("div",{style:{background:"white",borderRadius:12,padding:16,marginBottom:16,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"2px solid #2196F3"},children:[(0,i.jsx)("div",{style:{marginBottom:12,fontWeight:600,color:"#374151",fontSize:14},children:"Selecione o Per\xedodo"}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[(0,i.jsxs)("div",{style:{width:"100%"},children:[(0,i.jsx)("label",{style:{display:"block",fontSize:12,color:"#666",marginBottom:4},children:"Data Inicial"}),(0,i.jsx)("input",{type:"date",value:w,onChange:e=>z(e.target.value),style:{appearance:"none",WebkitAppearance:"none",display:"block",width:"100%",boxSizing:"border-box",padding:"10px 12px",margin:0,borderRadius:8,border:"1px solid #d1d5db",backgroundColor:"white",fontSize:16,color:"#374151",minHeight:44}})]}),(0,i.jsxs)("div",{style:{width:"100%"},children:[(0,i.jsx)("label",{style:{display:"block",fontSize:12,color:"#666",marginBottom:4},children:"Data Final"}),(0,i.jsx)("input",{type:"date",value:_,onChange:e=>D(e.target.value),style:{appearance:"none",WebkitAppearance:"none",display:"block",width:"100%",boxSizing:"border-box",padding:"10px 12px",margin:0,borderRadius:8,border:"1px solid #d1d5db",backgroundColor:"white",fontSize:16,color:"#374151",minHeight:44}})]})]})]}),E.length>0&&(0,i.jsx)("button",{onClick:N,disabled:W,style:{width:"100%",padding:"16px",border:"none",background:W?"#9ca3af":"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",color:"white",borderRadius:12,fontWeight:700,fontSize:16,cursor:W?"not-allowed":"pointer",boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)",transition:"all 0.2s",marginBottom:24,display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:W?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{}),(0,i.jsx)("span",{children:"Analisando com IA..."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{}),(0,i.jsx)("span",{children:"Analisar Per\xedodo com IA"})]})}),M&&(0,i.jsx)("div",{style:{padding:16,background:"#fee2e2",border:"2px solid #ef4444",borderRadius:12,marginBottom:24,color:"#991b1b",fontSize:14},children:M}),P&&k&&(0,i.jsxs)("div",{style:{background:"white",borderRadius:16,padding:20,marginBottom:24,boxShadow:"0 4px 16px rgba(139, 92, 246, 0.2)",border:"2px solid #8b5cf6"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,i.jsx)("h2",{style:{fontSize:20,fontWeight:700,color:"#8b5cf6",margin:0},children:"An\xe1lise da IA"}),(0,i.jsx)("button",{onClick:()=>T(!1),style:{background:"none",border:"none",fontSize:20,cursor:"pointer",color:"#9ca3af",padding:4}})]}),(0,i.jsxs)("div",{style:{padding:16,background:"#f3f4f6",borderRadius:12,marginBottom:16,borderLeft:"4px solid #8b5cf6"},children:[(0,i.jsx)("div",{style:{fontWeight:600,fontSize:14,color:"#374151",marginBottom:8},children:"Resumo"}),(0,i.jsx)("p",{style:{margin:0,fontSize:14,color:"#4b5563",lineHeight:1.6},children:k.summary})]}),(0,i.jsxs)("div",{style:{display:"grid",gap:12,marginBottom:16},children:[(0,i.jsxs)("div",{style:{padding:14,background:"#fef3c7",borderRadius:8},children:[(0,i.jsx)("div",{style:{fontWeight:600,fontSize:13,color:"#92400e",marginBottom:6},children:"Balan\xe7o Cal\xf3rico"}),(0,i.jsx)("p",{style:{margin:0,fontSize:13,color:"#78350f",lineHeight:1.5},children:k.caloric_balance})]}),(0,i.jsxs)("div",{style:{padding:14,background:"#dbeafe",borderRadius:8},children:[(0,i.jsx)("div",{style:{fontWeight:600,fontSize:13,color:"#1e40af",marginBottom:6},children:"Macronutrientes"}),(0,i.jsx)("p",{style:{margin:0,fontSize:13,color:"#1e3a8a",lineHeight:1.5},children:k.macronutrient_distribution})]}),(0,i.jsxs)("div",{style:{padding:14,background:"#fee2e2",borderRadius:8},children:[(0,i.jsx)("div",{style:{fontWeight:600,fontSize:13,color:"#991b1b",marginBottom:6},children:"Alimentos Inflamat\xf3rios"}),(0,i.jsx)("p",{style:{margin:0,fontSize:13,color:"#7f1d1d",lineHeight:1.5},children:k.inflammatory_foods})]}),(0,i.jsxs)("div",{style:{padding:14,background:"#dcfce7",borderRadius:8},children:[(0,i.jsx)("div",{style:{fontWeight:600,fontSize:13,color:"#166534",marginBottom:6},children:"Regularidade das Refei\xe7\xf5es"}),(0,i.jsx)("p",{style:{margin:0,fontSize:13,color:"#14532d",lineHeight:1.5},children:k.meal_regularity})]}),(0,i.jsxs)("div",{style:{padding:14,background:"#e0f2fe",borderRadius:8},children:[(0,i.jsx)("div",{style:{fontWeight:600,fontSize:13,color:"#075985",marginBottom:6},children:"Hidrata\xe7\xe3o"}),(0,i.jsx)("p",{style:{margin:0,fontSize:13,color:"#0c4a6e",lineHeight:1.5},children:k.hydration})]})]}),(0,i.jsxs)("div",{style:{padding:16,background:"#f0fdf4",borderRadius:12,border:"2px solid #10b981"},children:[(0,i.jsx)("div",{style:{fontWeight:600,fontSize:14,color:"#166534",marginBottom:10},children:"Sugest\xf5es de Melhoria"}),(0,i.jsx)("ul",{style:{margin:0,paddingLeft:20,fontSize:13,color:"#14532d",lineHeight:1.7},children:k.suggestions.map((e,t)=>(0,i.jsx)("li",{style:{marginBottom:6},children:e},t))})]}),(0,i.jsx)("p",{style:{margin:"16px 0 0 0",fontSize:11,color:"#9ca3af",textAlign:"center",lineHeight:1.5},children:"Analise gerada por inteligencia artificial. Nao substitui orientacao de profissionais de saude."})]}),E.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:12,marginBottom:24},children:[(0,i.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:16,borderRadius:12,color:"white"},children:[(0,i.jsx)("div",{style:{fontSize:12,opacity:.9},children:"Refei\xe7\xf5es"}),(0,i.jsx)("div",{style:{fontSize:28,fontWeight:700},children:I.totalMeals})]}),(0,i.jsxs)("div",{style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",padding:16,borderRadius:12,color:"white"},children:[(0,i.jsx)("div",{style:{fontSize:12,opacity:.9},children:"Total"}),(0,i.jsx)("div",{style:{fontSize:28,fontWeight:700},children:I.totalCalories.toFixed(0)}),(0,i.jsx)("div",{style:{fontSize:11,opacity:.8},children:"kcal"})]}),(0,i.jsxs)("div",{style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",padding:16,borderRadius:12,color:"white"},children:[(0,i.jsx)("div",{style:{fontSize:12,opacity:.9},children:"M\xe9dia/Ref"}),(0,i.jsx)("div",{style:{fontSize:28,fontWeight:700},children:I.avgCaloriesPerMeal.toFixed(0)}),(0,i.jsx)("div",{style:{fontSize:11,opacity:.8},children:"kcal"})]}),(0,i.jsxs)("div",{style:{background:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",padding:16,borderRadius:12,color:"white"},children:[(0,i.jsx)("div",{style:{fontSize:12,opacity:.9},children:"M\xe9dia/Dia"}),(0,i.jsx)("div",{style:{fontSize:28,fontWeight:700},children:I.avgCaloriesPerDay.toFixed(0)}),(0,i.jsx)("div",{style:{fontSize:11,opacity:.8},children:"kcal"})]}),(0,i.jsxs)("div",{style:{background:"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)",padding:16,borderRadius:12,color:"white"},children:[(0,i.jsx)("div",{style:{fontSize:12,opacity:.9},children:" \xc1gua Total"}),(0,i.jsxs)("div",{style:{fontSize:28,fontWeight:700},children:[(I.totalWater/1e3).toFixed(1),"L"]}),(0,i.jsxs)("div",{style:{fontSize:11,opacity:.8},children:[I.daysWithWater," dias"]})]})]}),("free"!==e||t)&&(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:20,marginBottom:24,alignItems:"stretch"},children:[(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)("h2",{style:{fontSize:18,fontWeight:700,marginBottom:16,color:"#374151"},children:"Nutrientes no Per\xedodo"}),"free"===e&&!t&&(0,i.jsxs)("div",{style:{padding:12,background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:8,marginBottom:12},children:[(0,i.jsx)("div",{style:{fontSize:13,color:"#92400e",marginBottom:8},children:"Para ver detalhes completos deste per\xedodo, assista a um an\xfancio."}),(0,i.jsx)("button",{onClick:async()=>{await (0,d.showRewardedAd)("reports_extra")&&o(!0)},style:{padding:"8px 12px",background:"#fbbf24",color:"#92400e",border:"none",borderRadius:8,fontWeight:700,cursor:"pointer"},children:"Desbloquear com an\xfancio"})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:10,marginBottom:12,flex:1},children:[(0,i.jsxs)("div",{style:{background:"linear-gradient(to top, #16a34a ".concat(Math.min(I.totalProtein/(B.protein*I.last7Days.length)*100,100),"%, #6b7280 ").concat(Math.min(I.totalProtein/(B.protein*I.last7Days.length)*100,100),"%)"),borderRadius:10,padding:12,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:11,color:"white",marginBottom:4,fontWeight:600},children:"Prote\xedna"}),(0,i.jsxs)("div",{style:{fontSize:18,fontWeight:700,color:"white"},children:[I.totalProtein.toFixed(0),"g"]}),(0,i.jsxs)("div",{style:{fontSize:10,color:"rgba(255,255,255,0.8)"},children:["Meta: ",B.protein*I.last7Days.length,"g"]})]}),(0,i.jsxs)("div",{style:{background:"linear-gradient(to top, #16a34a ".concat(Math.min(I.totalCarbs/(B.carbs*I.last7Days.length)*100,100),"%, #6b7280 ").concat(Math.min(I.totalCarbs/(B.carbs*I.last7Days.length)*100,100),"%)"),borderRadius:10,padding:12,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:11,color:"white",marginBottom:4,fontWeight:600},children:"Carbos"}),(0,i.jsxs)("div",{style:{fontSize:18,fontWeight:700,color:"white"},children:[I.totalCarbs.toFixed(0),"g"]}),(0,i.jsxs)("div",{style:{fontSize:10,color:"rgba(255,255,255,0.8)"},children:["Meta: ",B.carbs*I.last7Days.length,"g"]})]}),(0,i.jsxs)("div",{style:{background:"linear-gradient(to top, #16a34a ".concat(Math.min(I.totalFat/(B.fat*I.last7Days.length)*100,100),"%, #6b7280 ").concat(Math.min(I.totalFat/(B.fat*I.last7Days.length)*100,100),"%)"),borderRadius:10,padding:12,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:11,color:"white",marginBottom:4,fontWeight:600},children:"Gorduras"}),(0,i.jsxs)("div",{style:{fontSize:18,fontWeight:700,color:"white"},children:[I.totalFat.toFixed(0),"g"]}),(0,i.jsxs)("div",{style:{fontSize:10,color:"rgba(255,255,255,0.8)"},children:["Meta: ",B.fat*I.last7Days.length,"g"]})]}),(0,i.jsxs)("div",{style:{background:"linear-gradient(to top, #16a34a ".concat(Math.min(I.totalFiber/(25*I.last7Days.length)*100,100),"%, #6b7280 ").concat(Math.min(I.totalFiber/(25*I.last7Days.length)*100,100),"%)"),borderRadius:10,padding:12,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:11,color:"white",marginBottom:4,fontWeight:600},children:"Fibras"}),(0,i.jsxs)("div",{style:{fontSize:18,fontWeight:700,color:"white"},children:[I.totalFiber.toFixed(0),"g"]}),(0,i.jsxs)("div",{style:{fontSize:10,color:"rgba(255,255,255,0.8)"},children:["Meta: ",25*I.last7Days.length,"g"]})]}),(0,i.jsxs)("div",{style:{background:"linear-gradient(to top, #dc2626 ".concat(Math.min(I.totalSugar/(50*I.last7Days.length)*100,100),"%, #6b7280 ").concat(Math.min(I.totalSugar/(50*I.last7Days.length)*100,100),"%)"),borderRadius:10,padding:12,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:11,color:"white",marginBottom:4,fontWeight:600},children:"A\xe7\xfacar"}),(0,i.jsxs)("div",{style:{fontSize:18,fontWeight:700,color:"white"},children:[I.totalSugar.toFixed(0),"g"]}),(0,i.jsxs)("div",{style:{fontSize:10,color:"rgba(255,255,255,0.8)"},children:["Limite: ",50*I.last7Days.length,"g"]})]}),(0,i.jsxs)("div",{style:{background:"linear-gradient(to top, #dc2626 ".concat(Math.min(I.totalSodium/(2300*I.last7Days.length)*100,100),"%, #6b7280 ").concat(Math.min(I.totalSodium/(2300*I.last7Days.length)*100,100),"%)"),borderRadius:10,padding:12,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:11,color:"white",marginBottom:4,fontWeight:600},children:"S\xf3dio"}),(0,i.jsxs)("div",{style:{fontSize:18,fontWeight:700,color:"white"},children:[(I.totalSodium/1e3).toFixed(1),"g"]}),(0,i.jsxs)("div",{style:{fontSize:10,color:"rgba(255,255,255,0.8)"},children:["Limite: ",(2300*I.last7Days.length/1e3).toFixed(1),"g"]})]})]}),(0,i.jsx)("div",{style:{background:"linear-gradient(to top, #0891b2 ".concat(Math.min(I.avgWaterPerDay/B.water*100,100),"%, #9ca3af ").concat(Math.min(I.avgWaterPerDay/B.water*100,100),"%)"),borderRadius:10,padding:12},children:(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:11,color:"white",marginBottom:4,fontWeight:600},children:"\xc1gua"}),(0,i.jsxs)("div",{style:{fontSize:18,fontWeight:700,color:"white"},children:[(I.totalWater/1e3).toFixed(1),"L total"]})]}),(0,i.jsxs)("div",{style:{textAlign:"right"},children:[(0,i.jsxs)("div",{style:{fontSize:14,fontWeight:600,color:"white"},children:[I.avgWaterPerDay.toFixed(0),"ml/dia"]}),(0,i.jsxs)("div",{style:{fontSize:10,color:"rgba(255,255,255,0.8)"},children:["Meta: ",B.water,"ml/dia"]})]})]})})]}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)("h2",{style:{fontSize:18,fontWeight:700,marginBottom:16,color:"#374151"},children:"Calorias por Tipo de Refei\xe7\xe3o"}),(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:10,flex:1,justifyContent:"space-between"},children:Object.entries(I.caloriesByType).map(e=>{let[t,o]=e,n=c[t]||c.lunch,a=o.total/o.count;return(0,i.jsxs)("div",{style:{padding:14,background:"#f9fafb",borderRadius:10,border:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,i.jsx)("span",{style:{fontSize:22},children:n.icon}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontWeight:600,fontSize:14,color:n.color},children:n.label}),(0,i.jsxs)("div",{style:{fontSize:11,color:"#6b7280"},children:[o.count," refei\xe7\xf5es"]})]})]}),(0,i.jsxs)("div",{style:{textAlign:"right"},children:[(0,i.jsxs)("div",{style:{fontSize:18,fontWeight:700,color:n.color},children:[o.total.toFixed(0)," kcal"]}),(0,i.jsxs)("div",{style:{fontSize:11,color:"#6b7280"},children:["~",a.toFixed(0)," kcal/ref"]})]})]},t)})})]})]}),(0,i.jsxs)("div",{style:{marginBottom:24},children:[(0,i.jsxs)("h2",{style:{fontSize:18,fontWeight:700,marginBottom:4,color:"#374151"},children:["Evolu\xe7\xe3o (",I.last7Days.length," dias)"]}),(0,i.jsxs)("div",{style:{fontSize:12,color:"#6b7280",marginBottom:16},children:["Meta: ",B.calories," kcal/dia"]}),(0,i.jsxs)("div",{style:{position:"relative",height:200},children:[(0,i.jsx)("div",{style:{position:"absolute",bottom:164,left:0,right:0,borderTop:"2px dashed #9ca3af",opacity:.6}}),(0,i.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",height:"100%",paddingBottom:24,gap:4},children:I.last7Days.map((e,t)=>{let o=B.calories>0?Math.round(e.calories/B.calories*140):0,n=e.calories>B.calories;return(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[e.calories>0&&(0,i.jsx)("div",{style:{fontSize:9,fontWeight:600,color:n?"#ef4444":"#10b981",marginBottom:2},children:e.calories.toFixed(0)}),(0,i.jsx)("div",{style:{width:"100%",height:Math.min(o,160),background:0===e.calories?"#e5e7eb":n?"#ef4444":"#10b981",borderRadius:"3px 3px 0 0",minHeight:e.calories>0?8:4}}),(0,i.jsx)("div",{style:{fontSize:9,color:"#6b7280",marginTop:4,textAlign:"center",fontWeight:500},children:e.dateObj.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})})]},t)})})]})]}),("free"!==e||t)&&(I.totalCalcium>0||I.totalIron>0||I.totalVitaminC>0||I.totalMagnesium>0||I.totalPotassium>0||I.totalZinc>0)&&(0,i.jsxs)("div",{style:{background:"white",borderRadius:16,padding:20,marginBottom:24,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb"},children:[(0,i.jsx)("h2",{style:{fontSize:18,fontWeight:700,marginBottom:16,color:"#374151"},children:"Micronutrientes no Per\xedodo"}),(0,i.jsxs)("div",{style:{marginBottom:16},children:[(0,i.jsx)("div",{style:{fontSize:12,fontWeight:600,color:"#6b7280",marginBottom:8},children:"Minerais"}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8},children:[I.totalCalcium>0&&(0,i.jsxs)("div",{style:{background:"#fef3c7",padding:10,borderRadius:8,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:10,color:"#92400e",marginBottom:2},children:"C\xe1lcio"}),(0,i.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#b45309"},children:[I.totalCalcium.toFixed(0),"mg"]}),(0,i.jsxs)("div",{style:{fontSize:9,color:"#92400e"},children:["Meta: ",1e3*I.last7Days.length,"mg"]})]}),I.totalIron>0&&(0,i.jsxs)("div",{style:{background:"#fee2e2",padding:10,borderRadius:8,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:10,color:"#991b1b",marginBottom:2},children:"Ferro"}),(0,i.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#dc2626"},children:[I.totalIron.toFixed(1),"mg"]}),(0,i.jsxs)("div",{style:{fontSize:9,color:"#991b1b"},children:["Meta: ",14*I.last7Days.length,"mg"]})]}),I.totalMagnesium>0&&(0,i.jsxs)("div",{style:{background:"#d1fae5",padding:10,borderRadius:8,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:10,color:"#065f46",marginBottom:2},children:"Magn\xe9sio"}),(0,i.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#059669"},children:[I.totalMagnesium.toFixed(0),"mg"]}),(0,i.jsxs)("div",{style:{fontSize:9,color:"#065f46"},children:["Meta: ",400*I.last7Days.length,"mg"]})]}),I.totalPhosphorus>0&&(0,i.jsxs)("div",{style:{background:"#e0e7ff",padding:10,borderRadius:8,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:10,color:"#3730a3",marginBottom:2},children:"F\xf3sforo"}),(0,i.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#4f46e5"},children:[I.totalPhosphorus.toFixed(0),"mg"]}),(0,i.jsxs)("div",{style:{fontSize:9,color:"#3730a3"},children:["Meta: ",700*I.last7Days.length,"mg"]})]}),I.totalPotassium>0&&(0,i.jsxs)("div",{style:{background:"#fce7f3",padding:10,borderRadius:8,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:10,color:"#9d174d",marginBottom:2},children:"Pot\xe1ssio"}),(0,i.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#db2777"},children:[(I.totalPotassium/1e3).toFixed(1),"g"]}),(0,i.jsxs)("div",{style:{fontSize:9,color:"#9d174d"},children:["Meta: ",(3500*I.last7Days.length/1e3).toFixed(1),"g"]})]}),I.totalZinc>0&&(0,i.jsxs)("div",{style:{background:"#cffafe",padding:10,borderRadius:8,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:10,color:"#155e75",marginBottom:2},children:"Zinco"}),(0,i.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#0891b2"},children:[I.totalZinc.toFixed(1),"mg"]}),(0,i.jsxs)("div",{style:{fontSize:9,color:"#155e75"},children:["Meta: ",11*I.last7Days.length,"mg"]})]}),I.totalCopper>0&&(0,i.jsxs)("div",{style:{background:"#fed7aa",padding:10,borderRadius:8,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:10,color:"#9a3412",marginBottom:2},children:"Cobre"}),(0,i.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#ea580c"},children:[I.totalCopper.toFixed(2),"mg"]}),(0,i.jsxs)("div",{style:{fontSize:9,color:"#9a3412"},children:["Meta: ",.9*I.last7Days.length,"mg"]})]}),I.totalManganese>0&&(0,i.jsxs)("div",{style:{background:"#f5d0fe",padding:10,borderRadius:8,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:10,color:"#86198f",marginBottom:2},children:"Mangan\xeas"}),(0,i.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#a21caf"},children:[I.totalManganese.toFixed(2),"mg"]}),(0,i.jsxs)("div",{style:{fontSize:9,color:"#86198f"},children:["Meta: ",2.3*I.last7Days.length,"mg"]})]})]})]}),(I.totalVitaminC>0||I.totalVitaminA>0||I.totalVitaminB1>0||I.totalVitaminB2>0||I.totalVitaminB3>0||I.totalVitaminB6>0)&&(0,i.jsxs)("div",{style:{marginBottom:16},children:[(0,i.jsx)("div",{style:{fontSize:12,fontWeight:600,color:"#6b7280",marginBottom:8},children:"Vitaminas"}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:[I.totalVitaminA>0&&(0,i.jsxs)("div",{style:{background:"#ffedd5",padding:10,borderRadius:8,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:10,color:"#9a3412",marginBottom:2},children:"Vitamina A"}),(0,i.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#ea580c"},children:[I.totalVitaminA.toFixed(0),"mcg"]}),(0,i.jsxs)("div",{style:{fontSize:9,color:"#9a3412"},children:["Meta: ",900*I.last7Days.length,"mcg"]})]}),I.totalVitaminC>0&&(0,i.jsxs)("div",{style:{background:"#fef9c3",padding:10,borderRadius:8,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:10,color:"#854d0e",marginBottom:2},children:"Vitamina C"}),(0,i.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#ca8a04"},children:[I.totalVitaminC.toFixed(0),"mg"]}),(0,i.jsxs)("div",{style:{fontSize:9,color:"#854d0e"},children:["Meta: ",90*I.last7Days.length,"mg"]})]}),I.totalVitaminB1>0&&(0,i.jsxs)("div",{style:{background:"#ecfccb",padding:10,borderRadius:8,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:10,color:"#3f6212",marginBottom:2},children:"Vitamina B1"}),(0,i.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#65a30d"},children:[I.totalVitaminB1.toFixed(2),"mg"]}),(0,i.jsxs)("div",{style:{fontSize:9,color:"#3f6212"},children:["Meta: ",1.2*I.last7Days.length,"mg"]})]}),I.totalVitaminB2>0&&(0,i.jsxs)("div",{style:{background:"#d9f99d",padding:10,borderRadius:8,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:10,color:"#365314",marginBottom:2},children:"Vitamina B2"}),(0,i.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#4d7c0f"},children:[I.totalVitaminB2.toFixed(2),"mg"]}),(0,i.jsxs)("div",{style:{fontSize:9,color:"#365314"},children:["Meta: ",1.3*I.last7Days.length,"mg"]})]}),I.totalVitaminB3>0&&(0,i.jsxs)("div",{style:{background:"#a7f3d0",padding:10,borderRadius:8,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:10,color:"#14532d",marginBottom:2},children:"Vitamina B3"}),(0,i.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#16a34a"},children:[I.totalVitaminB3.toFixed(1),"mg"]}),(0,i.jsxs)("div",{style:{fontSize:9,color:"#14532d"},children:["Meta: ",16*I.last7Days.length,"mg"]})]}),I.totalVitaminB6>0&&(0,i.jsxs)("div",{style:{background:"#99f6e4",padding:10,borderRadius:8,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:10,color:"#134e4a",marginBottom:2},children:"Vitamina B6"}),(0,i.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#0d9488"},children:[I.totalVitaminB6.toFixed(2),"mg"]}),(0,i.jsxs)("div",{style:{fontSize:9,color:"#134e4a"},children:["Meta: ",1.7*I.last7Days.length,"mg"]})]})]})]}),(I.totalCholesterol>0||I.totalSaturatedFat>0)&&(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:12,fontWeight:600,color:"#6b7280",marginBottom:8},children:"Limites de Aten\xe7\xe3o"}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:8},children:[I.totalCholesterol>0&&(0,i.jsxs)("div",{style:{background:I.totalCholesterol>300*I.last7Days.length?"#fecaca":"#f3f4f6",padding:10,borderRadius:8,textAlign:"center",border:I.totalCholesterol>300*I.last7Days.length?"2px solid #ef4444":"1px solid #e5e7eb"},children:[(0,i.jsx)("div",{style:{fontSize:10,color:"#991b1b",marginBottom:2},children:"Colesterol"}),(0,i.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:I.totalCholesterol>300*I.last7Days.length?"#ef4444":"#374151"},children:[I.totalCholesterol.toFixed(0),"mg"]}),(0,i.jsxs)("div",{style:{fontSize:9,color:"#991b1b"},children:["Limite: ",300*I.last7Days.length,"mg"]})]}),I.totalSaturatedFat>0&&(0,i.jsxs)("div",{style:{background:I.totalSaturatedFat>22*I.last7Days.length?"#fecaca":"#f3f4f6",padding:10,borderRadius:8,textAlign:"center",border:I.totalSaturatedFat>22*I.last7Days.length?"2px solid #ef4444":"1px solid #e5e7eb"},children:[(0,i.jsx)("div",{style:{fontSize:10,color:"#9f1239",marginBottom:2},children:"G. Saturada"}),(0,i.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:I.totalSaturatedFat>22*I.last7Days.length?"#ef4444":"#374151"},children:[I.totalSaturatedFat.toFixed(1),"g"]}),(0,i.jsxs)("div",{style:{fontSize:9,color:"#9f1239"},children:["Limite: ",22*I.last7Days.length,"g"]})]})]})]})]}),(0,i.jsxs)("div",{style:{display:"grid",gap:16,marginBottom:24},children:[(0,i.jsxs)("div",{style:{background:"white",borderRadius:16,padding:20,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb"},children:[(0,i.jsx)("h2",{style:{fontSize:18,fontWeight:700,marginBottom:12,color:"#374151"},children:"Locais das Refei\xe7\xf5es"}),(0,i.jsxs)("div",{style:{display:"flex",gap:12,marginBottom:12},children:[(0,i.jsxs)("div",{style:{flex:1,background:"#ecfdf5",border:"1px solid #d1fae5",borderRadius:12,padding:12},children:[(0,i.jsx)("div",{style:{fontSize:12,color:"#065f46",marginBottom:4},children:" Casa"}),(0,i.jsx)("div",{style:{fontSize:20,fontWeight:700,color:"#10b981"},children:I.locationCounts.home})]}),(0,i.jsxs)("div",{style:{flex:1,background:"#fffbeb",border:"1px solid #fde68a",borderRadius:12,padding:12},children:[(0,i.jsx)("div",{style:{fontSize:12,color:"#92400e",marginBottom:4},children:" Fora"}),(0,i.jsx)("div",{style:{fontSize:20,fontWeight:700,color:"#f59e0b"},children:I.locationCounts.out})]})]}),I.topRestaurants.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:12,color:"#6b7280",marginBottom:6},children:"Top Restaurantes"}),(0,i.jsx)("div",{style:{display:"grid",gap:6},children:I.topRestaurants.map(e=>{let[t,o]=e;return(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 10px",background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:8},children:[(0,i.jsx)("span",{style:{fontSize:14,color:"#374151"},children:t}),(0,i.jsxs)("span",{style:{fontSize:14,fontWeight:700,color:"#6b7280"},children:[o,"x"]})]},t)})})]})]}),I.topFoods.length>0&&(0,i.jsxs)("div",{style:{background:"white",borderRadius:16,padding:20,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb"},children:[(0,i.jsx)("h2",{style:{fontSize:18,fontWeight:700,marginBottom:16,color:"#374151"},children:"\uD83C\uDFC6 Top 10 Alimentos Mais Consumidos"}),(0,i.jsx)("div",{style:{display:"grid",gap:8},children:I.topFoods.map((e,t)=>{let[o,n]=e;return(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",background:t<3?"#fef3c7":"#f9fafb",borderRadius:8,border:t<3?"1px solid #fbbf24":"1px solid #e5e7eb"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,i.jsx)("span",{style:{fontSize:18,fontWeight:700,color:t<3?"#f59e0b":"#9ca3af",minWidth:24},children:0===t?"\uD83E\uDD47":1===t?"\uD83E\uDD48":2===t?"\uD83E\uDD49":"".concat(t+1,".")}),(0,i.jsx)("span",{style:{fontWeight:600,fontSize:15,textTransform:"capitalize",color:"#374151"},children:o})]}),(0,i.jsxs)("span",{style:{fontSize:16,fontWeight:700,color:t<3?"#f59e0b":"#6b7280"},children:[n,"x"]})]},o)})})]})]})]}):(0,i.jsxs)("div",{style:{textAlign:"center",padding:"48px 24px",background:"#f9fafb",borderRadius:16,border:"2px dashed #d1d5db"},children:[(0,i.jsx)("div",{style:{fontSize:64,marginBottom:16}}),(0,i.jsx)("h3",{style:{fontSize:18,fontWeight:600,marginBottom:8},children:"Nenhum dado neste per\xedodo"}),(0,i.jsx)("p",{style:{color:"#666",fontSize:14},children:"Tente selecionar outro per\xedodo ou capture uma refei\xe7\xe3o!"})]})]})}},86394:function(e,t,o){"use strict";o.d(t,{R:function(){return d}});var i=o(2265),n=o(87185),a=o(45591);async function r(){let e=await a.h.get("/api/user/profile");if(!e.ok)throw Error("Failed to fetch user plan: ".concat(e.status));let t=(await e.json()).user;return{plan:t.plan||"free",subscription_status:t.subscription_status||"active",subscription_started_at:t.subscription_started_at,subscription_expires_at:t.subscription_expires_at}}async function s(){let e=await a.h.get("/api/subscription/quota");if(!e.ok)throw Error("Failed to fetch quota usage: ".concat(e.status));return e.json()}async function l(){try{let{Purchases:e}=await o.e(938).then(o.bind(o,31938)),{customerInfo:t}=await e.getCustomerInfo();await a.h.post("/api/subscription/sync",{customerInfo:t}),console.log("[useUserPlan] Sync success")}catch(e){console.warn("[useUserPlan] Sync error:",e)}}function d(){let[e,t]=(0,i.useState)("free"),[o,a]=(0,i.useState)("active"),[d,c]=(0,i.useState)(null),[g,h]=(0,i.useState)(!0),[u,f]=(0,i.useState)(null),m=(0,i.useRef)(!1),y=async()=>{try{h(!0),f(null),n.dV.isNativePlatform()&&!m.current&&(m.current=!0,await l());let e=await r();if(t(e.plan),a(e.subscription_status),"premium"===e.plan){let e=await s(),t=function(e){var t;let o=e.photo_analyses/e.limits.photo_analyses_per_month*100,i=e.ocr_analyses/e.limits.ocr_analyses_per_month*100,n=e.text_analyses/e.limits.text_analyses_per_month*100,a=null===(t=e.limits)||void 0===t?void 0:t.report_analyses_per_month,r=e.report_analyses,s=new Date,l=new Date(s.getFullYear(),s.getMonth()+1,1);return{photo_analyses:{used:e.photo_analyses,limit:e.limits.photo_analyses_per_month,percentage:Math.round(o),remaining:e.limits.photo_analyses_per_month-e.photo_analyses},ocr_analyses:{used:e.ocr_analyses,limit:e.limits.ocr_analyses_per_month,percentage:Math.round(i),remaining:e.limits.ocr_analyses_per_month-e.ocr_analyses},text_analyses:{used:e.text_analyses,limit:e.limits.text_analyses_per_month,percentage:Math.round(n),remaining:e.limits.text_analyses_per_month-e.text_analyses},report_analyses:void 0!==a?{used:r||0,limit:a,percentage:Math.round(a?(r||0)/a*100:0),remaining:a-(r||0)}:void 0,resetDate:l}}(e);c(t)}else c(null)}catch(e){console.error("Error fetching user plan:",e),f(e instanceof Error?e:Error("Unknown error")),t("free"),c(null)}finally{h(!1)}};return(0,i.useEffect)(()=>{y()},[]),{plan:e,subscription_status:o,quota:d,isLoading:g,error:u,refetch:y}}},68398:function(e,t,o){"use strict";o.d(t,{Ob:function(){return h},sc:function(){return u},showRewardedAd:function(){return f},tJ:function(){return g}});var i=o(87185);let n="ca-app-pub-3940256099942544/2934735716",a="ca-app-pub-3940256099942544/1712485313",r=null,s=null,l=null,d=!1;async function c(){if(!r)try{let e=await o.e(124).then(o.bind(o,97124));r=e.AdMob||null,s=e.BannerAdSize||null,l=e.BannerAdPosition||null}catch(e){console.warn("[AdMob] Community plugin not available:",e),r=null}}async function g(){if(i.dV.isNativePlatform()&&!d){if(await c(),!r){d=!0;return}try{"function"==typeof r.initialize&&await r.initialize({})}catch(e){console.warn("[AdMob] init error (non-fatal):",e)}finally{d=!0}}}async function h(){if(!i.dV.isNativePlatform()){console.log("[AdMob] showTopBanner: not native platform, skipping");return}if(await g(),!r){console.warn("[AdMob] showTopBanner: admob not loaded");return}try{console.log("[AdMob] showTopBanner: calling showBanner with id:",n),await r.showBanner({adId:n,adSize:null==s?void 0:s.ADAPTIVE_BANNER,position:null==l?void 0:l.TOP_CENTER,margin:0}),console.log("[AdMob] showTopBanner: success")}catch(e){console.warn("[AdMob] showTopBanner failed:",e)}}async function u(){if(i.dV.isNativePlatform()&&(await g(),r))try{await r.removeBanner()}catch(e){console.warn("[AdMob] hideTopBanner failed:",e)}}async function f(e){if(!i.dV.isNativePlatform())return console.log("[AdMob] Not native, simulating rewarded ad for dev"),!0;if(await g(),!r)return console.warn("[AdMob] showRewardedAd: admob not loaded, allowing action"),!0;try{return console.log("[AdMob] showRewardedAd: preparing with id:",a),await r.prepareRewardVideoAd({adId:a}),console.log("[AdMob] showRewardedAd: showing..."),await r.showRewardVideoAd(),console.log("[AdMob] showRewardedAd: completed successfully"),!0}catch(e){return console.warn("[AdMob] showRewardedAd failed:",e),!1}}},45224:function(e,t,o){"use strict";o.d(t,{p:function(){return a},q:function(){return n}});var i=o(68398);async function n(e,t){console.log("[AdGuard] Starting request for feature:",null==t?void 0:t.feature);let o=await e();if(console.log("[AdGuard] First request status:",o.status),403!==o.status)return console.log("[AdGuard] Not 403, returning response"),o;try{let n=await o.clone().json().catch(()=>({}));if(console.log("[AdGuard] 403 payload:",n),(null==n?void 0:n.error)==="watch_ad_required"){if(console.log("[AdGuard] watch_ad_required detected, currentPlan:",null==n?void 0:n.currentPlan),!(null==t?void 0:t.skipConfirmation)&&!window.confirm("Este recurso requer assistir a um an\xfancio curto para continuar. Deseja prosseguir?"))return console.log("[AdGuard] User cancelled ad"),new Response(JSON.stringify({error:"ad_cancelled"}),{status:499,headers:{"Content-Type":"application/json"}});console.log("[AdGuard] Showing rewarded ad...");let o=await (0,i.showRewardedAd)(null==t?void 0:t.feature);if(console.log("[AdGuard] Ad result:",o),!o)return console.log("[AdGuard] Ad failed, returning 503"),new Response(JSON.stringify({error:"ad_failed"}),{status:503,headers:{"Content-Type":"application/json"}});console.log("[AdGuard] Ad success, retrying with x-ad-completed header");let a=await e({"x-ad-completed":"1"});return console.log("[AdGuard] Retry response status:",a.status),a}}catch(e){console.error("[AdGuard] Error:",e)}return o}function a(e,t){if(499===e.status&&(null==t?void 0:t.error)==="ad_cancelled")return null;if(503===e.status&&(null==t?void 0:t.error)==="ad_failed")return"N\xe3o foi poss\xedvel carregar o an\xfancio. Por favor, tente novamente em alguns instantes.";if(403===e.status){if((null==t?void 0:t.error)==="watch_ad_required")return"An\xfancio indispon\xedvel no momento. Tente novamente.";null==t||t.error}return null}},45591:function(e,t,o){"use strict";o.d(t,{h:function(){return r},x:function(){return a}});var i=o(45800);let n=o(20357).env.NEXT_PUBLIC_API_URL||"https://app.foodtracker.com.br";async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:o,...a}=t,r={...a.headers};if(o)r.Authorization="Bearer ".concat(o);else{let e=localStorage.getItem("auth_token");console.log("[API Client] localStorage auth_token:",e?"exists":"null"),e&&(r.Authorization="Bearer ".concat(e))}a.body&&"string"==typeof a.body&&!r["Content-Type"]&&(r["Content-Type"]="application/json");let s=e.startsWith("http")?e:"".concat(n).concat(e);console.log("[API Client]",{isMobile:!0,baseUrl:n,endpoint:e,finalUrl:s,hasAuthToken:!!r.Authorization,allHeaders:Object.keys(r),xAdCompleted:r["x-ad-completed"]||"not set"});try{let t=await fetch(s,{...a,headers:r,credentials:"include"});if(console.log("[API Client] Response ".concat(e,":"),{status:t.status}),401===t.status){console.warn("401 Unauthorized - triggering client logout");try{(0,i.h)()}catch(e){}}return t}catch(e){throw console.error("[API Client Error]",e),e}}let r={get:(e,t)=>a(e,{method:"GET",token:t}),post:(e,t,o)=>a(e,{method:"POST",body:JSON.stringify(t),token:o}),put:(e,t,o)=>a(e,{method:"PUT",body:JSON.stringify(t),token:o}),patch:(e,t,o)=>a(e,{method:"PATCH",body:JSON.stringify(t),token:o}),delete:(e,t)=>a(e,{method:"DELETE",token:t})}},45800:function(e,t,o){"use strict";function i(){try{try{localStorage.removeItem("auth_token")}catch(e){}try{localStorage.setItem("auth_logout_at",String(Date.now()))}catch(e){}try{window.dispatchEvent(new Event("app:logout"))}catch(e){}}catch(e){}}o.d(t,{h:function(){return i}})},35087:function(e,t,o){"use strict";o.d(t,{F1:function(){return r},XV:function(){return s},YX:function(){return l},Yd:function(){return a},xk:function(){return n}});let i="America/Sao_Paulo";function n(){return new Date().toLocaleDateString("en-CA",{timeZone:i})}function a(){return{date:n(),time:new Date().toLocaleTimeString("pt-BR",{timeZone:i,hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}}function r(e){return new Date(e+"T00:00:00").toLocaleDateString("pt-BR",{timeZone:i})}function s(e){return new Date(e+"T00:00:00").toLocaleDateString("pt-BR",{timeZone:i,day:"2-digit",month:"long",year:"numeric"})}function l(e){return e.toLocaleDateString("en-CA",{timeZone:i})}}},function(e){e.O(0,[325,971,23,744],function(){return e(e.s=51104)}),_N_E=e.O()}]);