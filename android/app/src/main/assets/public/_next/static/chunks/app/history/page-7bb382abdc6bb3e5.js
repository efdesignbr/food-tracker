(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811,398],{53466:function(e,t,i){Promise.resolve().then(i.bind(i,94932))},94932:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return b}});var o=i(57437),n=i(2265),a=i(45591);let r={breakfast:{label:"Caf\xe9 da Manh\xe3",icon:"",color:"#f59e0b"},lunch:{label:"Almo\xe7o",icon:"",color:"#10b981"},dinner:{label:"Jantar",icon:"",color:"#6366f1"},snack:{label:"Lanche",icon:"",color:"#ec4899"}},s=["Dom","Seg","Ter","Qua","Qui","Sex","S\xe1b"],d=["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];function l(e){let{meals:t,waterRecords:i=[],calorieGoal:l=2e3,proteinGoal:c=150,carbsGoal:g=250,fatGoal:u=65,waterGoal:p=2e3}=e,[h,f]=(0,n.useState)(new Date),[x,m]=(0,n.useState)(null),b=e=>(e.cholesterol_mg||0)>0||(e.saturated_fat_g||0)>0||(e.calcium_mg||0)>0||(e.magnesium_mg||0)>0||(e.phosphorus_mg||0)>0||(e.iron_mg||0)>0||(e.potassium_mg||0)>0||(e.zinc_mg||0)>0||(e.copper_mg||0)>0||(e.manganese_mg||0)>0||(e.vitamin_c_mg||0)>0||(e.vitamin_a_mcg||0)>0||(e.vitamin_b1_mg||0)>0||(e.vitamin_b2_mg||0)>0||(e.vitamin_b3_mg||0)>0||(e.vitamin_b6_mg||0)>0,[y,v]=(0,n.useState)(null),j=(0,n.useMemo)(()=>{let e=h.getFullYear(),o=h.getMonth(),n=new Date(e,o,1),a=new Date(e,o+1,0),r=new Date(n);r.setDate(r.getDate()-n.getDay());let s=new Date(a);s.setDate(s.getDate()+(6-a.getDay()));let d=[],[l,c,g]=new Date().toLocaleDateString("en-CA",{timeZone:"America/Sao_Paulo"}).split("-").map(Number),u=new Map;t.forEach(e=>{let[t,i,o]=new Date(e.consumed_at).toLocaleDateString("en-CA",{timeZone:"America/Sao_Paulo"}).split("-").map(Number),n="".concat(t,"-").concat(i-1,"-").concat(o);u.has(n)||u.set(n,[]),u.get(n).push(e)});let p=new Map;i.forEach(e=>{let[t,i,o]=e.date.split("-").map(Number),n="".concat(t,"-").concat(i-1,"-").concat(o);p.set(n,e.total_ml)});let f=new Date(r);for(;f<=s;){let e="".concat(f.getFullYear(),"-").concat(f.getMonth(),"-").concat(f.getDate()),t=u.get(e)||[],i=p.get(e)||0,n=t.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.calories||0),0),0),a=t.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.protein_g||0),0),0),r=t.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.carbs_g||0),0),0),s=t.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.fat_g||0),0),0),h=t.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.fiber_g||0),0),0),x=t.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.sodium_mg||0),0),0),m=t.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.sugar_g||0),0),0),b=f.getFullYear()===l&&f.getMonth()===c-1&&f.getDate()===g;d.push({date:new Date(f),dateString:f.toLocaleDateString("pt-BR",{timeZone:"America/Sao_Paulo"}),calories:n,protein:a,carbs:r,fat:s,fiber:h,sodium:x,sugar:m,meals:t,waterIntake:i,isCurrentMonth:f.getMonth()===o,isToday:b}),f.setDate(f.getDate()+1)}return d},[h,t,i]);return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{background:"white",borderRadius:16,padding:16,marginBottom:16,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,o.jsx)("button",{onClick:()=>{f(new Date(h.getFullYear(),h.getMonth()-1,1)),v(null)},style:{padding:"8px 12px",border:"none",background:"#f3f4f6",borderRadius:8,cursor:"pointer",fontSize:18,color:"#374151"}}),(0,o.jsxs)("div",{style:{textAlign:"center"},children:[(0,o.jsxs)("h2",{style:{fontSize:18,fontWeight:700,margin:0,color:"#2196F3"},children:[d[h.getMonth()]," ",h.getFullYear()]}),(0,o.jsx)("button",{onClick:()=>{f(new Date),v(null)},style:{marginTop:4,padding:"4px 12px",border:"none",background:"transparent",color:"#6b7280",fontSize:12,cursor:"pointer",textDecoration:"underline"},children:"Ir para hoje"})]}),(0,o.jsx)("button",{onClick:()=>{f(new Date(h.getFullYear(),h.getMonth()+1,1)),v(null)},style:{padding:"8px 12px",border:"none",background:"#f3f4f6",borderRadius:8,cursor:"pointer",fontSize:18,color:"#374151"}})]}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:12,marginBottom:8,padding:"8px 12px",background:"#f9fafb",borderRadius:8,flexWrap:"wrap"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:4},children:[(0,o.jsx)("div",{style:{width:4,height:12,borderRadius:2,background:"#2196F3"}}),(0,o.jsx)("span",{style:{fontSize:10,color:"#6b7280"},children:"Calorias"})]}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:4},children:[(0,o.jsx)("div",{style:{width:4,height:12,borderRadius:2,background:"#ef4444"}}),(0,o.jsx)("span",{style:{fontSize:10,color:"#6b7280"},children:"Prote\xedna"})]}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:4},children:[(0,o.jsx)("div",{style:{width:4,height:12,borderRadius:2,background:"#f59e0b"}}),(0,o.jsx)("span",{style:{fontSize:10,color:"#6b7280"},children:"Carboidratos"})]}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:4},children:[(0,o.jsx)("div",{style:{width:4,height:12,borderRadius:2,background:"#8b5cf6"}}),(0,o.jsx)("span",{style:{fontSize:10,color:"#6b7280"},children:"Gorduras"})]}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:4},children:[(0,o.jsx)("div",{style:{width:4,height:12,borderRadius:2,background:"#06b6d4"}}),(0,o.jsx)("span",{style:{fontSize:10,color:"#6b7280"},children:"\xc1gua"})]})]}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:8,marginBottom:12,padding:"6px 8px",background:"#fefce8",borderRadius:8,flexWrap:"wrap",border:"1px solid #fde047"},children:[(0,o.jsx)("span",{style:{fontSize:9,color:"#6b7280",fontWeight:600},children:"Meta:"}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:3},children:[(0,o.jsx)("div",{style:{width:10,height:10,borderRadius:2,background:"#dcfce7",border:"1px solid #86efac"}}),(0,o.jsx)("span",{style:{fontSize:9,color:"#6b7280"},children:"90-110%"})]}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:3},children:[(0,o.jsx)("div",{style:{width:10,height:10,borderRadius:2,background:"#f0fdf4",border:"1px solid #bbf7d0"}}),(0,o.jsx)("span",{style:{fontSize:9,color:"#6b7280"},children:"70-89%"})]}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:3},children:[(0,o.jsx)("div",{style:{width:10,height:10,borderRadius:2,background:"#fef9c3",border:"1px solid #fde047"}}),(0,o.jsx)("span",{style:{fontSize:9,color:"#6b7280"},children:"50-69%"})]}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:3},children:[(0,o.jsx)("div",{style:{width:10,height:10,borderRadius:2,background:"#fee2e2",border:"1px solid #fca5a5"}}),(0,o.jsx)("span",{style:{fontSize:9,color:"#6b7280"},children:">110%"})]})]}),(0,o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:4,marginBottom:8},children:s.map(e=>(0,o.jsx)("div",{style:{textAlign:"center",fontSize:11,fontWeight:600,color:"#6b7280",padding:"4px 0"},children:e},e))}),(0,o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:3},children:j.map((e,t)=>{let i=e.meals.length>0||e.waterIntake>0,n=(null==y?void 0:y.dateString)===e.dateString,a=i?e.calories/l*100:0,r="#fff",s="#e5e7eb";return n?r="#2196F3":e.isToday?(r="#e3f2fd",s="#2196F3"):e.isCurrentMonth?i&&(a>=110?(r="#fee2e2",s="#fca5a5"):a>=90&&a<=110?(r="#dcfce7",s="#86efac"):a>=70&&a<90?(r="#f0fdf4",s="#bbf7d0"):a>=50&&a<70?(r="#fef9c3",s="#fde047"):(r="#ffedd5",s="#fed7aa")):r="#f9fafb",(0,o.jsxs)("button",{onClick:()=>v(n?null:e),disabled:!i&&!e.isCurrentMonth,style:{aspectRatio:"1",border:"1.5px solid ".concat(s),background:r,borderRadius:6,cursor:i?"pointer":"default",opacity:e.isCurrentMonth?1:.5,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",padding:"3px 2px",transition:"all 0.2s",position:"relative"},children:[(0,o.jsx)("div",{style:{fontSize:11,fontWeight:e.isToday?700:600,color:n?"#fff":e.isCurrentMonth?"#374151":"#9ca3af",lineHeight:1},children:e.date.getDate()}),(0,o.jsx)("div",{style:{display:"flex",gap:1.5,height:24,alignItems:"flex-end",justifyContent:"center"},children:i&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{style:{width:7,height:"100%",background:n?"rgba(255,255,255,0.2)":"#dbeafe",borderRadius:2,overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:(0,o.jsx)("div",{style:{height:"".concat(Math.min(e.calories/l*100,100),"%"),width:"100%",background:n?"rgba(255,255,255,0.9)":"#2196F3",transition:"height 0.3s ease",borderRadius:2}})}),(0,o.jsx)("div",{style:{width:7,height:"100%",background:n?"rgba(255,255,255,0.2)":"#fee2e2",borderRadius:2,overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:(0,o.jsx)("div",{style:{height:"".concat(Math.min(e.protein/c*100,100),"%"),width:"100%",background:n?"rgba(255,255,255,0.9)":"#ef4444",transition:"height 0.3s ease",borderRadius:2}})}),(0,o.jsx)("div",{style:{width:7,height:"100%",background:n?"rgba(255,255,255,0.2)":"#fef3c7",borderRadius:2,overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:(0,o.jsx)("div",{style:{height:"".concat(Math.min(e.carbs/g*100,100),"%"),width:"100%",background:n?"rgba(255,255,255,0.9)":"#f59e0b",transition:"height 0.3s ease",borderRadius:2}})}),(0,o.jsx)("div",{style:{width:7,height:"100%",background:n?"rgba(255,255,255,0.2)":"#ede9fe",borderRadius:2,overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:(0,o.jsx)("div",{style:{height:"".concat(Math.min(e.fat/u*100,100),"%"),width:"100%",background:n?"rgba(255,255,255,0.9)":"#8b5cf6",transition:"height 0.3s ease",borderRadius:2}})}),e.waterIntake>0&&(0,o.jsx)("div",{style:{width:7,height:"100%",background:n?"rgba(255,255,255,0.2)":"#cffafe",borderRadius:2,overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:(0,o.jsx)("div",{style:{height:"".concat(Math.min(e.waterIntake/p*100,100),"%"),width:"100%",background:n?"rgba(255,255,255,0.9)":"#06b6d4",transition:"height 0.3s ease",borderRadius:2}})})]})})]},t)})})]}),y&&(y.meals.length>0||y.waterIntake>0)&&(0,o.jsxs)("div",{style:{background:"white",borderRadius:16,padding:20,marginBottom:16,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",border:"2px solid #2196F3",animation:"slideDown 0.3s ease"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,paddingBottom:12,borderBottom:"2px solid #e5e7eb"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{style:{fontSize:18,fontWeight:700,margin:0,color:"#2196F3"},children:y.dateString}),(0,o.jsxs)("p",{style:{fontSize:13,color:"#6b7280",margin:"4px 0 0 0"},children:[y.meals.length," refei\xe7\xe3o",1!==y.meals.length?"\xf5es":""]})]}),(0,o.jsx)("button",{onClick:()=>v(null),style:{padding:"6px 12px",border:"none",background:"#f3f4f6",borderRadius:8,cursor:"pointer",fontSize:14,color:"#6b7280",display:"flex",alignItems:"center",justifyContent:"center"},title:"Fechar",children:(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,o.jsx)("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,marginBottom:20,padding:16,background:"#f9fafb",borderRadius:12},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:11,color:"#6b7280",marginBottom:4},children:" Calorias"}),(0,o.jsx)("div",{style:{fontSize:18,fontWeight:700,color:"#2196F3"},children:y.calories.toFixed(0)}),(0,o.jsxs)("div",{style:{fontSize:10,color:"#9ca3af"},children:["Meta: ",l]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:11,color:"#6b7280",marginBottom:4},children:" Prote\xedna"}),(0,o.jsxs)("div",{style:{fontSize:18,fontWeight:700,color:"#ef4444"},children:[y.protein.toFixed(0),"g"]}),(0,o.jsxs)("div",{style:{fontSize:10,color:"#9ca3af"},children:["Meta: ",c,"g"]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:11,color:"#6b7280",marginBottom:4},children:" Carboidratos"}),(0,o.jsxs)("div",{style:{fontSize:18,fontWeight:700,color:"#f59e0b"},children:[y.carbs.toFixed(0),"g"]}),(0,o.jsxs)("div",{style:{fontSize:10,color:"#9ca3af"},children:["Meta: ",g,"g"]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:11,color:"#6b7280",marginBottom:4},children:"\uD83E\uDDC8 Gorduras"}),(0,o.jsxs)("div",{style:{fontSize:18,fontWeight:700,color:"#8b5cf6"},children:[y.fat.toFixed(0),"g"]}),(0,o.jsxs)("div",{style:{fontSize:10,color:"#9ca3af"},children:["Meta: ",u,"g"]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:11,color:"#6b7280",marginBottom:4},children:"Fibra"}),(0,o.jsxs)("div",{style:{fontSize:18,fontWeight:700,color:"#059669"},children:[y.fiber.toFixed(0),"g"]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:11,color:"#6b7280",marginBottom:4},children:"S\xf3dio"}),(0,o.jsxs)("div",{style:{fontSize:18,fontWeight:700,color:"#4f46e5"},children:[y.sodium.toFixed(0),"mg"]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:11,color:"#6b7280",marginBottom:4},children:"A\xe7\xfacar"}),(0,o.jsxs)("div",{style:{fontSize:18,fontWeight:700,color:"#ca8a04"},children:[y.sugar.toFixed(0),"g"]})]}),(0,o.jsxs)("div",{style:{gridColumn:"1 / -1",background:"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)",borderRadius:8,padding:12,color:"white"},children:[(0,o.jsx)("div",{style:{fontSize:11,opacity:.9,marginBottom:4},children:" \xc1gua"}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsxs)("div",{style:{fontSize:18,fontWeight:700},children:[y.waterIntake,"ml"]}),(0,o.jsxs)("div",{style:{fontSize:11,opacity:.9},children:[Math.floor(y.waterIntake/250)," copos • Meta: ",p,"ml"]})]}),y.waterIntake>0&&(0,o.jsx)("div",{style:{marginTop:8,height:6,background:"rgba(255,255,255,0.3)",borderRadius:3,overflow:"hidden"},children:(0,o.jsx)("div",{style:{width:"".concat(Math.min(y.waterIntake/p*100,100),"%"),height:"100%",background:"white",borderRadius:3,transition:"width 0.3s ease"}})})]})]}),(0,o.jsx)("div",{style:{display:"grid",gap:12},children:y.meals.map(e=>{let t=e.foods.reduce((e,t)=>e+(t.calories||0),0),i=e.foods.reduce((e,t)=>e+(t.protein_g||0),0),n=e.foods.reduce((e,t)=>e+(t.carbs_g||0),0),s=e.foods.reduce((e,t)=>e+(t.fat_g||0),0),d=e.foods.reduce((e,t)=>e+(t.fiber_g||0),0),l=e.foods.reduce((e,t)=>e+(t.sodium_mg||0),0),c=e.foods.reduce((e,t)=>e+(t.sugar_g||0),0),g=r[e.meal_type]||r.lunch;return(0,o.jsxs)("div",{style:{background:"white",borderRadius:12,overflow:"hidden",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb"},children:[e.image_url&&"https://via.placeholder.com/400x300.png?text=Meal+Image"!==e.image_url&&(0,o.jsx)("img",{src:e.image_url,alt:"Refei\xe7\xe3o",style:{width:"100%",height:150,objectFit:"cover"}}),(0,o.jsxs)("div",{style:{padding:12},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:8},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,o.jsx)("span",{style:{fontSize:20},children:g.icon}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{style:{margin:0,fontSize:15,fontWeight:700,color:g.color},children:g.label}),(0,o.jsxs)("div",{style:{fontSize:12,color:"#6b7280"},children:[new Date(e.consumed_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),e.location_type&&(0,o.jsxs)(o.Fragment,{children:[" • ","home"===e.location_type?" Casa":" ".concat(e.restaurant_name||"Fora")]})]})]})]}),(0,o.jsx)("button",{onClick:async()=>{if(confirm("Tem certeza que deseja deletar esta refei\xe7\xe3o?"))try{let t=await a.h.delete("/api/meals/".concat(e.id));if(t.ok)window.location.reload();else{let e=await t.json();alert(e.error||"Erro ao deletar refei\xe7\xe3o")}}catch(e){alert("Erro ao deletar refei\xe7\xe3o")}},style:{padding:"6px 10px",background:"#fee2e2",border:"1px solid #fca5a5",borderRadius:6,cursor:"pointer",fontSize:16,color:"#dc2626",flexShrink:0},title:"Deletar refei\xe7\xe3o",children:(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,o.jsx)("path",{d:"M3 6h18M8 6V4a2 2 0 012-2h4a2 2 0 012 2v2m3 0v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6h14M10 11v6M14 11v6"})})})]}),e.notes&&(0,o.jsx)("div",{style:{padding:10,background:"#f9fafb",borderRadius:8,marginBottom:10,borderLeft:"3px solid "+g.color},children:(0,o.jsxs)("p",{style:{margin:0,fontSize:13,color:"#374151",fontStyle:"italic"},children:['"',e.notes,'"']})}),(0,o.jsxs)("div",{style:{marginBottom:10},children:[(0,o.jsxs)("div",{style:{fontSize:10,fontWeight:600,color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:6},children:["Alimentos (",e.foods.length,")"]}),(0,o.jsx)("div",{style:{display:"grid",gap:8},children:e.foods.map(e=>{var t,i,n,a,r,s,d,l,c,g,u,p,h,f,y,v;let j=x===e.id,w=b(e);return(0,o.jsxs)("div",{style:{padding:"10px 12px",background:"#f9fafb",borderRadius:8,fontSize:12,border:"1px solid #e5e7eb"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6},children:[(0,o.jsxs)("span",{style:{fontWeight:600,color:"#374151"},children:[e.name,(0,o.jsxs)("span",{style:{color:"#9ca3af",marginLeft:4,fontWeight:400},children:["(",e.quantity," ",e.unit,")"]})]}),(0,o.jsxs)("span",{style:{fontWeight:600,color:"#6b7280"},children:[(e.calories||0).toFixed(0)," kcal"]})]}),(0,o.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:6,fontSize:10},children:[(0,o.jsxs)("span",{style:{color:"#d97706",background:"#fef3c7",padding:"2px 6px",borderRadius:4},children:["P: ",(e.protein_g||0).toFixed(0),"g"]}),(0,o.jsxs)("span",{style:{color:"#2563eb",background:"#dbeafe",padding:"2px 6px",borderRadius:4},children:["C: ",(e.carbs_g||0).toFixed(0),"g"]}),(0,o.jsxs)("span",{style:{color:"#db2777",background:"#fce7f3",padding:"2px 6px",borderRadius:4},children:["G: ",(e.fat_g||0).toFixed(0),"g"]}),(0,o.jsxs)("span",{style:{color:"#059669",background:"#d1fae5",padding:"2px 6px",borderRadius:4},children:["F: ",(e.fiber_g||0).toFixed(0),"g"]}),(0,o.jsxs)("span",{style:{color:"#4f46e5",background:"#e0e7ff",padding:"2px 6px",borderRadius:4},children:["S: ",(e.sodium_mg||0).toFixed(0),"mg"]}),(0,o.jsxs)("span",{style:{color:"#ca8a04",background:"#fef9c3",padding:"2px 6px",borderRadius:4},children:["A: ",(e.sugar_g||0).toFixed(0),"g"]})]}),w&&(0,o.jsxs)("button",{onClick:()=>m(j?null:e.id),style:{marginTop:8,padding:"4px 8px",border:"none",background:j?"#7c3aed":"#ede9fe",color:j?"white":"#7c3aed",borderRadius:4,fontSize:10,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:4},children:[j?"Ocultar":"Ver"," Micronutrientes",(0,o.jsx)("span",{style:{transform:j?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:"▼"})]}),j&&w&&(0,o.jsxs)("div",{style:{marginTop:8,padding:10,background:"#faf5ff",borderRadius:6,border:"1px solid #e9d5ff"},children:[(0,o.jsx)("div",{style:{fontSize:10,fontWeight:600,color:"#7c3aed",marginBottom:8},children:"Micronutrientes"}),(0,o.jsxs)("div",{style:{marginBottom:8},children:[(0,o.jsx)("div",{style:{fontSize:9,fontWeight:600,color:"#6b7280",marginBottom:4},children:"Minerais"}),(0,o.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:4,fontSize:10},children:[(e.calcium_mg||0)>0&&(0,o.jsxs)("span",{style:{background:"#fef3c7",color:"#92400e",padding:"2px 6px",borderRadius:4},children:["Ca: ",null===(t=e.calcium_mg)||void 0===t?void 0:t.toFixed(1),"mg"]}),(e.iron_mg||0)>0&&(0,o.jsxs)("span",{style:{background:"#fee2e2",color:"#991b1b",padding:"2px 6px",borderRadius:4},children:["Fe: ",null===(i=e.iron_mg)||void 0===i?void 0:i.toFixed(1),"mg"]}),(e.magnesium_mg||0)>0&&(0,o.jsxs)("span",{style:{background:"#d1fae5",color:"#065f46",padding:"2px 6px",borderRadius:4},children:["Mg: ",null===(n=e.magnesium_mg)||void 0===n?void 0:n.toFixed(1),"mg"]}),(e.phosphorus_mg||0)>0&&(0,o.jsxs)("span",{style:{background:"#e0e7ff",color:"#3730a3",padding:"2px 6px",borderRadius:4},children:["P: ",null===(a=e.phosphorus_mg)||void 0===a?void 0:a.toFixed(1),"mg"]}),(e.potassium_mg||0)>0&&(0,o.jsxs)("span",{style:{background:"#fce7f3",color:"#9d174d",padding:"2px 6px",borderRadius:4},children:["K: ",null===(r=e.potassium_mg)||void 0===r?void 0:r.toFixed(1),"mg"]}),(e.zinc_mg||0)>0&&(0,o.jsxs)("span",{style:{background:"#cffafe",color:"#155e75",padding:"2px 6px",borderRadius:4},children:["Zn: ",null===(s=e.zinc_mg)||void 0===s?void 0:s.toFixed(2),"mg"]}),(e.copper_mg||0)>0&&(0,o.jsxs)("span",{style:{background:"#fed7aa",color:"#9a3412",padding:"2px 6px",borderRadius:4},children:["Cu: ",null===(d=e.copper_mg)||void 0===d?void 0:d.toFixed(3),"mg"]}),(e.manganese_mg||0)>0&&(0,o.jsxs)("span",{style:{background:"#f5d0fe",color:"#86198f",padding:"2px 6px",borderRadius:4},children:["Mn: ",null===(l=e.manganese_mg)||void 0===l?void 0:l.toFixed(3),"mg"]})]})]}),((e.vitamin_c_mg||0)>0||(e.vitamin_a_mcg||0)>0||(e.vitamin_b1_mg||0)>0||(e.vitamin_b2_mg||0)>0||(e.vitamin_b3_mg||0)>0||(e.vitamin_b6_mg||0)>0)&&(0,o.jsxs)("div",{style:{marginBottom:8},children:[(0,o.jsx)("div",{style:{fontSize:9,fontWeight:600,color:"#6b7280",marginBottom:4},children:"Vitaminas"}),(0,o.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:4,fontSize:10},children:[(e.vitamin_a_mcg||0)>0&&(0,o.jsxs)("span",{style:{background:"#ffedd5",color:"#9a3412",padding:"2px 6px",borderRadius:4},children:["Vit A: ",null===(c=e.vitamin_a_mcg)||void 0===c?void 0:c.toFixed(1),"mcg"]}),(e.vitamin_c_mg||0)>0&&(0,o.jsxs)("span",{style:{background:"#fef9c3",color:"#854d0e",padding:"2px 6px",borderRadius:4},children:["Vit C: ",null===(g=e.vitamin_c_mg)||void 0===g?void 0:g.toFixed(1),"mg"]}),(e.vitamin_b1_mg||0)>0&&(0,o.jsxs)("span",{style:{background:"#ecfccb",color:"#3f6212",padding:"2px 6px",borderRadius:4},children:["B1: ",null===(u=e.vitamin_b1_mg)||void 0===u?void 0:u.toFixed(3),"mg"]}),(e.vitamin_b2_mg||0)>0&&(0,o.jsxs)("span",{style:{background:"#d9f99d",color:"#365314",padding:"2px 6px",borderRadius:4},children:["B2: ",null===(p=e.vitamin_b2_mg)||void 0===p?void 0:p.toFixed(3),"mg"]}),(e.vitamin_b3_mg||0)>0&&(0,o.jsxs)("span",{style:{background:"#a7f3d0",color:"#14532d",padding:"2px 6px",borderRadius:4},children:["B3: ",null===(h=e.vitamin_b3_mg)||void 0===h?void 0:h.toFixed(3),"mg"]}),(e.vitamin_b6_mg||0)>0&&(0,o.jsxs)("span",{style:{background:"#99f6e4",color:"#134e4a",padding:"2px 6px",borderRadius:4},children:["B6: ",null===(f=e.vitamin_b6_mg)||void 0===f?void 0:f.toFixed(3),"mg"]})]})]}),((e.cholesterol_mg||0)>0||(e.saturated_fat_g||0)>0)&&(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:9,fontWeight:600,color:"#6b7280",marginBottom:4},children:"Outros"}),(0,o.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:4,fontSize:10},children:[(e.cholesterol_mg||0)>0&&(0,o.jsxs)("span",{style:{background:"#fecaca",color:"#991b1b",padding:"2px 6px",borderRadius:4},children:["Colesterol: ",null===(y=e.cholesterol_mg)||void 0===y?void 0:y.toFixed(1),"mg"]}),(e.saturated_fat_g||0)>0&&(0,o.jsxs)("span",{style:{background:"#fecdd3",color:"#9f1239",padding:"2px 6px",borderRadius:4},children:["G. Saturada: ",null===(v=e.saturated_fat_g)||void 0===v?void 0:v.toFixed(1),"g"]})]})]})]})]},e.id)})})]}),(0,o.jsxs)("div",{style:{padding:12,background:g.color,borderRadius:8,color:"white"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6},children:[(0,o.jsx)("span",{style:{fontWeight:600,fontSize:13},children:"Total"}),(0,o.jsxs)("span",{style:{fontSize:18,fontWeight:700},children:[t.toFixed(0)," kcal"]})]}),(0,o.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:8,fontSize:11,opacity:.95,paddingTop:6,borderTop:"1px solid rgba(255,255,255,0.3)"},children:[(0,o.jsxs)("span",{children:["P: ",i.toFixed(0),"g"]}),(0,o.jsxs)("span",{children:["C: ",n.toFixed(0),"g"]}),(0,o.jsxs)("span",{children:["G: ",s.toFixed(0),"g"]}),(0,o.jsxs)("span",{children:["F: ",d.toFixed(0),"g"]}),(0,o.jsxs)("span",{children:["S: ",l.toFixed(0),"mg"]}),(0,o.jsxs)("span",{children:["A: ",c.toFixed(0),"g"]})]})]})]})]},e.id)})})]})]})}var c=i(16463),g=i(94271),u=i(95396),p=i(64194),h=i(42866);i(29535);var f=i(68398);function x(e){let{plan:t="free"}=e;(0,c.useRouter)();let[i,r]=(0,n.useState)(!1),[s,d]=(0,n.useState)("last30days"),[l,x]=(0,n.useState)(""),[m,b]=(0,n.useState)(""),[y,v]=(0,n.useState)(!1),[j,w]=(0,n.useState)(null),_=async()=>{w(null),v(!0);try{let e;let i=new Date;switch(s){case"last30days":default:(e=new Date).setDate(e.getDate()-30);break;case"last3months":e=(0,g.W)(new Date,3);break;case"last6months":e=(0,g.W)(new Date,6);break;case"thisMonth":e=(0,u.N)(new Date),i=(0,p.V)(new Date);break;case"lastMonth":let o=(0,g.W)(new Date,1);e=(0,u.N)(o),i=(0,p.V)(o);break;case"custom":if(!l||!m){w("Por favor, selecione as datas de in\xedcio e fim"),v(!1);return}let[n,d,c]=l.split("-").map(Number),[x,b,y]=m.split("-").map(Number);if(e=new Date(n,(d||1)-1,c||1),i=new Date(x,(b||1)-1,y||1),isNaN(e.getTime())||isNaN(i.getTime())){w("Datas inv\xe1lidas"),v(!1);return}if(e>i){w("A data de in\xedcio deve ser anterior \xe0 data de fim"),v(!1);return}}let j=(0,h.WU)(e,"yyyy-MM-dd"),_=(0,h.WU)(i,"yyyy-MM-dd");if("free"===t&&!await (0,f.showRewardedAd)("export_csv"))throw Error("N\xe3o foi poss\xedvel exibir o an\xfancio. Tente novamente.");let S=await a.h.get("/api/meals/export?start_date=".concat(j,"&end_date=").concat(_));if(!S.ok){let e=await S.json();throw Error(e.error||"Erro ao exportar dados")}let k=await S.blob(),R=window.URL.createObjectURL(k),z=document.createElement("a");z.href=R,z.download=function(e,t){let i=(0,h.WU)(e,"yyyy-MM-dd"),o=(0,h.WU)(t,"yyyy-MM-dd");return"historico-alimentacao_".concat(i,"_").concat(o,".csv")}(e,i),document.body.appendChild(z),z.click(),document.body.removeChild(z),window.URL.revokeObjectURL(R),r(!1)}catch(e){w(e.message||"Erro ao exportar dados")}finally{v(!1)}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("button",{onClick:()=>r(!0),style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",border:"none",borderRadius:12,padding:"12px 20px",fontSize:15,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:8,boxShadow:"0 2px 8px rgba(16, 185, 129, 0.3)",transition:"all 0.2s ease",width:"100%",justifyContent:"center"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(16, 185, 129, 0.4)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 8px rgba(16, 185, 129, 0.3)"},children:[(0,o.jsx)("span",{style:{fontSize:20}}),"Exportar para CSV"]}),i&&(0,o.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:16},onClick:()=>r(!1),children:(0,o.jsxs)("div",{style:{backgroundColor:"white",borderRadius:16,padding:24,maxWidth:480,width:"100%",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)"},onClick:e=>e.stopPropagation(),children:[(0,o.jsx)("h2",{style:{fontSize:22,fontWeight:700,marginBottom:16,margin:0},children:"Exportar Hist\xf3rico"}),(0,o.jsx)("p",{style:{color:"#666",fontSize:14,marginBottom:20},children:"Escolha o per\xedodo que deseja exportar:"}),(0,o.jsx)("div",{style:{marginBottom:20},children:[{value:"last30days",label:"\xdaltimos 30 dias"},{value:"thisMonth",label:"Este m\xeas"},{value:"lastMonth",label:"M\xeas passado"},{value:"last3months",label:"\xdaltimos 3 meses"},{value:"last6months",label:"\xdaltimos 6 meses"},{value:"custom",label:"Per\xedodo personalizado"}].map(e=>(0,o.jsxs)("label",{style:{display:"flex",alignItems:"center",padding:12,marginBottom:8,borderRadius:8,border:"2px solid",borderColor:s===e.value?"#10b981":"#e5e7eb",backgroundColor:s===e.value?"#ecfdf5":"white",cursor:"pointer",transition:"all 0.2s ease"},children:[(0,o.jsx)("input",{type:"radio",name:"period",value:e.value,checked:s===e.value,onChange:e=>d(e.target.value),style:{marginRight:12}}),(0,o.jsx)("span",{style:{fontSize:15,fontWeight:s===e.value?600:400},children:e.label})]},e.value))}),"custom"===s&&(0,o.jsxs)("div",{style:{marginBottom:20,padding:16,backgroundColor:"#f9fafb",borderRadius:8},children:[(0,o.jsxs)("div",{style:{marginBottom:12,width:"100%"},children:[(0,o.jsx)("label",{style:{display:"block",fontSize:14,fontWeight:600,marginBottom:6},children:"Data de in\xedcio"}),(0,o.jsx)("input",{type:"date",value:l,onChange:e=>x(e.target.value),style:{appearance:"none",WebkitAppearance:"none",display:"block",width:"100%",boxSizing:"border-box",padding:"10px 12px",margin:0,fontSize:15,borderRadius:8,border:"2px solid #e5e7eb",backgroundColor:"white",minHeight:44,color:"#374151"}})]}),(0,o.jsxs)("div",{style:{width:"100%"},children:[(0,o.jsx)("label",{style:{display:"block",fontSize:14,fontWeight:600,marginBottom:6},children:"Data de fim"}),(0,o.jsx)("input",{type:"date",value:m,onChange:e=>b(e.target.value),style:{appearance:"none",WebkitAppearance:"none",display:"block",width:"100%",boxSizing:"border-box",padding:"10px 12px",margin:0,fontSize:15,borderRadius:8,border:"2px solid #e5e7eb",backgroundColor:"white",minHeight:44,color:"#374151"}})]})]}),j&&(0,o.jsx)("div",{style:{padding:12,backgroundColor:"#fee2e2",border:"2px solid #ef4444",borderRadius:8,marginBottom:16},children:(0,o.jsxs)("p",{style:{color:"#991b1b",fontSize:14,margin:0},children:[" ",j]})}),(0,o.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,o.jsx)("button",{onClick:()=>r(!1),disabled:y,style:{flex:1,padding:12,fontSize:15,fontWeight:600,borderRadius:8,border:"2px solid #e5e7eb",backgroundColor:"white",color:"#374151",cursor:y?"not-allowed":"pointer",opacity:y?.5:1},children:"Cancelar"}),(0,o.jsx)("button",{onClick:_,disabled:y,style:{flex:1,padding:12,fontSize:15,fontWeight:600,borderRadius:8,border:"none",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",cursor:y?"not-allowed":"pointer",opacity:y?.5:1},children:y?"Exportando...":"Exportar"})]})]})})]})}var m=i(86394);function b(){let{plan:e}=(0,m.R)(),[t,i]=(0,n.useState)([]),[r,s]=(0,n.useState)([]),[d,c]=(0,n.useState)(!0),[g,u]=(0,n.useState)(null),[p,h]=(0,n.useState)({calories:2e3,protein:150,carbs:250,fat:65,water:2e3});return((0,n.useEffect)(()=>{(async function(){try{c(!0);let[e,t,o]=await Promise.all([a.h.get("/api/meals"),a.h.get("/api/user/profile"),a.h.get("/api/water-intake?history=true")]);if(!e.ok)throw Error("Erro ao buscar refei\xe7\xf5es");let n=await e.json();if(i(n.meals||[]),o.ok){let e=await o.json();s(e.history||[])}if(t.ok){let e=await t.json();h(e.user.goals)}}catch(e){u(e.message)}finally{c(!1)}})()},[]),d)?(0,o.jsx)("div",{style:{padding:24,maxWidth:800,margin:"0 auto"},children:(0,o.jsxs)("div",{style:{textAlign:"center",padding:48},children:[(0,o.jsx)("div",{style:{fontSize:48,marginBottom:16}}),(0,o.jsx)("p",{style:{color:"#666",fontSize:16},children:"Carregando..."})]})}):g?(0,o.jsx)("div",{style:{padding:24,maxWidth:800,margin:"0 auto"},children:(0,o.jsxs)("div",{style:{padding:24,background:"#fee2e2",border:"2px solid #ef4444",borderRadius:12,textAlign:"center"},children:[(0,o.jsx)("div",{style:{fontSize:48,marginBottom:8}}),(0,o.jsx)("p",{style:{color:"#991b1b",margin:0},children:g})]})}):(0,o.jsxs)("div",{style:{padding:16,maxWidth:800,margin:"0 auto",paddingBottom:80},children:[(0,o.jsx)("h1",{style:{fontSize:28,fontWeight:700,marginBottom:16},children:" Hist\xf3rico"}),(0,o.jsx)("div",{style:{marginBottom:16},children:(0,o.jsx)(x,{plan:e})}),(0,o.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:16,padding:16,marginBottom:16,color:"white",boxShadow:"0 4px 12px rgba(102, 126, 234, 0.3)"},children:[(0,o.jsx)("div",{style:{fontSize:32,marginBottom:8}}),(0,o.jsx)("h2",{style:{fontSize:16,fontWeight:700,margin:0,marginBottom:4},children:"Navegue pelo calend\xe1rio"}),(0,o.jsx)("p",{style:{fontSize:13,opacity:.9,margin:0},children:"Toque em um dia para ver todas as refei\xe7\xf5es e detalhes nutricionais completos"})]}),0===t.length?(0,o.jsxs)("div",{style:{textAlign:"center",padding:"48px 24px",background:"#f9fafb",borderRadius:16,border:"2px dashed #d1d5db"},children:[(0,o.jsx)("div",{style:{fontSize:64,marginBottom:16}}),(0,o.jsx)("h3",{style:{fontSize:18,fontWeight:600,marginBottom:8},children:"Nenhuma refei\xe7\xe3o registrada ainda"}),(0,o.jsx)("p",{style:{color:"#666",fontSize:14},children:"Comece registrando sua primeira refei\xe7\xe3o!"})]}):(0,o.jsx)(l,{meals:t,waterRecords:r,calorieGoal:p.calories,proteinGoal:p.protein,carbsGoal:p.carbs,fatGoal:p.fat,waterGoal:p.water})]})}},86394:function(e,t,i){"use strict";i.d(t,{R:function(){return l}});var o=i(2265),n=i(87185),a=i(45591);async function r(){let e=await a.h.get("/api/user/profile");if(!e.ok)throw Error("Failed to fetch user plan: ".concat(e.status));let t=(await e.json()).user;return{plan:t.plan||"free",subscription_status:t.subscription_status||"active",subscription_started_at:t.subscription_started_at,subscription_expires_at:t.subscription_expires_at}}async function s(){let e=await a.h.get("/api/subscription/quota");if(!e.ok)throw Error("Failed to fetch quota usage: ".concat(e.status));return e.json()}async function d(){try{let{Purchases:e}=await i.e(938).then(i.bind(i,31938)),{customerInfo:t}=await e.getCustomerInfo();await a.h.post("/api/subscription/sync",{customerInfo:t}),console.log("[useUserPlan] Sync success")}catch(e){console.warn("[useUserPlan] Sync error:",e)}}function l(){let[e,t]=(0,o.useState)("free"),[i,a]=(0,o.useState)("active"),[l,c]=(0,o.useState)(null),[g,u]=(0,o.useState)(!0),[p,h]=(0,o.useState)(null),f=(0,o.useRef)(!1),x=async()=>{try{u(!0),h(null),n.dV.isNativePlatform()&&!f.current&&(f.current=!0,await d());let e=await r();if(t(e.plan),a(e.subscription_status),"premium"===e.plan){let e=await s(),t=function(e){var t;let i=e.photo_analyses/e.limits.photo_analyses_per_month*100,o=e.ocr_analyses/e.limits.ocr_analyses_per_month*100,n=e.text_analyses/e.limits.text_analyses_per_month*100,a=null===(t=e.limits)||void 0===t?void 0:t.report_analyses_per_month,r=e.report_analyses,s=new Date,d=new Date(s.getFullYear(),s.getMonth()+1,1);return{photo_analyses:{used:e.photo_analyses,limit:e.limits.photo_analyses_per_month,percentage:Math.round(i),remaining:e.limits.photo_analyses_per_month-e.photo_analyses},ocr_analyses:{used:e.ocr_analyses,limit:e.limits.ocr_analyses_per_month,percentage:Math.round(o),remaining:e.limits.ocr_analyses_per_month-e.ocr_analyses},text_analyses:{used:e.text_analyses,limit:e.limits.text_analyses_per_month,percentage:Math.round(n),remaining:e.limits.text_analyses_per_month-e.text_analyses},report_analyses:void 0!==a?{used:r||0,limit:a,percentage:Math.round(a?(r||0)/a*100:0),remaining:a-(r||0)}:void 0,resetDate:d}}(e);c(t)}else c(null)}catch(e){console.error("Error fetching user plan:",e),h(e instanceof Error?e:Error("Unknown error")),t("free"),c(null)}finally{u(!1)}};return(0,o.useEffect)(()=>{x()},[]),{plan:e,subscription_status:i,quota:l,isLoading:g,error:p,refetch:x}}},68398:function(e,t,i){"use strict";i.d(t,{Ob:function(){return u},sc:function(){return p},showRewardedAd:function(){return h},tJ:function(){return g}});var o=i(87185);let n="ca-app-pub-3940256099942544/2934735716",a="ca-app-pub-3940256099942544/1712485313",r=null,s=null,d=null,l=!1;async function c(){if(!r)try{let e=await i.e(124).then(i.bind(i,97124));r=e.AdMob||null,s=e.BannerAdSize||null,d=e.BannerAdPosition||null}catch(e){console.warn("[AdMob] Community plugin not available:",e),r=null}}async function g(){if(o.dV.isNativePlatform()&&!l){if(await c(),!r){l=!0;return}try{"function"==typeof r.initialize&&await r.initialize({})}catch(e){console.warn("[AdMob] init error (non-fatal):",e)}finally{l=!0}}}async function u(){if(!o.dV.isNativePlatform()){console.log("[AdMob] showTopBanner: not native platform, skipping");return}if(await g(),!r){console.warn("[AdMob] showTopBanner: admob not loaded");return}try{console.log("[AdMob] showTopBanner: calling showBanner with id:",n),await r.showBanner({adId:n,adSize:null==s?void 0:s.ADAPTIVE_BANNER,position:null==d?void 0:d.TOP_CENTER,margin:0}),console.log("[AdMob] showTopBanner: success")}catch(e){console.warn("[AdMob] showTopBanner failed:",e)}}async function p(){if(o.dV.isNativePlatform()&&(await g(),r))try{await r.removeBanner()}catch(e){console.warn("[AdMob] hideTopBanner failed:",e)}}async function h(e){if(!o.dV.isNativePlatform())return console.log("[AdMob] Not native, simulating rewarded ad for dev"),!0;if(await g(),!r)return console.warn("[AdMob] showRewardedAd: admob not loaded, allowing action"),!0;try{return console.log("[AdMob] showRewardedAd: preparing with id:",a),await r.prepareRewardVideoAd({adId:a}),console.log("[AdMob] showRewardedAd: showing..."),await r.showRewardVideoAd(),console.log("[AdMob] showRewardedAd: completed successfully"),!0}catch(e){return console.warn("[AdMob] showRewardedAd failed:",e),!1}}},45591:function(e,t,i){"use strict";i.d(t,{h:function(){return r},x:function(){return a}});var o=i(45800);let n=i(20357).env.NEXT_PUBLIC_API_URL||"https://app.foodtracker.com.br";async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:i,...a}=t,r={...a.headers};if(i)r.Authorization="Bearer ".concat(i);else{let e=localStorage.getItem("auth_token");console.log("[API Client] localStorage auth_token:",e?"exists":"null"),e&&(r.Authorization="Bearer ".concat(e))}a.body&&"string"==typeof a.body&&!r["Content-Type"]&&(r["Content-Type"]="application/json");let s=e.startsWith("http")?e:"".concat(n).concat(e);console.log("[API Client]",{isMobile:!0,baseUrl:n,endpoint:e,finalUrl:s,hasAuthToken:!!r.Authorization,allHeaders:Object.keys(r),xAdCompleted:r["x-ad-completed"]||"not set"});try{let t=await fetch(s,{...a,headers:r,credentials:"include"});if(console.log("[API Client] Response ".concat(e,":"),{status:t.status}),401===t.status){console.warn("401 Unauthorized - triggering client logout");try{(0,o.h)()}catch(e){}}return t}catch(e){throw console.error("[API Client Error]",e),e}}let r={get:(e,t)=>a(e,{method:"GET",token:t}),post:(e,t,i)=>a(e,{method:"POST",body:JSON.stringify(t),token:i}),put:(e,t,i)=>a(e,{method:"PUT",body:JSON.stringify(t),token:i}),patch:(e,t,i)=>a(e,{method:"PATCH",body:JSON.stringify(t),token:i}),delete:(e,t)=>a(e,{method:"DELETE",token:t})}},45800:function(e,t,i){"use strict";function o(){try{try{localStorage.removeItem("auth_token")}catch(e){}try{localStorage.setItem("auth_logout_at",String(Date.now()))}catch(e){}try{window.dispatchEvent(new Event("app:logout"))}catch(e){}}catch(e){}}i.d(t,{h:function(){return o}})}},function(e){e.O(0,[325,94,971,23,744],function(){return e(e.s=53466)}),_N_E=e.O()}]);