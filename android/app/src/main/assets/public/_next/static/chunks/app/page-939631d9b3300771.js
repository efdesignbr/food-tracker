(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{70352:function(e,t,o){Promise.resolve().then(o.bind(o,76774))},76774:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return d}});var i=o(57437),r=o(2265),n=o(16463),s=o(45591);let a={breakfast:{label:"Caf\xe9 da Manh\xe3",icon:"",color:"#f59e0b"},lunch:{label:"Almo\xe7o",icon:"",color:"#10b981"},dinner:{label:"Jantar",icon:"",color:"#6366f1"},snack:{label:"Lanche",icon:"",color:"#ec4899"}};function d(){let e=(0,n.useRouter)(),[t,o]=(0,r.useState)([]),[d,l]=(0,r.useState)({calories:2e3,protein:150,carbs:250,fat:65,water:2e3}),[c,g]=(0,r.useState)(0),[u,h]=(0,r.useState)(0),[p,f]=(0,r.useState)(!0),[x,m]=(0,r.useState)(null),[b,y]=(0,r.useState)(!1),[v,j]=(0,r.useState)(!1),[S,_]=(0,r.useState)(null),[w,k]=(0,r.useState)(""),[z,R]=(0,r.useState)(!1),[W,F]=(0,r.useState)(!1),[C,T]=(0,r.useState)(null),[A,B]=(0,r.useState)(null);async function E(){try{f(!0),m(null);let[e,t,i,r]=await Promise.all([s.h.get("/api/meals"),s.h.get("/api/user/profile"),s.h.get("/api/water-intake"),s.h.get("/api/bowel-movements")]);if(!e.ok)throw Error("Erro ao buscar refei\xe7\xf5es");let n=await e.json();if(o(n.meals||[]),t.ok){let e=await t.json();l({calories:e.user.goals.calories,protein:e.user.goals.protein,carbs:e.user.goals.carbs,fat:e.user.goals.fat,water:e.user.goals.water||2e3})}if(i.ok){let e=await i.json();g(e.total_ml||0)}if(r.ok){let e=await r.json();h(e.count||0)}}catch(e){m(e.message)}finally{f(!1)}}let D=e=>(e.cholesterol_mg||0)>0||(e.saturated_fat_g||0)>0||(e.calcium_mg||0)>0||(e.magnesium_mg||0)>0||(e.phosphorus_mg||0)>0||(e.iron_mg||0)>0||(e.potassium_mg||0)>0||(e.zinc_mg||0)>0||(e.copper_mg||0)>0||(e.manganese_mg||0)>0||(e.vitamin_c_mg||0)>0||(e.vitamin_a_mcg||0)>0||(e.vitamin_b1_mg||0)>0||(e.vitamin_b2_mg||0)>0||(e.vitamin_b3_mg||0)>0||(e.vitamin_b6_mg||0)>0;(0,r.useEffect)(()=>{E()},[]);let M=async e=>{try{y(!0);let t=await s.h.post("/api/water-intake",{amount_ml:e});if(t.ok){let e=await t.json();g(e.total_today_ml)}}catch(e){console.error("Erro ao adicionar \xe1gua:",e)}finally{y(!1)}},P=async e=>{try{F(!0);let t=w.trim();z&&(t=t?"SANGUE: Sim\n".concat(t):"SANGUE: Sim");let o=await s.h.post("/api/bowel-movements",{bristol_type:e,notes:t||null});if(o.ok){let e=await o.json();h(e.count_today),j(!1),_(null),k(""),R(!1)}}catch(e){console.error("Erro ao adicionar evacua\xe7\xe3o:",e)}finally{F(!1)}},I=(0,r.useMemo)(()=>{let e=new Date().toLocaleDateString("en-CA",{timeZone:"America/Sao_Paulo"}),o=t.filter(t=>new Date(t.consumed_at).toLocaleDateString("en-CA",{timeZone:"America/Sao_Paulo"})===e),i=o.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.calories||0),0),0),r=o.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.protein_g||0),0),0),n=o.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.carbs_g||0),0),0),s=o.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.fat_g||0),0),0);return{calories:i,protein:r,carbs:n,fat:s,fiber:o.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.fiber_g||0),0),0),sodium:o.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.sodium_mg||0),0),0),sugar:o.reduce((e,t)=>e+t.foods.reduce((e,t)=>e+(t.sugar_g||0),0),0),meals:o.slice(0,3)}},[t]);return p?(0,i.jsx)("div",{style:{padding:24,maxWidth:800,margin:"0 auto"},children:(0,i.jsxs)("div",{style:{textAlign:"center",padding:48},children:[(0,i.jsx)("div",{style:{fontSize:48,marginBottom:16}}),(0,i.jsx)("p",{style:{color:"#666",fontSize:16},children:"Carregando..."})]})}):x?(0,i.jsx)("div",{style:{padding:24,maxWidth:800,margin:"0 auto"},children:(0,i.jsxs)("div",{style:{padding:24,background:"#fee2e2",border:"2px solid #ef4444",borderRadius:12,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:48,marginBottom:8}}),(0,i.jsx)("p",{style:{color:"#991b1b",margin:0,fontWeight:700},children:"N\xe3o foi poss\xedvel carregar seus dados."}),(0,i.jsx)("p",{style:{color:"#991b1b",marginTop:8},children:"Verifique sua conex\xe3o com a internet e tente novamente."}),(0,i.jsx)("div",{style:{marginTop:12},children:(0,i.jsx)("button",{onClick:E,style:{padding:"10px 16px",background:"#ef4444",color:"white",border:"none",borderRadius:8,fontWeight:600,cursor:"pointer"},children:"Tentar novamente"})}),(0,i.jsxs)("p",{style:{color:"#b91c1c",marginTop:12,fontSize:12},children:["Detalhe t\xe9cnico: ",x]})]})}):(0,i.jsxs)("div",{style:{padding:16,paddingTop:24,maxWidth:800,margin:"0 auto",paddingBottom:80},children:[(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:20,marginBottom:20},children:[(0,i.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,i.jsx)("h2",{style:{fontSize:18,fontWeight:700,marginBottom:16,color:"#2196F3"},children:"Progresso de Hoje"}),(0,i.jsxs)("div",{style:{marginBottom:16},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[(0,i.jsx)("span",{style:{fontSize:14,fontWeight:600,color:"#374151"},children:"Calorias"}),(0,i.jsxs)("span",{style:{fontSize:14,fontWeight:700,color:I.calories>d.calories?"#ef4444":"#2196F3"},children:[I.calories.toFixed(0)," / ",d.calories," kcal"]})]}),(0,i.jsx)("div",{style:{width:"100%",height:8,background:"#e5e7eb",borderRadius:4,overflow:"hidden"},children:(0,i.jsx)("div",{style:{width:"".concat(Math.min(I.calories/d.calories*100,100),"%"),height:"100%",background:I.calories>d.calories?"linear-gradient(90deg, #f59e0b 0%, #ef4444 100%)":"linear-gradient(90deg, #10b981 0%, #2196F3 100%)",transition:"width 0.3s ease"}})}),I.calories>d.calories&&(0,i.jsxs)("p",{style:{fontSize:11,color:"#ef4444",margin:"4px 0 0 0"},children:["Acima da meta em ",(I.calories-d.calories).toFixed(0)," kcal"]}),I.calories<d.calories&&I.calories>0&&(0,i.jsxs)("p",{style:{fontSize:11,color:"#10b981",margin:"4px 0 0 0"},children:["Restam ",(d.calories-I.calories).toFixed(0)," kcal"]})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:10,flex:1},children:[(0,i.jsxs)("div",{style:{background:"linear-gradient(to top, #16a34a ".concat(Math.min(I.protein/d.protein*100,100),"%, #6b7280 ").concat(Math.min(I.protein/d.protein*100,100),"%)"),borderRadius:10,padding:12,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:11,color:"white",marginBottom:4,fontWeight:600},children:"Prote\xedna"}),(0,i.jsxs)("div",{style:{fontSize:18,fontWeight:700,color:"white"},children:[I.protein.toFixed(0),"g"]}),(0,i.jsxs)("div",{style:{fontSize:10,color:"rgba(255,255,255,0.8)"},children:["Meta: ",d.protein,"g"]})]}),(0,i.jsxs)("div",{style:{background:"linear-gradient(to top, #16a34a ".concat(Math.min(I.carbs/d.carbs*100,100),"%, #6b7280 ").concat(Math.min(I.carbs/d.carbs*100,100),"%)"),borderRadius:10,padding:12,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:11,color:"white",marginBottom:4,fontWeight:600},children:"Carbos"}),(0,i.jsxs)("div",{style:{fontSize:18,fontWeight:700,color:"white"},children:[I.carbs.toFixed(0),"g"]}),(0,i.jsxs)("div",{style:{fontSize:10,color:"rgba(255,255,255,0.8)"},children:["Meta: ",d.carbs,"g"]})]}),(0,i.jsxs)("div",{style:{background:"linear-gradient(to top, #16a34a ".concat(Math.min(I.fat/d.fat*100,100),"%, #6b7280 ").concat(Math.min(I.fat/d.fat*100,100),"%)"),borderRadius:10,padding:12,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:11,color:"white",marginBottom:4,fontWeight:600},children:"Gorduras"}),(0,i.jsxs)("div",{style:{fontSize:18,fontWeight:700,color:"white"},children:[I.fat.toFixed(0),"g"]}),(0,i.jsxs)("div",{style:{fontSize:10,color:"rgba(255,255,255,0.8)"},children:["Meta: ",d.fat,"g"]})]}),(0,i.jsxs)("div",{style:{background:"linear-gradient(to top, #16a34a ".concat(Math.min(I.fiber/25*100,100),"%, #6b7280 ").concat(Math.min(I.fiber/25*100,100),"%)"),borderRadius:10,padding:12,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:11,color:"white",marginBottom:4,fontWeight:600},children:"Fibras"}),(0,i.jsxs)("div",{style:{fontSize:18,fontWeight:700,color:"white"},children:[I.fiber.toFixed(0),"g"]}),(0,i.jsx)("div",{style:{fontSize:10,color:"rgba(255,255,255,0.8)"},children:"Meta: 25g"})]}),(0,i.jsxs)("div",{style:{background:"linear-gradient(to top, #dc2626 ".concat(Math.min(I.sugar/50*100,100),"%, #6b7280 ").concat(Math.min(I.sugar/50*100,100),"%)"),borderRadius:10,padding:12,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:11,color:"white",marginBottom:4,fontWeight:600},children:"A\xe7\xfacar"}),(0,i.jsxs)("div",{style:{fontSize:18,fontWeight:700,color:"white"},children:[I.sugar.toFixed(0),"g"]}),(0,i.jsx)("div",{style:{fontSize:10,color:"rgba(255,255,255,0.8)"},children:"Limite: 50g"})]}),(0,i.jsxs)("div",{style:{background:"linear-gradient(to top, #dc2626 ".concat(Math.min(I.sodium/2300*100,100),"%, #6b7280 ").concat(Math.min(I.sodium/2300*100,100),"%)"),borderRadius:10,padding:12,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:11,color:"white",marginBottom:4,fontWeight:600},children:"S\xf3dio"}),(0,i.jsx)("div",{style:{fontSize:18,fontWeight:700,color:"white"},children:I.sodium.toFixed(0)}),(0,i.jsx)("div",{style:{fontSize:10,color:"rgba(255,255,255,0.8)"},children:"Limite: 2300mg"})]})]})]}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[(0,i.jsxs)("div",{style:{background:"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)",borderRadius:16,padding:20,boxShadow:"0 2px 8px rgba(6, 182, 212, 0.3)"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,i.jsx)("h2",{style:{fontSize:18,fontWeight:700,margin:0,color:"white"},children:"Hidrata\xe7\xe3o"}),(0,i.jsxs)("span",{style:{fontSize:13,color:"rgba(255,255,255,0.8)"},children:[Math.floor(c/250)," ",1===Math.floor(c/250)?"copo":"copos"]})]}),(0,i.jsxs)("div",{style:{marginBottom:16},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[(0,i.jsx)("span",{style:{fontSize:14,fontWeight:600,color:"white"},children:"\xc1gua"}),(0,i.jsxs)("span",{style:{fontSize:14,fontWeight:700,color:"white"},children:[c," / ",d.water," ml"]})]}),(0,i.jsx)("div",{style:{width:"100%",height:8,background:"rgba(255,255,255,0.3)",borderRadius:4,overflow:"hidden"},children:(0,i.jsx)("div",{style:{width:"".concat(Math.min(c/d.water*100,100),"%"),height:"100%",background:"white",transition:"width 0.3s ease"}})}),c>=d.water&&(0,i.jsx)("p",{style:{fontSize:11,color:"rgba(255,255,255,0.9)",margin:"4px 0 0 0"},children:"Meta atingida!"}),c<d.water&&c>0&&(0,i.jsxs)("p",{style:{fontSize:11,color:"rgba(255,255,255,0.8)",margin:"4px 0 0 0"},children:["Faltam ",d.water-c,"ml"]})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,i.jsx)("button",{onClick:()=>M(250),disabled:b,style:{flex:1,padding:"10px 12px",border:"none",background:"rgba(255,255,255,0.2)",color:"white",borderRadius:8,fontWeight:600,fontSize:14,cursor:b?"not-allowed":"pointer"},children:"+250ml"}),(0,i.jsx)("button",{onClick:()=>M(500),disabled:b,style:{flex:1,padding:"10px 12px",border:"none",background:"rgba(255,255,255,0.2)",color:"white",borderRadius:8,fontWeight:600,fontSize:14,cursor:b?"not-allowed":"pointer"},children:"+500ml"})]})]}),(0,i.jsxs)("div",{style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",borderRadius:16,padding:20,boxShadow:"0 2px 8px rgba(245, 158, 11, 0.3)"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,i.jsx)("h2",{style:{fontSize:18,fontWeight:700,margin:0,color:"white"},children:"Sa\xfade Intestinal"}),(0,i.jsxs)("span",{style:{fontSize:13,color:"rgba(255,255,255,0.8)"},children:[u," ",1===u?"vez":"vezes"," hoje"]})]}),v?(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{style:{fontSize:13,color:"rgba(255,255,255,0.9)",marginBottom:12},children:"Selecione o tipo (Escala de Bristol):"}),(0,i.jsx)("div",{style:{display:"grid",gap:8,marginBottom:16},children:[{type:1,emoji:"\uD83D\uDFE4",color:"#78350f",desc:"Peda\xe7os duros separados"},{type:2,emoji:"\uD83D\uDFE4",color:"#92400e",desc:"Formato de salsicha irregular"},{type:3,emoji:"\uD83D\uDFE2",color:"#166534",desc:"Salsicha com rachaduras (normal)"},{type:4,emoji:"✅",color:"#15803d",desc:"Salsicha lisa e macia (ideal)"},{type:5,emoji:"\uD83D\uDFE1",color:"#a16207",desc:"Peda\xe7os macios"},{type:6,emoji:"\uD83D\uDFE0",color:"#c2410c",desc:"Peda\xe7os moles irregulares"},{type:7,emoji:"\uD83D\uDD34",color:"#dc2626",desc:"Aquoso, l\xedquido"}].map(e=>(0,i.jsxs)("button",{onClick:()=>_(e.type),style:{padding:"12px 16px",border:S===e.type?"2px solid #f59e0b":"2px solid #e5e7eb",background:S===e.type?"#fffbeb":"white",borderRadius:10,cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:12,textAlign:"left"},children:[(0,i.jsx)("span",{style:{fontSize:24},children:e.emoji}),(0,i.jsxs)("div",{style:{flex:1},children:[(0,i.jsxs)("div",{style:{fontSize:12,fontWeight:600,color:e.color},children:["Tipo ",e.type]}),(0,i.jsx)("div",{style:{fontSize:11,color:"#6b7280"},children:e.desc})]})]},e.type))}),(0,i.jsxs)("div",{style:{padding:"12px 16px",background:z?"#fef2f2":"#f9fafb",border:"2px solid ".concat(z?"#ef4444":"#e5e7eb"),borderRadius:10,marginBottom:12},children:[(0,i.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:12,cursor:"pointer",fontSize:14,fontWeight:600,color:z?"#991b1b":"#374151"},children:[(0,i.jsx)("input",{type:"checkbox",checked:z,onChange:e=>R(e.target.checked),style:{width:20,height:20,cursor:"pointer"}}),(0,i.jsx)("span",{children:"\uD83E\uDE78 Presen\xe7a de sangue"})]}),z&&(0,i.jsx)("p",{style:{fontSize:11,color:"#dc2626",margin:"8px 0 0 32px",lineHeight:"1.4"},children:"Sangue nas fezes pode indicar problemas s\xe9rios. Consulte um m\xe9dico."})]}),(0,i.jsxs)("div",{style:{marginBottom:16},children:[(0,i.jsx)("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"#374151",marginBottom:8},children:"Observa\xe7\xf5es adicionais (opcional):"}),(0,i.jsx)("textarea",{value:w,onChange:e=>k(e.target.value),placeholder:"Ex: dor, urg\xeancia, cor anormal, etc.",maxLength:200,style:{width:"100%",minHeight:60,padding:12,fontSize:14,border:"2px solid #e5e7eb",borderRadius:10,resize:"vertical",fontFamily:"inherit",boxSizing:"border-box"}}),(0,i.jsxs)("div",{style:{fontSize:11,color:"#9ca3af",textAlign:"right",marginTop:4},children:[w.length,"/200"]})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,i.jsx)("button",{onClick:()=>{j(!1),_(null),k(""),R(!1)},style:{flex:1,padding:"12px 16px",border:"2px solid #e5e7eb",background:"white",color:"#6b7280",borderRadius:10,fontWeight:600,fontSize:14,cursor:"pointer"},children:"Cancelar"}),(0,i.jsx)("button",{onClick:()=>S&&P(S),disabled:!S||W,style:{flex:1,padding:"12px 16px",border:"none",background:!S||W?"#94a3b8":"#f59e0b",color:"white",borderRadius:10,fontWeight:600,fontSize:14,cursor:!S||W?"not-allowed":"pointer"},children:W?"Salvando...":"Salvar"})]})]}):(0,i.jsx)("button",{onClick:()=>j(!0),style:{width:"100%",padding:"10px 12px",border:"none",background:"rgba(255,255,255,0.2)",color:"white",borderRadius:8,fontWeight:600,fontSize:14,cursor:"pointer"},children:"Registrar Evacua\xe7\xe3o"})]})]})]}),(0,i.jsxs)("button",{onClick:()=>e.push("/capture"),style:{width:"100%",padding:"24px 20px",border:"none",background:"linear-gradient(135deg, #2196F3 0%, #1976D2 100%)",color:"white",borderRadius:16,fontWeight:700,fontSize:20,cursor:"pointer",boxShadow:"0 6px 20px rgba(33, 150, 243, 0.4)",marginBottom:24,display:"flex",flexDirection:"column",alignItems:"center",gap:8,transition:"transform 0.2s, box-shadow 0.2s"},onMouseOver:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(33, 150, 243, 0.5)"},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 6px 20px rgba(33, 150, 243, 0.4)"},children:[(0,i.jsx)("span",{style:{fontSize:40}}),(0,i.jsx)("span",{children:"Registrar Refei\xe7\xe3o"})]}),I.meals.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[(0,i.jsx)("h3",{style:{fontSize:16,fontWeight:700,margin:0},children:" \xdaltimas Refei\xe7\xf5es"}),(0,i.jsx)("button",{onClick:()=>e.push("/history"),style:{padding:"6px 12px",border:"none",background:"#f0f9ff",color:"#2196F3",borderRadius:8,fontSize:13,fontWeight:600,cursor:"pointer"},children:"Ver Todas"})]}),(0,i.jsx)("div",{style:{display:"grid",gap:12},children:I.meals.map(e=>{let t=e.foods.reduce((e,t)=>e+(t.calories||0),0),o=e.foods.reduce((e,t)=>e+(t.protein_g||0),0),r=e.foods.reduce((e,t)=>e+(t.carbs_g||0),0),n=e.foods.reduce((e,t)=>e+(t.fat_g||0),0),s=e.foods.reduce((e,t)=>e+(t.fiber_g||0),0),d=e.foods.reduce((e,t)=>e+(t.sodium_mg||0),0),l=e.foods.reduce((e,t)=>e+(t.sugar_g||0),0),c=a[e.meal_type]||a.lunch,g=C===e.id;return(0,i.jsxs)("div",{onClick:()=>T(g?null:e.id),style:{background:"white",borderRadius:12,padding:16,boxShadow:g?"0 4px 12px rgba(0,0,0,0.15)":"0 2px 4px rgba(0,0,0,0.1)",border:g?"2px solid ".concat(c.color):"1px solid #e5e7eb",cursor:"pointer",transition:"all 0.2s ease"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,i.jsx)("span",{style:{fontSize:32},children:c.icon}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:14,fontWeight:700,color:c.color},children:c.label}),(0,i.jsx)("div",{style:{fontSize:12,color:"#6b7280"},children:new Date(e.consumed_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]})]}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,i.jsxs)("div",{style:{textAlign:"right"},children:[(0,i.jsx)("div",{style:{fontSize:18,fontWeight:700,color:"#374151"},children:t.toFixed(0)}),(0,i.jsx)("div",{style:{fontSize:11,color:"#6b7280"},children:"kcal"})]}),(0,i.jsx)("span",{style:{fontSize:16,color:"#9ca3af",transform:g?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"}})]})]}),g&&(0,i.jsxs)("div",{style:{marginTop:16,paddingTop:16,borderTop:"1px solid #e5e7eb"},children:[(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8,marginBottom:16},children:[(0,i.jsxs)("div",{style:{textAlign:"center",padding:8,background:"#fef3c7",borderRadius:8},children:[(0,i.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#d97706"},children:[o.toFixed(0),"g"]}),(0,i.jsx)("div",{style:{fontSize:11,color:"#92400e"},children:"Prote\xedna"})]}),(0,i.jsxs)("div",{style:{textAlign:"center",padding:8,background:"#dbeafe",borderRadius:8},children:[(0,i.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#2563eb"},children:[r.toFixed(0),"g"]}),(0,i.jsx)("div",{style:{fontSize:11,color:"#1e40af"},children:"Carbos"})]}),(0,i.jsxs)("div",{style:{textAlign:"center",padding:8,background:"#fce7f3",borderRadius:8},children:[(0,i.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#db2777"},children:[n.toFixed(0),"g"]}),(0,i.jsx)("div",{style:{fontSize:11,color:"#9d174d"},children:"Gordura"})]}),(0,i.jsxs)("div",{style:{textAlign:"center",padding:8,background:"#d1fae5",borderRadius:8},children:[(0,i.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#059669"},children:[s.toFixed(0),"g"]}),(0,i.jsx)("div",{style:{fontSize:11,color:"#065f46"},children:"Fibra"})]}),(0,i.jsxs)("div",{style:{textAlign:"center",padding:8,background:"#e0e7ff",borderRadius:8},children:[(0,i.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#4f46e5"},children:[d.toFixed(0),"mg"]}),(0,i.jsx)("div",{style:{fontSize:11,color:"#3730a3"},children:"S\xf3dio"})]}),(0,i.jsxs)("div",{style:{textAlign:"center",padding:8,background:"#fef9c3",borderRadius:8},children:[(0,i.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#ca8a04"},children:[l.toFixed(0),"g"]}),(0,i.jsx)("div",{style:{fontSize:11,color:"#854d0e"},children:"A\xe7\xfacar"})]})]}),e.foods.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{style:{fontSize:12,fontWeight:600,color:"#6b7280",marginBottom:8},children:["Alimentos (",e.foods.length,")"]}),(0,i.jsx)("div",{style:{display:"grid",gap:8},children:e.foods.map(e=>{var t,o,r,n,s,a,d,l,c,g,u,h,p,f,x,m;let b=A===e.id,y=D(e);return(0,i.jsxs)("div",{style:{padding:"10px 12px",background:"#f9fafb",borderRadius:8,fontSize:13},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6},children:[(0,i.jsxs)("span",{style:{color:"#374151",fontWeight:500},children:[e.name,(0,i.jsxs)("span",{style:{color:"#9ca3af",marginLeft:4,fontWeight:400},children:["(",e.quantity," ",e.unit,")"]})]}),(0,i.jsxs)("span",{style:{fontWeight:600,color:"#6b7280"},children:[(e.calories||0).toFixed(0)," kcal"]})]}),(0,i.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:6,fontSize:11},children:[(0,i.jsxs)("span",{style:{color:"#d97706",background:"#fef3c7",padding:"2px 6px",borderRadius:4},children:["P: ",(e.protein_g||0).toFixed(0),"g"]}),(0,i.jsxs)("span",{style:{color:"#2563eb",background:"#dbeafe",padding:"2px 6px",borderRadius:4},children:["C: ",(e.carbs_g||0).toFixed(0),"g"]}),(0,i.jsxs)("span",{style:{color:"#db2777",background:"#fce7f3",padding:"2px 6px",borderRadius:4},children:["G: ",(e.fat_g||0).toFixed(0),"g"]}),(0,i.jsxs)("span",{style:{color:"#059669",background:"#d1fae5",padding:"2px 6px",borderRadius:4},children:["F: ",(e.fiber_g||0).toFixed(0),"g"]}),(0,i.jsxs)("span",{style:{color:"#4f46e5",background:"#e0e7ff",padding:"2px 6px",borderRadius:4},children:["S: ",(e.sodium_mg||0).toFixed(0),"mg"]}),(0,i.jsxs)("span",{style:{color:"#ca8a04",background:"#fef9c3",padding:"2px 6px",borderRadius:4},children:["A: ",(e.sugar_g||0).toFixed(0),"g"]})]}),y&&(0,i.jsxs)("button",{onClick:t=>{t.stopPropagation(),B(b?null:e.id)},style:{marginTop:8,padding:"4px 8px",border:"none",background:b?"#7c3aed":"#ede9fe",color:b?"white":"#7c3aed",borderRadius:4,fontSize:10,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:4},children:[b?"Ocultar":"Ver"," Micronutrientes",(0,i.jsx)("span",{style:{transform:b?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:"▼"})]}),b&&y&&(0,i.jsxs)("div",{style:{marginTop:8,padding:10,background:"#faf5ff",borderRadius:6,border:"1px solid #e9d5ff"},children:[(0,i.jsx)("div",{style:{fontSize:10,fontWeight:600,color:"#7c3aed",marginBottom:8},children:"Micronutrientes"}),(0,i.jsxs)("div",{style:{marginBottom:8},children:[(0,i.jsx)("div",{style:{fontSize:9,fontWeight:600,color:"#6b7280",marginBottom:4},children:"Minerais"}),(0,i.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:4,fontSize:10},children:[(e.calcium_mg||0)>0&&(0,i.jsxs)("span",{style:{background:"#fef3c7",color:"#92400e",padding:"2px 6px",borderRadius:4},children:["Ca: ",null===(t=e.calcium_mg)||void 0===t?void 0:t.toFixed(1),"mg"]}),(e.iron_mg||0)>0&&(0,i.jsxs)("span",{style:{background:"#fee2e2",color:"#991b1b",padding:"2px 6px",borderRadius:4},children:["Fe: ",null===(o=e.iron_mg)||void 0===o?void 0:o.toFixed(1),"mg"]}),(e.magnesium_mg||0)>0&&(0,i.jsxs)("span",{style:{background:"#d1fae5",color:"#065f46",padding:"2px 6px",borderRadius:4},children:["Mg: ",null===(r=e.magnesium_mg)||void 0===r?void 0:r.toFixed(1),"mg"]}),(e.phosphorus_mg||0)>0&&(0,i.jsxs)("span",{style:{background:"#e0e7ff",color:"#3730a3",padding:"2px 6px",borderRadius:4},children:["P: ",null===(n=e.phosphorus_mg)||void 0===n?void 0:n.toFixed(1),"mg"]}),(e.potassium_mg||0)>0&&(0,i.jsxs)("span",{style:{background:"#fce7f3",color:"#9d174d",padding:"2px 6px",borderRadius:4},children:["K: ",null===(s=e.potassium_mg)||void 0===s?void 0:s.toFixed(1),"mg"]}),(e.zinc_mg||0)>0&&(0,i.jsxs)("span",{style:{background:"#cffafe",color:"#155e75",padding:"2px 6px",borderRadius:4},children:["Zn: ",null===(a=e.zinc_mg)||void 0===a?void 0:a.toFixed(2),"mg"]}),(e.copper_mg||0)>0&&(0,i.jsxs)("span",{style:{background:"#fed7aa",color:"#9a3412",padding:"2px 6px",borderRadius:4},children:["Cu: ",null===(d=e.copper_mg)||void 0===d?void 0:d.toFixed(3),"mg"]}),(e.manganese_mg||0)>0&&(0,i.jsxs)("span",{style:{background:"#f5d0fe",color:"#86198f",padding:"2px 6px",borderRadius:4},children:["Mn: ",null===(l=e.manganese_mg)||void 0===l?void 0:l.toFixed(3),"mg"]})]})]}),((e.vitamin_c_mg||0)>0||(e.vitamin_a_mcg||0)>0||(e.vitamin_b1_mg||0)>0||(e.vitamin_b2_mg||0)>0||(e.vitamin_b3_mg||0)>0||(e.vitamin_b6_mg||0)>0)&&(0,i.jsxs)("div",{style:{marginBottom:8},children:[(0,i.jsx)("div",{style:{fontSize:9,fontWeight:600,color:"#6b7280",marginBottom:4},children:"Vitaminas"}),(0,i.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:4,fontSize:10},children:[(e.vitamin_a_mcg||0)>0&&(0,i.jsxs)("span",{style:{background:"#ffedd5",color:"#9a3412",padding:"2px 6px",borderRadius:4},children:["Vit A: ",null===(c=e.vitamin_a_mcg)||void 0===c?void 0:c.toFixed(1),"mcg"]}),(e.vitamin_c_mg||0)>0&&(0,i.jsxs)("span",{style:{background:"#fef9c3",color:"#854d0e",padding:"2px 6px",borderRadius:4},children:["Vit C: ",null===(g=e.vitamin_c_mg)||void 0===g?void 0:g.toFixed(1),"mg"]}),(e.vitamin_b1_mg||0)>0&&(0,i.jsxs)("span",{style:{background:"#ecfccb",color:"#3f6212",padding:"2px 6px",borderRadius:4},children:["B1: ",null===(u=e.vitamin_b1_mg)||void 0===u?void 0:u.toFixed(3),"mg"]}),(e.vitamin_b2_mg||0)>0&&(0,i.jsxs)("span",{style:{background:"#d9f99d",color:"#365314",padding:"2px 6px",borderRadius:4},children:["B2: ",null===(h=e.vitamin_b2_mg)||void 0===h?void 0:h.toFixed(3),"mg"]}),(e.vitamin_b3_mg||0)>0&&(0,i.jsxs)("span",{style:{background:"#a7f3d0",color:"#14532d",padding:"2px 6px",borderRadius:4},children:["B3: ",null===(p=e.vitamin_b3_mg)||void 0===p?void 0:p.toFixed(3),"mg"]}),(e.vitamin_b6_mg||0)>0&&(0,i.jsxs)("span",{style:{background:"#99f6e4",color:"#134e4a",padding:"2px 6px",borderRadius:4},children:["B6: ",null===(f=e.vitamin_b6_mg)||void 0===f?void 0:f.toFixed(3),"mg"]})]})]}),((e.cholesterol_mg||0)>0||(e.saturated_fat_g||0)>0)&&(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:9,fontWeight:600,color:"#6b7280",marginBottom:4},children:"Outros"}),(0,i.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:4,fontSize:10},children:[(e.cholesterol_mg||0)>0&&(0,i.jsxs)("span",{style:{background:"#fecaca",color:"#991b1b",padding:"2px 6px",borderRadius:4},children:["Colesterol: ",null===(x=e.cholesterol_mg)||void 0===x?void 0:x.toFixed(1),"mg"]}),(e.saturated_fat_g||0)>0&&(0,i.jsxs)("span",{style:{background:"#fecdd3",color:"#9f1239",padding:"2px 6px",borderRadius:4},children:["G. Saturada: ",null===(m=e.saturated_fat_g)||void 0===m?void 0:m.toFixed(1),"g"]})]})]})]})]},e.id)})})]}),e.notes&&(0,i.jsxs)("div",{style:{marginTop:12,padding:12,background:"#fffbeb",borderRadius:8},children:[(0,i.jsx)("div",{style:{fontSize:11,fontWeight:600,color:"#92400e",marginBottom:4},children:"Notas"}),(0,i.jsx)("div",{style:{fontSize:13,color:"#78350f"},children:e.notes})]})]})]},e.id)})})]}),0===I.meals.length&&(0,i.jsxs)("div",{style:{textAlign:"center",padding:"48px 24px",background:"#f9fafb",borderRadius:16,border:"2px dashed #d1d5db"},children:[(0,i.jsx)("div",{style:{fontSize:64,marginBottom:16}}),(0,i.jsx)("h3",{style:{fontSize:18,fontWeight:600,marginBottom:8},children:"Nenhuma refei\xe7\xe3o registrada hoje"}),(0,i.jsx)("p",{style:{color:"#666",fontSize:14,marginBottom:16},children:"Comece registrando sua primeira refei\xe7\xe3o do dia!"}),(0,i.jsx)("button",{onClick:()=>e.push("/capture"),style:{padding:"12px 24px",border:"none",background:"#2196F3",color:"white",borderRadius:12,fontWeight:600,fontSize:14,cursor:"pointer"},children:"Registrar Agora"})]})]})}},45591:function(e,t,o){"use strict";o.d(t,{h:function(){return s},x:function(){return n}});var i=o(45800);let r=o(20357).env.NEXT_PUBLIC_API_URL||"https://app.foodtracker.com.br";async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:o,timeoutMs:n,...s}=t,a={...s.headers};if(o)a.Authorization="Bearer ".concat(o);else{let e=localStorage.getItem("auth_token");console.log("[API Client] localStorage auth_token:",e?"exists":"null"),e&&(a.Authorization="Bearer ".concat(e))}s.body&&"string"==typeof s.body&&!a["Content-Type"]&&(a["Content-Type"]="application/json");let d=e.startsWith("http")?e:"".concat(r).concat(e);console.log("[API Client]",{isMobile:!0,baseUrl:r,endpoint:e,finalUrl:d,hasAuthToken:!!a.Authorization,allHeaders:Object.keys(a),xAdCompleted:a["x-ad-completed"]||"not set"});try{var l;let t=s.signal?null:new AbortController,o=null!==(l=null==t?void 0:t.signal)&&void 0!==l?l:s.signal,r=null;t&&(r=setTimeout(()=>{try{t.abort()}catch(e){}},"number"==typeof n?n:1e4));let c=await fetch(d,{...s,headers:a,credentials:"include",signal:o});if(r&&clearTimeout(r),console.log("[API Client] Response ".concat(e,":"),{status:c.status}),401===c.status){console.warn("401 Unauthorized - triggering client logout");try{(0,i.h)()}catch(e){}}if(404===c.status)try{let e=c.clone(),t=await e.json().catch(()=>null),o=(null==t?void 0:t.error)||"";if("string"==typeof o&&o.toLowerCase().includes("tenant")){console.warn("404 tenant_not_found - triggering client logout");try{(0,i.h)()}catch(e){}}}catch(e){}return c}catch(e){if((null==e?void 0:e.name)==="AbortError")throw console.error("[API Client Error] Timeout"),Error("Tempo de rede esgotado");throw console.error("[API Client Error]",e),e}}let s={get:(e,t)=>n(e,{method:"GET",token:t}),post:(e,t,o)=>n(e,{method:"POST",body:JSON.stringify(t),token:o}),put:(e,t,o)=>n(e,{method:"PUT",body:JSON.stringify(t),token:o}),patch:(e,t,o)=>n(e,{method:"PATCH",body:JSON.stringify(t),token:o}),delete:(e,t)=>n(e,{method:"DELETE",token:t})}},45800:function(e,t,o){"use strict";function i(){try{try{localStorage.removeItem("auth_token")}catch(e){}try{localStorage.setItem("auth_logout_at",String(Date.now()))}catch(e){}try{window.dispatchEvent(new Event("app:logout"))}catch(e){}}catch(e){}}o.d(t,{h:function(){return i}})},16463:function(e,t,o){"use strict";var i=o(71169);o.o(i,"usePathname")&&o.d(t,{usePathname:function(){return i.usePathname}}),o.o(i,"useRouter")&&o.d(t,{useRouter:function(){return i.useRouter}}),o.o(i,"useSearchParams")&&o.d(t,{useSearchParams:function(){return i.useSearchParams}})},20357:function(e,t,o){"use strict";var i,r;e.exports=(null==(i=o.g.process)?void 0:i.env)&&"object"==typeof(null==(r=o.g.process)?void 0:r.env)?o.g.process:o(88081)},88081:function(e){!function(){var t={229:function(e){var t,o,i,r=e.exports={};function n(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(o){try{return t.call(null,e,0)}catch(o){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:n}catch(e){t=n}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var d=[],l=!1,c=-1;function g(){l&&i&&(l=!1,i.length?d=i.concat(d):c=-1,d.length&&u())}function u(){if(!l){var e=a(g);l=!0;for(var t=d.length;t;){for(i=d,d=[];++c<t;)i&&i[c].run();c=-1,t=d.length}i=null,l=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];d.push(new h(e,t)),1!==d.length||l||a(u)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},o={};function i(e){var r=o[e];if(void 0!==r)return r.exports;var n=o[e]={exports:{}},s=!0;try{t[e](n,n.exports,i),s=!1}finally{s&&delete o[e]}return n.exports}i.ab="//";var r=i(229);e.exports=r}()}},function(e){e.O(0,[971,23,744],function(){return e(e.s=70352)}),_N_E=e.O()}]);