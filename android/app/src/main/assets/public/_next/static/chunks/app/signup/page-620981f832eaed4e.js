(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{6613:function(e,t,o){Promise.resolve().then(o.bind(o,1039))},1039:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return c}});var r=o(7437),n=o(2265),i=o(8174),a=o(6463),s=o(7138),l=o(5591);function u(){let[e,t]=(0,n.useState)(""),[o,u]=(0,n.useState)(""),[c,d]=(0,n.useState)(""),[h,f]=(0,n.useState)(""),[p,g]=(0,n.useState)(null),[m,y]=(0,n.useState)(!1),[b,x]=(0,n.useState)(!1),v=(0,a.useRouter)(),S=(0,a.useSearchParams)();async function C(t){t.preventDefault(),g(null),y(!0);try{let t=await l.h.post("/api/auth/signup",{name:e,email:o,password:c,companyName:h}),r=await t.json();if(!t.ok){g(r.error||"Erro ao criar conta"),y(!1);return}let n=await (0,i.zB)("credentials",{email:o,password:c,redirect:!1});(null==n?void 0:n.error)?(g("Conta criada, mas erro ao fazer login. Tente fazer login manualmente."),y(!1)):(null==n?void 0:n.ok)&&(v.push("/onboarding"),v.refresh())}catch(e){g("Erro ao criar conta. Tente novamente."),y(!1)}}return(0,n.useEffect)(()=>{"true"===S.get("deleted")&&(x(!0),setTimeout(()=>x(!1),8e3))},[S]),(0,r.jsxs)("div",{style:{width:"100%",maxWidth:400,padding:32,backgroundColor:"#fff",borderRadius:12,boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[(0,r.jsx)("h1",{style:{fontSize:28,fontWeight:700,marginBottom:8,textAlign:"center"},children:"Food Tracker"}),(0,r.jsx)("p",{style:{fontSize:14,color:"#666",textAlign:"center",marginBottom:32},children:"Crie sua conta gr\xe1tis"}),b&&(0,r.jsx)("div",{style:{padding:16,backgroundColor:"#d1fae5",border:"2px solid #10b981",borderRadius:12,marginBottom:16,color:"#065f46",fontWeight:600,textAlign:"center"},children:"Conta exclu\xedda com sucesso. Voc\xea pode criar uma nova conta quando quiser."}),(0,r.jsxs)("form",{onSubmit:C,style:{display:"grid",gap:16},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:14,fontWeight:500,marginBottom:8},children:"Nome completo"}),(0,r.jsx)("input",{type:"text",placeholder:"Seu nome",value:e,onChange:e=>t(e.target.value),required:!0,style:{width:"100%",padding:"12px 16px",fontSize:14,border:"1px solid #e0e0e0",borderRadius:8,outline:"none",transition:"border-color 0.2s"},onFocus:e=>e.target.style.borderColor="#2196F3",onBlur:e=>e.target.style.borderColor="#e0e0e0"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:14,fontWeight:500,marginBottom:8},children:"Email"}),(0,r.jsx)("input",{type:"email",placeholder:"seu@email.com",value:o,onChange:e=>u(e.target.value),required:!0,style:{width:"100%",padding:"12px 16px",fontSize:14,border:"1px solid #e0e0e0",borderRadius:8,outline:"none",transition:"border-color 0.2s"},onFocus:e=>e.target.style.borderColor="#2196F3",onBlur:e=>e.target.style.borderColor="#e0e0e0"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:14,fontWeight:500,marginBottom:8},children:"Senha"}),(0,r.jsx)("input",{type:"password",placeholder:"M\xednimo 8 caracteres",value:c,onChange:e=>d(e.target.value),required:!0,minLength:8,style:{width:"100%",padding:"12px 16px",fontSize:14,border:"1px solid #e0e0e0",borderRadius:8,outline:"none",transition:"border-color 0.2s"},onFocus:e=>e.target.style.borderColor="#2196F3",onBlur:e=>e.target.style.borderColor="#e0e0e0"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:14,fontWeight:500,marginBottom:8},children:"Nome da empresa (opcional)"}),(0,r.jsx)("input",{type:"text",placeholder:"Deixe em branco para usar seu nome",value:h,onChange:e=>f(e.target.value),style:{width:"100%",padding:"12px 16px",fontSize:14,border:"1px solid #e0e0e0",borderRadius:8,outline:"none",transition:"border-color 0.2s"},onFocus:e=>e.target.style.borderColor="#2196F3",onBlur:e=>e.target.style.borderColor="#e0e0e0"})]}),p&&(0,r.jsx)("div",{style:{padding:12,backgroundColor:"#ffebee",color:"#c62828",borderRadius:8,fontSize:14},children:p}),(0,r.jsx)("button",{type:"submit",disabled:m,style:{width:"100%",padding:"12px 24px",fontSize:16,fontWeight:600,color:"#fff",backgroundColor:m?"#999":"#2196F3",border:"none",borderRadius:8,cursor:m?"not-allowed":"pointer",transition:"background-color 0.2s"},onMouseEnter:e=>{m||(e.currentTarget.style.backgroundColor="#1976D2")},onMouseLeave:e=>{m||(e.currentTarget.style.backgroundColor="#2196F3")},children:m?"Criando conta...":"Criar conta gr\xe1tis"})]}),(0,r.jsxs)("p",{style:{textAlign:"center",marginTop:16,color:"#666",fontSize:14},children:["J\xe1 tem uma conta?"," ",(0,r.jsx)(s.default,{href:"/login",style:{color:"#2196F3",fontWeight:600,textDecoration:"none"},children:"Fazer login"})]})]})}function c(){return(0,r.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f5f5"},children:(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)("div",{children:"Carregando..."}),children:(0,r.jsx)(u,{})})})}},5591:function(e,t,o){"use strict";o.d(t,{h:function(){return a},x:function(){return i}});var r=o(5800);let n=o(357).env.NEXT_PUBLIC_API_URL||"https://app.foodtracker.com.br";async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:o,...i}=t,a={...i.headers};if(o)a.Authorization="Bearer ".concat(o);else{let e=localStorage.getItem("auth_token");console.log("[API Client] localStorage auth_token:",e?"exists":"null"),e&&(a.Authorization="Bearer ".concat(e))}i.body&&"string"==typeof i.body&&!a["Content-Type"]&&(a["Content-Type"]="application/json");let s=e.startsWith("http")?e:"".concat(n).concat(e);console.log("[API Client]",{isMobile:!0,baseUrl:n,endpoint:e,finalUrl:s,hasAuthToken:!!a.Authorization});try{let t=await fetch(s,{...i,headers:a,credentials:"include"});if(console.log("[API Client] Response ".concat(e,":"),{status:t.status}),401===t.status){console.warn("401 Unauthorized - triggering client logout");try{(0,r.h)()}catch(e){}}return t}catch(e){throw console.error("[API Client Error]",e),e}}let a={get:(e,t)=>i(e,{method:"GET",token:t}),post:(e,t,o)=>i(e,{method:"POST",body:JSON.stringify(t),token:o}),put:(e,t,o)=>i(e,{method:"PUT",body:JSON.stringify(t),token:o}),patch:(e,t,o)=>i(e,{method:"PATCH",body:JSON.stringify(t),token:o}),delete:(e,t)=>i(e,{method:"DELETE",token:t})}},5800:function(e,t,o){"use strict";function r(){try{try{localStorage.removeItem("auth_token")}catch(e){}try{localStorage.setItem("auth_logout_at",String(Date.now()))}catch(e){}try{window.dispatchEvent(new Event("app:logout"))}catch(e){}}catch(e){}}o.d(t,{h:function(){return r}})},6463:function(e,t,o){"use strict";var r=o(1169);o.o(r,"usePathname")&&o.d(t,{usePathname:function(){return r.usePathname}}),o.o(r,"useRouter")&&o.d(t,{useRouter:function(){return r.useRouter}}),o.o(r,"useSearchParams")&&o.d(t,{useSearchParams:function(){return r.useSearchParams}})},357:function(e,t,o){"use strict";var r,n;e.exports=(null==(r=o.g.process)?void 0:r.env)&&"object"==typeof(null==(n=o.g.process)?void 0:n.env)?o.g.process:o(8081)},8081:function(e){!function(){var t={229:function(e){var t,o,r,n=e.exports={};function i(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(o){try{return t.call(null,e,0)}catch(o){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var l=[],u=!1,c=-1;function d(){u&&r&&(u=!1,r.length?l=r.concat(l):c=-1,l.length&&h())}function h(){if(!u){var e=s(d);u=!0;for(var t=l.length;t;){for(r=l,l=[];++c<t;)r&&r[c].run();c=-1,t=l.length}r=null,u=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];l.push(new f(e,t)),1!==l.length||u||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},o={};function r(e){var n=o[e];if(void 0!==n)return n.exports;var i=o[e]={exports:{}},a=!0;try{t[e](i,i.exports,r),a=!1}finally{a&&delete o[e]}return i.exports}r.ab="//";var n=r(229);e.exports=n}()}},function(e){e.O(0,[174,138,971,23,744],function(){return e(e.s=6613)}),_N_E=e.O()}]);