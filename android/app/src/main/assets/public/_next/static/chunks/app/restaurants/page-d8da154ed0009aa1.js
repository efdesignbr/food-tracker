(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[529],{68866:function(t,e,r){Promise.resolve().then(r.bind(r,60409))},60409:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return a}});var n=r(57437),o=r(2265),i=r(45591);function a(){let[t,e]=(0,o.useState)([]),[r,a]=(0,o.useState)(!0),[s,l]=(0,o.useState)(null),[c,d]=(0,o.useState)(""),[u,h]=(0,o.useState)(""),[f,p]=(0,o.useState)(!1);async function g(){try{a(!0);let t=await i.h.get("/api/restaurants"),r=await t.json();if(!t.ok)throw Error(r.error||"Erro ao carregar");e(r.restaurants||[])}catch(t){l(t.message)}finally{a(!1)}}async function y(t){if(t.preventDefault(),c.trim())try{p(!0);let t=await i.h.post("/api/restaurants",{name:c.trim(),address:u.trim()||null}),r=await t.json();if(!t.ok)throw Error(r.error||"Erro ao cadastrar");d(""),h(""),e(t=>[r.restaurant,...t])}catch(t){l(t.message)}finally{p(!1)}}return(0,o.useEffect)(()=>{g()},[]),(0,n.jsxs)("div",{style:{padding:16,maxWidth:800,margin:"0 auto"},children:[(0,n.jsx)("h1",{style:{fontSize:24,fontWeight:700,marginBottom:16},children:" Restaurantes"}),(0,n.jsx)("form",{onSubmit:y,style:{background:"white",borderRadius:12,padding:16,marginBottom:16,boxShadow:"0 2px 8px rgba(0,0,0,0.05)",border:"1px solid #e5e7eb"},children:(0,n.jsxs)("div",{style:{display:"grid",gap:8,gridTemplateColumns:"1fr"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{display:"block",fontSize:12,color:"#6b7280",marginBottom:4},children:"Nome *"}),(0,n.jsx)("input",{value:c,onChange:t=>d(t.target.value),placeholder:"Ex: Restaurante da Pra\xe7a",style:{width:"100%",padding:10,border:"1px solid #d1d5db",borderRadius:8}})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{display:"block",fontSize:12,color:"#6b7280",marginBottom:4},children:"Endere\xe7o (opcional)"}),(0,n.jsx)("input",{value:u,onChange:t=>h(t.target.value),placeholder:"Rua Exemplo, 123",style:{width:"100%",padding:10,border:"1px solid #d1d5db",borderRadius:8}})]}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{type:"submit",disabled:f||!c.trim(),style:{width:"100%",padding:12,background:f?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:8,fontWeight:700,cursor:f?"not-allowed":"pointer"},children:f?"Cadastrando...":"Cadastrar Restaurante"})})]})}),r?(0,n.jsx)("div",{style:{textAlign:"center",padding:24},children:"Carregando..."}):s?(0,n.jsx)("div",{style:{padding:16,background:"#fee2e2",border:"2px solid #ef4444",borderRadius:12,marginBottom:16,color:"#991b1b"},children:s}):(0,n.jsxs)("div",{style:{display:"grid",gap:8},children:[0===t.length&&(0,n.jsx)("div",{style:{textAlign:"center",padding:24,background:"#f9fafb",borderRadius:12,border:"1px dashed #e5e7eb"},children:"Nenhum restaurante cadastrado ainda."}),t.map(t=>(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"white",border:"1px solid #e5e7eb",borderRadius:12,padding:12},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontWeight:700,color:"#374151"},children:t.name}),t.address&&(0,n.jsx)("div",{style:{fontSize:12,color:"#6b7280"},children:t.address})]}),(0,n.jsx)("div",{style:{fontSize:20}})]},t.id))]})]})}},45591:function(t,e,r){"use strict";r.d(e,{h:function(){return a},x:function(){return i}});var n=r(45800);let o=r(20357).env.NEXT_PUBLIC_API_URL||"https://app.foodtracker.com.br";async function i(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:r,...i}=e,a={...i.headers};if(r)a.Authorization="Bearer ".concat(r);else{let t=localStorage.getItem("auth_token");console.log("[API Client] localStorage auth_token:",t?"exists":"null"),t&&(a.Authorization="Bearer ".concat(t))}i.body&&"string"==typeof i.body&&!a["Content-Type"]&&(a["Content-Type"]="application/json");let s=t.startsWith("http")?t:"".concat(o).concat(t);console.log("[API Client]",{isMobile:!0,baseUrl:o,endpoint:t,finalUrl:s,hasAuthToken:!!a.Authorization,allHeaders:Object.keys(a),xAdCompleted:a["x-ad-completed"]||"not set"});try{let e=await fetch(s,{...i,headers:a,credentials:"include"});if(console.log("[API Client] Response ".concat(t,":"),{status:e.status}),401===e.status){console.warn("401 Unauthorized - triggering client logout");try{(0,n.h)()}catch(t){}}return e}catch(t){throw console.error("[API Client Error]",t),t}}let a={get:(t,e)=>i(t,{method:"GET",token:e}),post:(t,e,r)=>i(t,{method:"POST",body:JSON.stringify(e),token:r}),put:(t,e,r)=>i(t,{method:"PUT",body:JSON.stringify(e),token:r}),patch:(t,e,r)=>i(t,{method:"PATCH",body:JSON.stringify(e),token:r}),delete:(t,e)=>i(t,{method:"DELETE",token:e})}},45800:function(t,e,r){"use strict";function n(){try{try{localStorage.removeItem("auth_token")}catch(t){}try{localStorage.setItem("auth_logout_at",String(Date.now()))}catch(t){}try{window.dispatchEvent(new Event("app:logout"))}catch(t){}}catch(t){}}r.d(e,{h:function(){return n}})},20357:function(t,e,r){"use strict";var n,o;t.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(o=r.g.process)?void 0:o.env)?r.g.process:r(88081)},88081:function(t){!function(){var e={229:function(t){var e,r,n,o=t.exports={};function i(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function s(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(r){try{return e.call(null,t,0)}catch(r){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var l=[],c=!1,d=-1;function u(){c&&n&&(c=!1,n.length?l=n.concat(l):d=-1,l.length&&h())}function h(){if(!c){var t=s(u);c=!0;for(var e=l.length;e;){for(n=l,l=[];++d<e;)n&&n[d].run();d=-1,e=l.length}n=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function p(){}o.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new f(t,e)),1!==l.length||c||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=p,o.addListener=p,o.once=p,o.off=p,o.removeListener=p,o.removeAllListeners=p,o.emit=p,o.prependListener=p,o.prependOnceListener=p,o.listeners=function(t){return[]},o.binding=function(t){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},r={};function n(t){var o=r[t];if(void 0!==o)return o.exports;var i=r[t]={exports:{}},a=!0;try{e[t](i,i.exports,n),a=!1}finally{a&&delete r[t]}return i.exports}n.ab="//";var o=n(229);t.exports=o}()}},function(t){t.O(0,[971,23,744],function(){return t(t.s=68866)}),_N_E=t.O()}]);