(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[160],{8784:function(e,i,t){Promise.resolve().then(t.bind(t,8947))},8947:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return l}});var a=t(7437),n=t(2265),o=t(6394),s=t(6285);let r={free:{photo_analyses_per_month:999999,ocr_analyses_per_month:999999,text_analyses_per_month:999999,coach_analyses_per_month:999999,report_analyses_per_month:999999,history_days:30,coach_ai:!0,advanced_reports:!0,data_export:!1,show_ads:!0},premium:{photo_analyses_per_month:150,ocr_analyses_per_month:150,text_analyses_per_month:150,coach_analyses_per_month:3,report_analyses_per_month:3,history_days:null,coach_ai:!0,advanced_reports:!0,data_export:!0,show_ads:!1},unlimited:{photo_analyses_per_month:999999,ocr_analyses_per_month:999999,text_analyses_per_month:999999,coach_analyses_per_month:999999,report_analyses_per_month:999999,history_days:null,coach_ai:!0,advanced_reports:!0,data_export:!0,show_ads:!1}};var d=t(5591);function l(){let{plan:e,isLoading:i}=(0,o.R)(),[t,l]=(0,n.useState)(!1),[c,g]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!0),[m,f]=(0,n.useState)(!1),[u,b]=(0,n.useState)(!0),[y,x]=(0,n.useState)(null),[_,j]=(0,n.useState)([]),[v,S]=(0,n.useState)(null);async function z(){try{let e=await d.h.get("/api/user/goals"),i=await e.json();e.ok&&i.goals&&i.goals.goal_type&&f(!0)}catch(e){console.error("Erro ao buscar objetivos:",e)}finally{b(!1)}}async function k(){try{p(!0);let e=await d.h.get("/api/coach/history"),i=await e.json();e.ok&&(j(i.analyses||[]),i.analyses.length>0&&x({analysisText:i.analyses[0].analysis_text,recommendations:i.analyses[0].recommendations,insights:i.analyses[0].insights,warnings:i.analyses[0].warnings,analysis_date:i.analyses[0].analysis_date}))}catch(e){console.error("Erro ao buscar hist\xf3rico:",e)}finally{p(!1)}}async function w(){if(!r[e].coach_ai){l(!0);return}g(!0),S(null);try{let e=await d.h.post("/api/coach/analyze",{}),i=await e.json();if(!e.ok){if(403===e.status&&"upgrade_required"===i.error){l(!0);return}throw Error(i.message||i.error||"Erro ao analisar")}e.ok&&i.analysis&&(x(i.analysis),await k())}catch(e){S(e.message)}finally{g(!1)}}(0,n.useEffect)(()=>{k(),z()},[]),h||_.length;let B=r[e].coach_ai;return(0,a.jsxs)("div",{style:{maxWidth:900,margin:"0 auto",padding:24},children:[(0,a.jsx)(s.x5,{isOpen:t,onClose:()=>l(!1),feature:"coach_analysis",currentPlan:e}),(0,a.jsx)("h1",{style:{fontSize:32,fontWeight:700,marginBottom:24},children:"Coach IA"}),i&&(0,a.jsx)("div",{style:{background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:16,padding:32,textAlign:"center",marginBottom:24},children:(0,a.jsx)("div",{style:{fontSize:16,color:"#6b7280"},children:"Carregando informa\xe7\xf5es..."})}),!i&&!u&&!m&&B&&(0,a.jsx)("div",{style:{background:"#fffbeb",border:"2px solid #fbbf24",borderRadius:16,padding:24,marginBottom:24},children:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:16},children:[(0,a.jsx)("div",{style:{fontSize:32}}),(0,a.jsxs)("div",{style:{flex:1},children:[(0,a.jsx)("h3",{style:{fontSize:18,fontWeight:700,marginBottom:8,color:"#92400e"},children:"Configure seus objetivos primeiro"}),(0,a.jsx)("p",{style:{fontSize:15,color:"#92400e",marginBottom:16},children:"Para receber an\xe1lises personalizadas e relevantes, voc\xea precisa definir seus objetivos (perder/ganhar/manter peso), altura, idade e n\xedvel de atividade."}),(0,a.jsx)("a",{href:"/objetivos",style:{display:"inline-block",padding:"12px 24px",background:"#fbbf24",color:"#92400e",borderRadius:8,fontWeight:600,textDecoration:"none"},children:"Configurar Objetivos Agora"})]})]})}),!i&&(0,a.jsxs)("div",{style:{background:B?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"linear-gradient(135deg, #94a3b8 0%, #64748b 100%)",color:"white",borderRadius:16,padding:32,marginBottom:32,textAlign:"center",position:"relative"},children:[!B&&(0,a.jsx)("div",{style:{position:"absolute",top:16,right:16,background:"#fbbf24",color:"#92400e",padding:"6px 12px",borderRadius:8,fontSize:12,fontWeight:700},children:"PREMIUM"}),(0,a.jsx)("div",{style:{fontSize:48,marginBottom:16},children:""}),(0,a.jsx)("h2",{style:{fontSize:24,fontWeight:700,marginBottom:12},children:B?"An\xe1lise Personalizada":"Recurso Premium"}),(0,a.jsx)("p",{style:{fontSize:16,marginBottom:24,opacity:.9},children:B?"Receba insights baseados no seu peso, medidas e alimenta\xe7\xe3o":"Desbloqueie o Coach IA e receba an\xe1lises personalizadas ilimitadas"}),(0,a.jsx)("button",{onClick:B?w:()=>l(!0),disabled:c||B&&h,style:{padding:"16px 32px",background:"white",color:B?"#667eea":"#64748b",border:"none",borderRadius:12,fontSize:16,fontWeight:700,cursor:c||h?"not-allowed":"pointer",opacity:c||h?.7:1},children:c?" Analisando...":B?" Analisar Agora":" Desbloquear Premium"})]}),!i&&!h&&!y&&0===_.length&&!v&&B&&(0,a.jsxs)("div",{style:{background:"#fffbeb",border:"2px solid #fbbf24",borderRadius:16,padding:32,textAlign:"center",marginBottom:24},children:[(0,a.jsx)("div",{style:{fontSize:48,marginBottom:16}}),(0,a.jsx)("h3",{style:{fontSize:20,fontWeight:700,marginBottom:12,color:"#92400e"},children:"Dados insuficientes para an\xe1lise"}),(0,a.jsx)("p",{style:{fontSize:16,color:"#92400e",marginBottom:24},children:"Para receber insights personalizados, voc\xea precisa ter registrado:"}),(0,a.jsxs)("ul",{style:{listStyle:"none",padding:0,margin:"0 auto",maxWidth:400,textAlign:"left"},children:[(0,a.jsx)("li",{style:{padding:"8px 0",fontSize:15,color:"#92400e"},children:"Peso atual"}),(0,a.jsx)("li",{style:{padding:"8px 0",fontSize:15,color:"#92400e"},children:"Medidas corporais (cintura, quadril, etc.)"}),(0,a.jsx)("li",{style:{padding:"8px 0",fontSize:15,color:"#92400e"},children:"Refei\xe7\xf5es recentes"})]}),(0,a.jsxs)("div",{style:{marginTop:24,display:"flex",gap:12,justifyContent:"center",flexWrap:"wrap"},children:[(0,a.jsx)("a",{href:"/peso",style:{padding:"12px 24px",background:"#fbbf24",color:"#92400e",borderRadius:8,fontWeight:600,textDecoration:"none",display:"inline-block"},children:"Registrar Peso/Medidas"}),(0,a.jsx)("a",{href:"/capture",style:{padding:"12px 24px",background:"#fbbf24",color:"#92400e",borderRadius:8,fontWeight:600,textDecoration:"none",display:"inline-block"},children:"Registrar Refei\xe7\xe3o"})]})]}),c&&(0,a.jsxs)("div",{style:{background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:16,padding:32,marginBottom:24},children:[(0,a.jsxs)("div",{style:{marginBottom:24},children:[(0,a.jsx)("div",{style:{height:20,background:"#e5e7eb",borderRadius:4,marginBottom:12,animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"}}),(0,a.jsx)("div",{style:{height:20,background:"#e5e7eb",borderRadius:4,width:"80%",animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"}})]}),(0,a.jsx)("div",{style:{fontSize:14,color:"#6b7280",textAlign:"center"},children:"Analisando seus dados e gerando insights..."})]}),v&&(0,a.jsx)("div",{style:{padding:16,background:"#fee2e2",border:"2px solid #ef4444",borderRadius:12,color:"#991b1b",marginBottom:24},children:v}),y&&(0,a.jsxs)("div",{children:[y.analysis_date&&(0,a.jsxs)("div",{style:{fontSize:14,color:"#6b7280",marginBottom:16},children:["An\xe1lise de ",new Date(y.analysis_date).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})]}),y.warnings&&y.warnings.length>0&&(0,a.jsxs)("div",{style:{background:"#fef2f2",border:"2px solid #ef4444",borderRadius:16,padding:24,marginBottom:24},children:[(0,a.jsx)("h3",{style:{fontSize:20,fontWeight:700,marginBottom:16,color:"#ef4444"},children:"Alertas Importantes"}),(0,a.jsx)("ul",{style:{paddingLeft:20,margin:0},children:y.warnings.map((e,i)=>(0,a.jsx)("li",{style:{fontSize:16,marginBottom:12,color:"#991b1b"},children:e},i))})]}),(0,a.jsxs)("div",{style:{background:"white",border:"2px solid #e5e7eb",borderRadius:16,padding:24,marginBottom:24},children:[(0,a.jsx)("h3",{style:{fontSize:20,fontWeight:700,marginBottom:16},children:"An\xe1lise Geral"}),(0,a.jsx)("div",{style:{fontSize:16,lineHeight:1.8,color:"#374151",whiteSpace:"pre-wrap"},children:y.analysisText})]}),y.insights&&y.insights.length>0&&(0,a.jsxs)("div",{style:{background:"white",border:"2px solid #3b82f6",borderRadius:16,padding:24,marginBottom:24},children:[(0,a.jsx)("h3",{style:{fontSize:20,fontWeight:700,marginBottom:16,color:"#3b82f6"},children:"Insights Identificados"}),(0,a.jsx)("ul",{style:{paddingLeft:20,margin:0},children:y.insights.map((e,i)=>(0,a.jsx)("li",{style:{fontSize:16,marginBottom:12,color:"#374151"},children:e},i))})]}),y.recommendations&&y.recommendations.length>0&&(0,a.jsxs)("div",{style:{background:"white",border:"2px solid #10b981",borderRadius:16,padding:24,marginBottom:24},children:[(0,a.jsx)("h3",{style:{fontSize:20,fontWeight:700,marginBottom:16,color:"#10b981"},children:"Recomenda\xe7\xf5es Pr\xe1ticas"}),(0,a.jsx)("ul",{style:{paddingLeft:20,margin:0},children:y.recommendations.map((e,i)=>(0,a.jsx)("li",{style:{fontSize:16,marginBottom:12,color:"#374151"},children:e},i))})]})]}),_.length>1&&(0,a.jsxs)("div",{style:{background:"white",border:"2px solid #e5e7eb",borderRadius:16,padding:24,marginTop:32},children:[(0,a.jsx)("h3",{style:{fontSize:20,fontWeight:700,marginBottom:16},children:"Hist\xf3rico de An\xe1lises"}),(0,a.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:_.slice(1).map((e,i)=>(0,a.jsx)("button",{onClick:()=>x({analysisText:e.analysis_text,recommendations:e.recommendations,insights:e.insights,warnings:e.warnings,analysis_date:e.analysis_date}),style:{padding:16,background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:12,cursor:"pointer",textAlign:"left",fontSize:14},children:new Date(e.analysis_date).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})},i))})]}),(0,a.jsx)("div",{style:{marginTop:32,padding:16,background:"#f9fafb",borderRadius:12,border:"1px solid #e5e7eb"},children:(0,a.jsx)("p",{style:{margin:0,fontSize:12,color:"#6b7280",textAlign:"center",lineHeight:1.6},children:"As informacoes sao geradas por inteligencia artificial e tem carater informativo. Nao substituem orientacao de nutricionistas ou medicos. Consulte um profissional de saude para orientacoes personalizadas."})})]})}}},function(e){e.O(0,[187,78,971,23,744],function(){return e(e.s=8784)}),_N_E=e.O()}]);