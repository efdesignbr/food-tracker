(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[529],{8866:function(e,t,r){Promise.resolve().then(r.bind(r,409))},409:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return a}});var n=r(7437),o=r(2265),i=r(5591);function a(){let[e,t]=(0,o.useState)([]),[r,a]=(0,o.useState)(!0),[s,l]=(0,o.useState)(null),[d,c]=(0,o.useState)(""),[u,h]=(0,o.useState)(""),[f,p]=(0,o.useState)(!1);async function g(){try{a(!0);let e=await i.h.get("/api/restaurants"),r=await e.json();if(!e.ok)throw Error(r.error||"Erro ao carregar");t(r.restaurants||[])}catch(e){l(e.message)}finally{a(!1)}}async function b(e){if(e.preventDefault(),d.trim())try{p(!0);let e=await i.h.post("/api/restaurants",{name:d.trim(),address:u.trim()||null}),r=await e.json();if(!e.ok)throw Error(r.error||"Erro ao cadastrar");c(""),h(""),t(e=>[r.restaurant,...e])}catch(e){l(e.message)}finally{p(!1)}}return(0,o.useEffect)(()=>{g()},[]),(0,n.jsxs)("div",{style:{padding:16,maxWidth:800,margin:"0 auto"},children:[(0,n.jsx)("h1",{style:{fontSize:24,fontWeight:700,marginBottom:16},children:" Restaurantes"}),(0,n.jsx)("form",{onSubmit:b,style:{background:"white",borderRadius:12,padding:16,marginBottom:16,boxShadow:"0 2px 8px rgba(0,0,0,0.05)",border:"1px solid #e5e7eb"},children:(0,n.jsxs)("div",{style:{display:"grid",gap:8,gridTemplateColumns:"1fr"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{display:"block",fontSize:12,color:"#6b7280",marginBottom:4},children:"Nome *"}),(0,n.jsx)("input",{value:d,onChange:e=>c(e.target.value),placeholder:"Ex: Restaurante da Pra\xe7a",style:{width:"100%",padding:10,border:"1px solid #d1d5db",borderRadius:8}})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{display:"block",fontSize:12,color:"#6b7280",marginBottom:4},children:"Endere\xe7o (opcional)"}),(0,n.jsx)("input",{value:u,onChange:e=>h(e.target.value),placeholder:"Rua Exemplo, 123",style:{width:"100%",padding:10,border:"1px solid #d1d5db",borderRadius:8}})]}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{type:"submit",disabled:f||!d.trim(),style:{width:"100%",padding:12,background:f?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:8,fontWeight:700,cursor:f?"not-allowed":"pointer"},children:f?"Cadastrando...":"Cadastrar Restaurante"})})]})}),r?(0,n.jsx)("div",{style:{textAlign:"center",padding:24},children:"Carregando..."}):s?(0,n.jsx)("div",{style:{padding:16,background:"#fee2e2",border:"2px solid #ef4444",borderRadius:12,marginBottom:16,color:"#991b1b"},children:s}):(0,n.jsxs)("div",{style:{display:"grid",gap:8},children:[0===e.length&&(0,n.jsx)("div",{style:{textAlign:"center",padding:24,background:"#f9fafb",borderRadius:12,border:"1px dashed #e5e7eb"},children:"Nenhum restaurante cadastrado ainda."}),e.map(e=>(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"white",border:"1px solid #e5e7eb",borderRadius:12,padding:12},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontWeight:700,color:"#374151"},children:e.name}),e.address&&(0,n.jsx)("div",{style:{fontSize:12,color:"#6b7280"},children:e.address})]}),(0,n.jsx)("div",{style:{fontSize:20}})]},e.id))]})]})}},5591:function(e,t,r){"use strict";r.d(t,{h:function(){return i},x:function(){return o}});let n=r(357).env.NEXT_PUBLIC_API_URL||"https://app.foodtracker.com.br";async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:r,...o}=t,i={...o.headers};if(r)i.Authorization="Bearer ".concat(r);else{let e=localStorage.getItem("auth_token");console.log("[API Client] localStorage auth_token:",e?"exists":"null"),e&&(i.Authorization="Bearer ".concat(e))}o.body&&"string"==typeof o.body&&!i["Content-Type"]&&(i["Content-Type"]="application/json");let a=e.startsWith("http")?e:"".concat(n).concat(e);console.log("[API Client]",{isMobile:!0,baseUrl:n,endpoint:e,finalUrl:a,hasAuthToken:!!i.Authorization});try{let t=await fetch(a,{...o,headers:i,credentials:"include"});return console.log("[API Client] Response ".concat(e,":"),{status:t.status}),401!==t.status||window.location.pathname.includes("/login")||(console.warn("401 Unauthorized - Redirecting to login"),localStorage.removeItem("auth_token"),window.location.href="/login"),t}catch(e){throw console.error("[API Client Error]",e),e}}let i={get:(e,t)=>o(e,{method:"GET",token:t}),post:(e,t,r)=>o(e,{method:"POST",body:JSON.stringify(t),token:r}),put:(e,t,r)=>o(e,{method:"PUT",body:JSON.stringify(t),token:r}),patch:(e,t,r)=>o(e,{method:"PATCH",body:JSON.stringify(t),token:r}),delete:(e,t)=>o(e,{method:"DELETE",token:t})}},357:function(e,t,r){"use strict";var n,o;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(o=r.g.process)?void 0:o.env)?r.g.process:r(8081)},8081:function(e){!function(){var t={229:function(e){var t,r,n,o=e.exports={};function i(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var l=[],d=!1,c=-1;function u(){d&&n&&(d=!1,n.length?l=n.concat(l):c=-1,l.length&&h())}function h(){if(!d){var e=s(u);d=!0;for(var t=l.length;t;){for(n=l,l=[];++c<t;)n&&n[c].run();c=-1,t=l.length}n=null,d=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new f(e,t)),1!==l.length||d||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=p,o.addListener=p,o.once=p,o.off=p,o.removeListener=p,o.removeAllListeners=p,o.emit=p,o.prependListener=p,o.prependOnceListener=p,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={exports:{}},a=!0;try{t[e](i,i.exports,n),a=!1}finally{a&&delete r[e]}return i.exports}n.ab="//";var o=n(229);e.exports=o}()}},function(e){e.O(0,[971,23,744],function(){return e(e.s=8866)}),_N_E=e.O()}]);