(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{6613:function(e,t,o){Promise.resolve().then(o.bind(o,1039))},1039:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return c}});var r=o(7437),n=o(2265),i=o(8174),a=o(6463),l=o(7138),s=o(5591);function d(){let[e,t]=(0,n.useState)(""),[o,d]=(0,n.useState)(""),[c,u]=(0,n.useState)(""),[g,h]=(0,n.useState)(""),[p,f]=(0,n.useState)(null),[b,x]=(0,n.useState)(!1),[m,y]=(0,n.useState)(!1),C=(0,a.useRouter)(),S=(0,a.useSearchParams)();async function v(t){t.preventDefault(),f(null),x(!0);try{let t=await s.h.post("/api/auth/signup",{name:e,email:o,password:c,companyName:g}),r=await t.json();if(!t.ok){f(r.error||"Erro ao criar conta"),x(!1);return}let n=await (0,i.zB)("credentials",{email:o,password:c,redirect:!1});(null==n?void 0:n.error)?(f("Conta criada, mas erro ao fazer login. Tente fazer login manualmente."),x(!1)):(null==n?void 0:n.ok)&&(C.push("/onboarding"),C.refresh())}catch(e){f("Erro ao criar conta. Tente novamente."),x(!1)}}return(0,n.useEffect)(()=>{"true"===S.get("deleted")&&(y(!0),setTimeout(()=>y(!1),8e3))},[S]),(0,r.jsxs)("div",{style:{width:"100%",maxWidth:400,padding:32,backgroundColor:"#fff",borderRadius:12,boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[(0,r.jsx)("h1",{style:{fontSize:28,fontWeight:700,marginBottom:8,textAlign:"center"},children:"Food Tracker"}),(0,r.jsx)("p",{style:{fontSize:14,color:"#666",textAlign:"center",marginBottom:32},children:"Crie sua conta gr\xe1tis"}),m&&(0,r.jsx)("div",{style:{padding:16,backgroundColor:"#d1fae5",border:"2px solid #10b981",borderRadius:12,marginBottom:16,color:"#065f46",fontWeight:600,textAlign:"center"},children:"Conta exclu\xedda com sucesso. Voc\xea pode criar uma nova conta quando quiser."}),(0,r.jsxs)("form",{onSubmit:v,style:{display:"grid",gap:16},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:14,fontWeight:500,marginBottom:8},children:"Nome completo"}),(0,r.jsx)("input",{type:"text",placeholder:"Seu nome",value:e,onChange:e=>t(e.target.value),required:!0,style:{width:"100%",padding:"12px 16px",fontSize:14,border:"1px solid #e0e0e0",borderRadius:8,outline:"none",transition:"border-color 0.2s"},onFocus:e=>e.target.style.borderColor="#2196F3",onBlur:e=>e.target.style.borderColor="#e0e0e0"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:14,fontWeight:500,marginBottom:8},children:"Email"}),(0,r.jsx)("input",{type:"email",placeholder:"seu@email.com",value:o,onChange:e=>d(e.target.value),required:!0,style:{width:"100%",padding:"12px 16px",fontSize:14,border:"1px solid #e0e0e0",borderRadius:8,outline:"none",transition:"border-color 0.2s"},onFocus:e=>e.target.style.borderColor="#2196F3",onBlur:e=>e.target.style.borderColor="#e0e0e0"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:14,fontWeight:500,marginBottom:8},children:"Senha"}),(0,r.jsx)("input",{type:"password",placeholder:"M\xednimo 8 caracteres",value:c,onChange:e=>u(e.target.value),required:!0,minLength:8,style:{width:"100%",padding:"12px 16px",fontSize:14,border:"1px solid #e0e0e0",borderRadius:8,outline:"none",transition:"border-color 0.2s"},onFocus:e=>e.target.style.borderColor="#2196F3",onBlur:e=>e.target.style.borderColor="#e0e0e0"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:14,fontWeight:500,marginBottom:8},children:"Nome da empresa (opcional)"}),(0,r.jsx)("input",{type:"text",placeholder:"Deixe em branco para usar seu nome",value:g,onChange:e=>h(e.target.value),style:{width:"100%",padding:"12px 16px",fontSize:14,border:"1px solid #e0e0e0",borderRadius:8,outline:"none",transition:"border-color 0.2s"},onFocus:e=>e.target.style.borderColor="#2196F3",onBlur:e=>e.target.style.borderColor="#e0e0e0"})]}),p&&(0,r.jsx)("div",{style:{padding:12,backgroundColor:"#ffebee",color:"#c62828",borderRadius:8,fontSize:14},children:p}),(0,r.jsx)("button",{type:"submit",disabled:b,style:{width:"100%",padding:"12px 24px",fontSize:16,fontWeight:600,color:"#fff",backgroundColor:b?"#999":"#2196F3",border:"none",borderRadius:8,cursor:b?"not-allowed":"pointer",transition:"background-color 0.2s"},onMouseEnter:e=>{b||(e.currentTarget.style.backgroundColor="#1976D2")},onMouseLeave:e=>{b||(e.currentTarget.style.backgroundColor="#2196F3")},children:b?"Criando conta...":"Criar conta gr\xe1tis"})]}),(0,r.jsxs)("p",{style:{textAlign:"center",marginTop:16,color:"#666",fontSize:14},children:["J\xe1 tem uma conta?"," ",(0,r.jsx)(l.default,{href:"/login",style:{color:"#2196F3",fontWeight:600,textDecoration:"none"},children:"Fazer login"})]})]})}function c(){return(0,r.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f5f5"},children:(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)("div",{children:"Carregando..."}),children:(0,r.jsx)(d,{})})})}},5591:function(e,t,o){"use strict";o.d(t,{h:function(){return i},x:function(){return n}});let r=o(357).env.NEXT_PUBLIC_API_URL||"https://app.foodtracker.com.br";async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:o,...n}=t,i={...n.headers};if(o)i.Authorization="Bearer ".concat(o);else{let e=localStorage.getItem("auth_token");console.log("[API Client] localStorage auth_token:",e?"exists":"null"),e&&(i.Authorization="Bearer ".concat(e))}n.body&&"string"==typeof n.body&&!i["Content-Type"]&&(i["Content-Type"]="application/json");let a=e.startsWith("http")?e:"".concat(r).concat(e);console.log("[API Client]",{isMobile:!0,baseUrl:r,endpoint:e,finalUrl:a,hasAuthToken:!!i.Authorization});try{let t=await fetch(a,{...n,headers:i,credentials:"include"});return console.log("[API Client] Response ".concat(e,":"),{status:t.status}),401!==t.status||window.location.pathname.includes("/login")||(console.warn("401 Unauthorized - Redirecting to login"),localStorage.removeItem("auth_token"),window.location.href="/login"),t}catch(e){throw console.error("[API Client Error]",e),e}}let i={get:(e,t)=>n(e,{method:"GET",token:t}),post:(e,t,o)=>n(e,{method:"POST",body:JSON.stringify(t),token:o}),put:(e,t,o)=>n(e,{method:"PUT",body:JSON.stringify(t),token:o}),patch:(e,t,o)=>n(e,{method:"PATCH",body:JSON.stringify(t),token:o}),delete:(e,t)=>n(e,{method:"DELETE",token:t})}}},function(e){e.O(0,[353,138,971,23,744],function(){return e(e.s=6613)}),_N_E=e.O()}]);